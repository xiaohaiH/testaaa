name: copy example
# 在 master 分支推送代码的时候执行该脚本
on:
    push:
        branches:
            - master
# 授予写权限
permissions:
    contents: write
# 定义任务
jobs:
    build-and-deploy:
        runs-on: ubuntu-latest
        steps:
            - name: get code
              uses: actions/checkout@v2

            - name: Install pnpm
              uses: pnpm/action-setup@v2
              with:
                  version: 8

            - name: Set node version to 18
              uses: actions/setup-node@v2
              with:
                  node-version: 18
                  cache: 'pnpm'

            - run: pnpm install

            - name: build
              run: pnpm run build

            - name: copy *.html
              uses: JamesIves/github-pages-deploy-action@v4
              with:
                  folder: ./example/static
                  target-folder: .
                  clean: true
                  clean-exclude: |
                      *.html

            - name: copy example_dist
              uses: JamesIves/github-pages-deploy-action@v4
              with:
                  folder: ./example/dist
                  target-folder: .
                  clean: false

            - name: copy element-ui
              uses: JamesIves/github-pages-deploy-action@v4
              with:
                  folder: ./package/element-ui/dist
                  target-folder: ./element-ui
                  clean: false

            - name: copy element-plus
              uses: JamesIves/github-pages-deploy-action@v4
              with:
                  folder: ./package/element-plus/dist
                  target-folder: ./element-plus
                  clean: false
