name: copy example
# åœ¨ master åˆ†æ”¯æ¨é€ä»£ç çš„æ—¶å€™æ‰§è¡Œè¯¥è„šæœ¬
on:
    push:
        branches:
            - master
# æˆäºˆå†™æƒé™
permissions:
    contents: write
# å®šä¹‰ä»»åŠ¡
jobs:
    # ä»»åŠ¡ä¸€
    build-and-deploy:
        # è¿è¡Œç¯å¢ƒ
        runs-on: ubuntu-latest
        steps:
            # ç¬¬ä¸€æ­¥: å®šä¹‰åç§°å¹¶ä½¿ç”¨æ’ä»¶(æ£€å‡ºä»“åº“ä»£ç )
            - name: get code
              uses: actions/checkout@v2

            # ç¬¬äºŒæ­¥: å®‰è£… pnpm
            - name: Install pnpm
              uses: pnpm/action-setup@v2
              with:
                  version: 8

            # ç¬¬ä¸‰æ­¥: è®¾ç½® node ç‰ˆæœ¬
            - name: Set node version to 20
              uses: actions/setup-node@v2
              with:
                  node-version: 20
                  cache: 'pnpm'

            - run: pnpm install

            # # è®¾ç½® vue ç‰ˆæœ¬, é˜²æ­¢ç¤ºä¾‹æ‰“åŒ…å¤±è´¥
            # - run: pnpm switch3

            # å¯¹ç¤ºä¾‹åŒ…è¿›è¡Œæ‰“åŒ…
            # - run: pnpm --filter="example" run build

            # # å¯¹npmåŒ…è¿›è¡Œæ‰“åŒ…
            - run: pnpm run build:core

            #   # å¯¹npmåŒ…è¿›è¡Œæ‰“åŒ…
            - run: pnpm run build:plus

            # è¦æ“ä½œçš„æ–‡ä»¶
            # - name: copy *.html
            #   uses: JamesIves/github-pages-deploy-action@v4
            #   with:
            #       folder: ./example/static
            #       # å¤åˆ¶åˆ°æŒ‡å®šæ–‡ä»¶å¤¹(å¯çœç•¥)(.: æ ¹ç›®å½•, ~: ç»å¯¹è·¯å¾„)
            #       target-folder: .
            #       single-commit: true
            #       clean: true
            #       clean-exclude: |
            #           *.js
            #           *.css

            # - name: copy example-dist
            #   uses: JamesIves/github-pages-deploy-action@v4
            #   with:
            #       folder: ./example/dist
            #       target-folder: .
            #       clean: false

            - name: copy element-ui
              uses: JamesIves/github-pages-deploy-action@v4
              with:
                  folder: ./package/element-ui/dist
                  target-folder: ./element-ui
                  clean: false

            - name: copy element-plus
              uses: JamesIves/github-pages-deploy-action@v4
              with:
                  folder: ./package/element-plus/dist
                  target-folder: ./element-plus
                  clean: false
    # # ä»»åŠ¡äºŒ
    # build_el:
    #     # è¿è¡Œç¯å¢ƒ
    #     runs-on: ubuntu-latest
    #     needs: build-and-deploy
    #     steps:
    #         # ç¬¬ä¸€æ­¥: å®šä¹‰åç§°å¹¶ä½¿ç”¨æ’ä»¶(æ£€å‡ºä»“åº“ä»£ç )
    #         - name: get code
    #           uses: actions/checkout@v2

    #         # ç¬¬äºŒæ­¥: å®‰è£… pnpm
    #         - name: Install pnpm
    #           uses: pnpm/action-setup@v2
    #           with:
    #               version: 8

    #         # ç¬¬ä¸‰æ­¥: è®¾ç½® node ç‰ˆæœ¬
    #         - name: Set node version to 18
    #           uses: actions/setup-node@v2
    #           with:
    #               node-version: 18
    #               cache: 'pnpm'

    #         - run: pnpm install

    #         # è®¾ç½® vue ç‰ˆæœ¬, é˜²æ­¢ç¤ºä¾‹æ‰“åŒ…å¤±è´¥
    #         - run: pnpm switch2

    #           # å¯¹npmåŒ…è¿›è¡Œæ‰“åŒ…
    #         - run: pnpm run build:el

    #         - name: copy element-ui
    #           uses: JamesIves/github-pages-deploy-action@v4
    #           with:
    #               folder: ./package/element-ui/dist
    #               target-folder: ./element-ui
    #               clean: false

    # # ä»»åŠ¡äºŒ
    # task2:
    #     # è¿è¡Œç¯å¢ƒ
    #     runs-on: ubuntu-latest
    #     steps:
    #         # ç¬¬ä¸€æ­¥: å®šä¹‰åç§°å¹¶ä½¿ç”¨æ’ä»¶(æ£€å‡ºä»“åº“ä»£ç )
    #         - name: Checkout ğŸ›ï¸
    #           # ä½¿ç”¨æ’ä»¶
    #           uses: actions/checkout@v4

    #         # ç¬¬äºŒæ­¥: æ‰“åŒ… example
    #         - name: Install and Build
    #           run: |
    #               npm install
    #               npm run build

    #         # ç¬¬ä¸‰æ­¥: ä½¿ç”¨æ’ä»¶å°†æ–‡ä»¶å¤åˆ¶åˆ° github-pages ä¸­
    #         - name: Deploy ğŸš€
    #           uses: JamesIves/github-pages-deploy-action@v4
    #           with:
    #               # è¦æ“ä½œçš„æ–‡ä»¶
    #               folder: example/static
    #               # å¤åˆ¶åˆ°æŒ‡å®šæ–‡ä»¶å¤¹(å¯çœç•¥)(.: æ ¹ç›®å½•, ~: ç»å¯¹è·¯å¾„)
    #               target-folder: .
    #               clean: true
    #               clean-exclude: |
    #                   *.html
