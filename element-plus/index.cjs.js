"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("vue"),p=require("element-plus");function We(e,n,o){return Array.isArray(e)?(e.length=Math.max(e.length,n),e.splice(n,1,o),o):(e[n]=o,o)}function de(e,n){if(Array.isArray(e)){e.splice(n,1);return}delete e[n]}const Le=t.version.slice(0,3)==="2.7",Z="condition-wrapper";function Ye(e){const n=[];t.onBeforeUnmount(()=>n.splice(0));const o={};let r=!1,i=[];const l={realtime:t.ref(e.realtime),register(m){n.push(m);const h=()=>{r=!0,m.reset(),m.updateWrapperQuery();const S=n.indexOf(m);S!==-1&&n.splice(S,1),e.searchAtDatumChanged&&d(),r=!1,i.forEach(C=>{de(u.value,C),delete o[C]}),i=[]},E=t.getCurrentInstance();return E&&t.onBeforeUnmount(h,Le?E.proxy:E),h},updateQueryValue(m,h){r&&i.push(m),We(u.value,m,h),o[m]=h},insetSearch(){e.realtime&&d()},search:d,removeUnreferencedField(m){let h=0;n.some(E=>(E.getQuery().hasOwnProperty(m)&&(h+=1),h)),h||(de(u.value,m),delete o[m])}};t.provide(Z,l);const u=t.ref({...e.backfill}),c=()=>({...u.value,...e.backfill,...o});async function d(){var h,E;const m=await v();m?(h=e.toast)==null||h.call(e,m):(E=e.search)==null||E.call(e,c())}function b(){var m;n.forEach(h=>{h.reset(),h.updateWrapperQuery()}),(m=e.reset)==null||m.call(e,c())}async function v(){return(await Promise.all(n.map(h=>{var E;return(E=h.validator)==null?void 0:E.call(h,u.value)}))).find(h=>h&&typeof h=="string")}return{child:n,wrapperInstance:l,query:u,getQuery:c,search:d,reset:b,validate:v}}const Xe={realtime:{type:Boolean,default:void 0},searchAtDatumChanged:{type:Boolean,default:void 0},backfill:{type:Object},toast:{type:Function,default:void 0}};function N(e,n){return Array.isArray(e)?e.filter(Boolean).length?e:n:typeof e=="number"?e:e||n}function ke(e,n,o="children"){var r;for(const i of e){if(n(i))return[i];if((r=i[o])!=null&&r.length){const l=ke(i[o],n);if(l.length)return l.unshift(i),l}}return[]}function A(e,...n){return typeof e=="function"?e(...n):typeof e=="string"?e:t.markRaw(e)}function Ee(e){const n=t.ref();return t.computed({set(r){n.value=r},get(){return n.value===void 0?e.defaultValue!==void 0?typeof e.defaultValue=="function"?e.defaultValue(e.query,e.backfill):e.defaultValue:void 0:n.value}})}function Ce(e,n){const o=t.ref(typeof e.disabled=="boolean"?e.disabled:!1),r=t.ref(typeof e.hide=="boolean"?e.hide:!1),i=()=>({query:e.query,backfill:e.backfill,option:n}),l=()=>{if(typeof e.hide=="function"){const c=r.value,d=e.hide(i());c!==d&&(r.value=e.hide(i()))}else if(typeof e.disabled=="function"){const c=o.value,d=e.disabled(i());c!==d&&(o.value=e.disabled(i()))}};let u=[t.watch(()=>e.query,l,{immediate:!0,deep:!0}),t.watch(()=>[e.disabled,e.hide],(c,d)=>{c[0]!==d[0]&&(o.value=typeof c[0]=="boolean"?c[0]:!1,c[0]),c[1]!==d[1]&&(r.value=typeof c[1]=="boolean"?c[1]:!1,c[1]),l()})];return t.onBeforeUnmount(()=>(u.forEach(c=>c()),u=[])),{insetDisabled:o,insetHide:r}}function L(e=!0){const n=t.ref(e);return{flag:n,updateFlag:()=>{n.value=!e,t.nextTick(()=>{n.value=e})}}}function z(e){return(e==null?void 0:e.toString())??""}function G(e){var R;const n=t.inject(Z),o=Ee(e),r=e.backfill&&((R=e.fields)!=null&&R.length?e.fields.map(f=>e.backfill[f]).filter(Boolean):e.backfill[e.field]),i=t.ref(r||(e.defaultValue!==void 0?o.value:e.multiple?[]:"").slice()),l=t.ref([]),u=t.computed(()=>l.value.length?l.value:e.options),c=()=>e.customGetQuery?e.customGetQuery(i.value,N,e):e.multiple&&e.fields?e.fields.reduce((f,g,a)=>{var s;return f[g]=N((s=i.value)==null?void 0:s[a],e.emptyValue),f},{}):{[e.field]:N(i.value,e.emptyValue)},{flag:d,updateFlag:b}=L(),{flag:v,updateFlag:m}=L(),h={reset(){var g;const{multiple:f}=e;b(),m(),i.value=e.resetToInitialValue&&((g=o.value)==null?void 0:g.slice())||(f?[]:"")},updateWrapperQuery(){b(),n&&Object.entries(c()).forEach(([f,g])=>n.updateQueryValue(f,g))},get validator(){return e.validator},getQuery:c};n==null||n.register(h);const{insetDisabled:E,insetHide:S}=Ce(e,h);!r&&e.defaultValue&&h.updateWrapperQuery();const C=[];t.onBeforeUnmount(()=>C.forEach(f=>f())),C.push(t.watch(()=>e.field,(f,g)=>{f!==g&&(n==null||n.removeUnreferencedField(g)),h.updateWrapperQuery()})),C.push(t.watch(()=>[e.fields||e.field,e.fields?e.fields.map(f=>e.query[f]).filter(Boolean):e.query[e.field]],([f,g],[a])=>{const s=e.backfillToValue(g,f,e.query);f.toString()!==a.toString()||z(s)===z(i.value)||d.value&&(i.value=s)})),C.push(t.watch(()=>{var f;return[e.fields||e.field,e.fields?e.fields.map(g=>{var a;return(a=e.backfill)==null?void 0:a[g]}).filter(Boolean):(f=e.backfill)==null?void 0:f[e.field]]},([f,g],[a])=>{const s=e.backfillToValue(g,f,e.backfill);f.toString()!==a.toString()||z(s)===z(i.value)||(m(),I(s))})),C.push(t.watch(()=>[e.depend,e.dependFields,e.dependFields&&[].concat(e.dependFields).map(f=>{var g;return(g=e.query)==null?void 0:g[f]}).join(",")||""],([f,g,a],[s,y,k])=>{v.value&&a!==k&&(Q("depend"),!(f!==s||(g==null?void 0:g.toString())!==(y==null?void 0:y.toString()))&&(i.value===void 0||i.value.toString()===""||I(e.multiple?[]:"")))})),C.push(t.watch(()=>e.getOptions,Q.bind(null,"initial"),{immediate:!0}));function Q(f){var g;(g=e.getOptions)==null||g.call(e,a=>{const s=i.value;i.value=void 0,l.value=a||[],i.value=s},e.query||{},{trigger:f,change:(a,s)=>{s&&(o.value=a),$(a)},search:(a,s)=>{s&&(o.value=a),I(a),n==null||n.search()}})}function I(f){f!==i.value&&(i.value=f,h.updateWrapperQuery())}function $(f){I(f),n==null||n.insetSearch()}return{wrapper:n,option:h,checked:i,getQuery:c,insetDisabled:E,insetHide:S,finalOption:u,updateCheckedValue:I,change:$,reset:h.reset}}const Pe={field:{type:String,required:!0},query:{type:Object,required:!0},backfill:{type:Object},disabled:{type:[Boolean,Function]},hide:{type:[Boolean,Function]},depend:{type:Boolean},dependFields:{type:[String,Array]},resetToInitialValue:{type:[Boolean]},emptyValue:{type:[String,Number,null,void 0]},validator:{type:[Function]},customGetQuery:{type:Function},defaultValue:{type:[String,Array,Function]}},M={...Pe,fields:{type:[Array]},backfillToValue:{type:Function,default:e=>e},multiple:{type:Boolean,default:void 0},options:{type:Array,default:()=>[]},getOptions:{type:Function}};function W(e){return(e==null?void 0:e.toString())??""}function Je(e){var g;const n=t.inject(Z),o=Ee(e),r=t.ref([]),i=t.ref([]),l=t.computed(()=>i.value.length?i.value:e.options),u=()=>{var a;return!C.value&&!o.value?{}:e.customGetQuery?e.customGetQuery(r.value,N,e):(a=e.fields)!=null&&a.length?e.fields.reduce((s,y,k)=>Object.assign(s,{[y]:N(r.value[k],e.emptyValue)}),{}):{[e.field]:N(e.emitPath?[...r.value]:r.value.slice(-1)[0],e.emptyValue)}},{flag:c,updateFlag:d}=L(),{flag:b,updateFlag:v}=L(),m={reset(){var a;return d(),v(),r.value=e.resetToInitialValue&&((a=o.value)==null?void 0:a.slice())||[],this},get validator(){return e.validator},updateWrapperQuery(){d(),n&&Object.entries(u()).forEach(([a,s])=>n.updateQueryValue(a,s))},getQuery:u};n==null||n.register(m);const{insetDisabled:h,insetHide:E}=Ce(e,m),S=[];t.onBeforeUnmount(()=>S.forEach(a=>a()));const C=t.ref(typeof e.getOptions!="function"||!!((g=e.fields)!=null&&g.length));t.watch(C,a=>a&&Q(),{immediate:!0});function Q(){var k;const{backfill:a,field:s,fields:y}=e;if(a){if(y){const B=y.reduce((U,se)=>(a[se]&&U.push(a[se]),U),[]);if(B.length){r.value=B,m.updateWrapperQuery();return}}else if(a[s]){r.value=f(a[s]),m.updateWrapperQuery();return}}(k=o.value)!=null&&k.length&&(r.value=typeof o.value=="string"?f(o.value):o.value.slice(),typeof o.value=="string"&&(o.value=r.value.slice()),m.updateWrapperQuery())}S.push(t.watch(()=>e.fields||[e.field],(a,s)=>{a.toString()!==s.toString()&&n&&s.forEach(y=>a.includes(y)||n.removeUnreferencedField(y)),m.updateWrapperQuery()})),S.push(t.watch(()=>{var a,s;return[((a=e.fields)==null?void 0:a.toString())||e.field,((s=e.fields)==null?void 0:s.map(y=>e.query[y]).filter(Boolean))||e.query[e.field]]},([a,s],[y,k])=>{a!==y||W(s)===W(k)||c.value&&(r.value=typeof s=="string"?f(s):s)})),S.push(t.watch(()=>{var a,s;return(a=e.fields)!=null&&a.length?e.fields.reduce((y,k)=>{var B;return(B=e.backfill)!=null&&B[k]&&y.push(e.backfill[k]),y},[]):(s=e.backfill)==null?void 0:s[e.field]},(a,s)=>{if(C.value&&W(a)!==W(s))if(v(),Array.isArray(a))$(a);else{if(!a&&a!==0){r.value.length&&(r.value=[]);return}$(f(a))}})),S.push(t.watch(()=>[e.depend,e.dependFields,e.dependFields&&[].concat(e.dependFields).map(a=>{var s;return(s=e.query)==null?void 0:s[a]}).join(",")||""],([a,s,y],[k,B,U])=>{b.value&&y!==U&&(I("depend"),!(a!==k||(s==null?void 0:s.toString())!==(B==null?void 0:B.toString()))&&r.value.length&&$(typeof r.value=="string"?"":[]))})),S.push(t.watch(()=>e.getOptions,I.bind(null,"initial"),{immediate:!0}));function I(a){var s;(s=e.getOptions)==null||s.call(e,y=>{i.value=y||[],C.value=!0},e.query||{},{trigger:a,change:(y,k)=>{k&&(o.value=y),R(y)},search:(y,k)=>{k&&(o.value=y),$(y),n==null||n.search()}})}function $(a){const s=Array.isArray(a)?a:f(a);s.join("")!==r.value.join("")&&(r.value=s,m.updateWrapperQuery())}function R(a){$(a||[]),n==null||n.insetSearch()}function f(a){if(!a&&a!==0)return[];const{valueKey:s,childrenKey:y}=e;return ke(l.value,k=>k[s]===a).map(k=>k[s],y).filter(Boolean)}return{wrapper:n,option:m,checked:r,getQuery:u,finalOption:l,insetDisabled:h,insetHide:E,change:R,reset:m.reset}}const Ze={...Pe,fields:{type:[Array]},valueKey:{type:String,required:!0},childrenKey:{type:String},emitPath:{type:[Boolean],default:!1},options:{type:Array,default:()=>[]},getOptions:{type:Function}};var xe=typeof global=="object"&&global&&global.Object===Object&&global;const et=xe;var tt=typeof self=="object"&&self&&self.Object===Object&&self,nt=et||tt||Function("return this")();const oe=nt;var ot=oe.Symbol;const F=ot;var Se=Object.prototype,rt=Se.hasOwnProperty,it=Se.toString,j=F?F.toStringTag:void 0;function at(e){var n=rt.call(e,j),o=e[j];try{e[j]=void 0;var r=!0}catch{}var i=it.call(e);return r&&(n?e[j]=o:delete e[j]),i}var lt=Object.prototype,ct=lt.toString;function ut(e){return ct.call(e)}var st="[object Null]",dt="[object Undefined]",fe=F?F.toStringTag:void 0;function re(e){return e==null?e===void 0?dt:st:fe&&fe in Object(e)?at(e):ut(e)}function ie(e){return e!=null&&typeof e=="object"}var ft="[object Symbol]";function ae(e){return typeof e=="symbol"||ie(e)&&re(e)==ft}function mt(e,n){for(var o=-1,r=e==null?0:e.length,i=Array(r);++o<r;)i[o]=n(e[o],o,e);return i}var pt=Array.isArray;const q=pt;var ht=1/0,me=F?F.prototype:void 0,pe=me?me.toString:void 0;function Be(e){if(typeof e=="string")return e;if(q(e))return mt(e,Be)+"";if(ae(e))return pe?pe.call(e):"";var n=e+"";return n=="0"&&1/e==-ht?"-0":n}function Y(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function yt(e){return e}var gt="[object AsyncFunction]",bt="[object Function]",vt="[object GeneratorFunction]",kt="[object Proxy]";function Et(e){if(!Y(e))return!1;var n=re(e);return n==bt||n==vt||n==gt||n==kt}var Ct=oe["__core-js_shared__"];const ne=Ct;var he=function(){var e=/[^.]+$/.exec(ne&&ne.keys&&ne.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Pt(e){return!!he&&he in e}var St=Function.prototype,Bt=St.toString;function It(e){if(e!=null){try{return Bt.call(e)}catch{}try{return e+""}catch{}}return""}var $t=/[\\^$.*+?()[\]{}|]/g,Ft=/^\[object .+?Constructor\]$/,Ot=Function.prototype,wt=Object.prototype,Tt=Ot.toString,Vt=wt.hasOwnProperty,_t=RegExp("^"+Tt.call(Vt).replace($t,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Dt(e){if(!Y(e)||Pt(e))return!1;var n=Et(e)?_t:Ft;return n.test(It(e))}function Nt(e,n){return e==null?void 0:e[n]}function le(e,n){var o=Nt(e,n);return Dt(o)?o:void 0}function At(e,n,o){switch(o.length){case 0:return e.call(n);case 1:return e.call(n,o[0]);case 2:return e.call(n,o[0],o[1]);case 3:return e.call(n,o[0],o[1],o[2])}return e.apply(n,o)}var Kt=800,Rt=16,jt=Date.now;function Ht(e){var n=0,o=0;return function(){var r=jt(),i=Rt-(r-o);if(o=r,i>0){if(++n>=Kt)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}function Gt(e){return function(){return e}}var Mt=function(){try{var e=le(Object,"defineProperty");return e({},"",{}),e}catch{}}();const X=Mt;var qt=X?function(e,n){return X(e,"toString",{configurable:!0,enumerable:!1,value:Gt(n),writable:!0})}:yt;const Qt=qt;var Ut=Ht(Qt);const zt=Ut;var Wt=9007199254740991,Lt=/^(?:0|[1-9]\d*)$/;function Ie(e,n){var o=typeof e;return n=n??Wt,!!n&&(o=="number"||o!="symbol"&&Lt.test(e))&&e>-1&&e%1==0&&e<n}function Yt(e,n,o){n=="__proto__"&&X?X(e,n,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[n]=o}function $e(e,n){return e===n||e!==e&&n!==n}var Xt=Object.prototype,Jt=Xt.hasOwnProperty;function Zt(e,n,o){var r=e[n];(!(Jt.call(e,n)&&$e(r,o))||o===void 0&&!(n in e))&&Yt(e,n,o)}var ye=Math.max;function xt(e,n,o){return n=ye(n===void 0?e.length-1:n,0),function(){for(var r=arguments,i=-1,l=ye(r.length-n,0),u=Array(l);++i<l;)u[i]=r[n+i];i=-1;for(var c=Array(n+1);++i<n;)c[i]=r[i];return c[n]=o(u),At(e,this,c)}}var en=9007199254740991;function tn(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=en}var nn="[object Arguments]";function ge(e){return ie(e)&&re(e)==nn}var Fe=Object.prototype,on=Fe.hasOwnProperty,rn=Fe.propertyIsEnumerable,an=ge(function(){return arguments}())?ge:function(e){return ie(e)&&on.call(e,"callee")&&!rn.call(e,"callee")};const Oe=an;var ln=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cn=/^\w*$/;function un(e,n){if(q(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||ae(e)?!0:cn.test(e)||!ln.test(e)||n!=null&&e in Object(n)}var sn=le(Object,"create");const H=sn;function dn(){this.__data__=H?H(null):{},this.size=0}function fn(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var mn="__lodash_hash_undefined__",pn=Object.prototype,hn=pn.hasOwnProperty;function yn(e){var n=this.__data__;if(H){var o=n[e];return o===mn?void 0:o}return hn.call(n,e)?n[e]:void 0}var gn=Object.prototype,bn=gn.hasOwnProperty;function vn(e){var n=this.__data__;return H?n[e]!==void 0:bn.call(n,e)}var kn="__lodash_hash_undefined__";function En(e,n){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=H&&n===void 0?kn:n,this}function w(e){var n=-1,o=e==null?0:e.length;for(this.clear();++n<o;){var r=e[n];this.set(r[0],r[1])}}w.prototype.clear=dn;w.prototype.delete=fn;w.prototype.get=yn;w.prototype.has=vn;w.prototype.set=En;function Cn(){this.__data__=[],this.size=0}function x(e,n){for(var o=e.length;o--;)if($e(e[o][0],n))return o;return-1}var Pn=Array.prototype,Sn=Pn.splice;function Bn(e){var n=this.__data__,o=x(n,e);if(o<0)return!1;var r=n.length-1;return o==r?n.pop():Sn.call(n,o,1),--this.size,!0}function In(e){var n=this.__data__,o=x(n,e);return o<0?void 0:n[o][1]}function $n(e){return x(this.__data__,e)>-1}function Fn(e,n){var o=this.__data__,r=x(o,e);return r<0?(++this.size,o.push([e,n])):o[r][1]=n,this}function K(e){var n=-1,o=e==null?0:e.length;for(this.clear();++n<o;){var r=e[n];this.set(r[0],r[1])}}K.prototype.clear=Cn;K.prototype.delete=Bn;K.prototype.get=In;K.prototype.has=$n;K.prototype.set=Fn;var On=le(oe,"Map");const wn=On;function Tn(){this.size=0,this.__data__={hash:new w,map:new(wn||K),string:new w}}function Vn(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function ee(e,n){var o=e.__data__;return Vn(n)?o[typeof n=="string"?"string":"hash"]:o.map}function _n(e){var n=ee(this,e).delete(e);return this.size-=n?1:0,n}function Dn(e){return ee(this,e).get(e)}function Nn(e){return ee(this,e).has(e)}function An(e,n){var o=ee(this,e),r=o.size;return o.set(e,n),this.size+=o.size==r?0:1,this}function T(e){var n=-1,o=e==null?0:e.length;for(this.clear();++n<o;){var r=e[n];this.set(r[0],r[1])}}T.prototype.clear=Tn;T.prototype.delete=_n;T.prototype.get=Dn;T.prototype.has=Nn;T.prototype.set=An;var Kn="Expected a function";function ce(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(Kn);var o=function(){var r=arguments,i=n?n.apply(this,r):r[0],l=o.cache;if(l.has(i))return l.get(i);var u=e.apply(this,r);return o.cache=l.set(i,u)||l,u};return o.cache=new(ce.Cache||T),o}ce.Cache=T;var Rn=500;function jn(e){var n=ce(e,function(r){return o.size===Rn&&o.clear(),r}),o=n.cache;return n}var Hn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gn=/\\(\\)?/g,Mn=jn(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(Hn,function(o,r,i,l){n.push(i?l.replace(Gn,"$1"):r||o)}),n});const qn=Mn;function Qn(e){return e==null?"":Be(e)}function te(e,n){return q(e)?e:un(e,n)?[e]:qn(Qn(e))}var Un=1/0;function ue(e){if(typeof e=="string"||ae(e))return e;var n=e+"";return n=="0"&&1/e==-Un?"-0":n}function zn(e,n){n=te(n,e);for(var o=0,r=n.length;e!=null&&o<r;)e=e[ue(n[o++])];return o&&o==r?e:void 0}function Wn(e,n){for(var o=-1,r=n.length,i=e.length;++o<r;)e[i+o]=n[o];return e}var be=F?F.isConcatSpreadable:void 0;function Ln(e){return q(e)||Oe(e)||!!(be&&e&&e[be])}function we(e,n,o,r,i){var l=-1,u=e.length;for(o||(o=Ln),i||(i=[]);++l<u;){var c=e[l];n>0&&o(c)?n>1?we(c,n-1,o,r,i):Wn(i,c):r||(i[i.length]=c)}return i}function Yn(e){var n=e==null?0:e.length;return n?we(e,1):[]}function Xn(e){return zt(xt(e,void 0,Yn),e+"")}function Jn(e,n){return e!=null&&n in Object(e)}function Zn(e,n,o){n=te(n,e);for(var r=-1,i=n.length,l=!1;++r<i;){var u=ue(n[r]);if(!(l=e!=null&&o(e,u)))break;e=e[u]}return l||++r!=i?l:(i=e==null?0:e.length,!!i&&tn(i)&&Ie(u,i)&&(q(e)||Oe(e)))}function xn(e,n){return e!=null&&Zn(e,n,Jn)}function eo(e,n,o,r){if(!Y(e))return e;n=te(n,e);for(var i=-1,l=n.length,u=l-1,c=e;c!=null&&++i<l;){var d=ue(n[i]),b=o;if(d==="__proto__"||d==="constructor"||d==="prototype")return e;if(i!=u){var v=c[d];b=r?r(v,d,c):void 0,b===void 0&&(b=Y(v)?v:Ie(n[i+1])?[]:{})}Zt(c,d,b),c=c[d]}return e}function to(e,n,o){for(var r=-1,i=n.length,l={};++r<i;){var u=n[r],c=zn(e,u);o(c,u)&&eo(l,te(u,e),c)}return l}function no(e,n){return to(e,n,function(o,r){return xn(e,r)})}var oo=Xn(function(e,n){return e==null?{}:no(e,n)});const P=oo,V={postfix:{type:[String,Object,Function]},as:{type:String}},O={...p.ElFormItem.props,prop:{type:[String,Array]}},_=Object.keys(O),Te={...p.ElSelect.props,...M,...V,...O,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},filterMethod:{type:Function}},ro=Object.keys(p.ElSelect.props),io=t.defineComponent({inheritAttrs:!1,name:"HSelect",components:{ElFormItem:p.ElFormItem,ElSelect:p.ElSelect,ElOptionGroup:p.ElOptionGroup,ElOption:p.ElOption},props:Te,setup(e,n){const o=G(e),r=t.computed(()=>P(e,_)),i=t.computed(()=>P(e,ro)),l=t.ref(""),u=d=>{l.value=d},c=t.computed(()=>{const d=l.value;return d?o.finalOption.value.filter(e.filterMethod.bind(null,d)):o.finalOption.value});return{...o,formItemProps:r,selectProps:i,getNode:A,filterValue:l,customFilterMethod:u,filterSource:c}}}),D=(e,n)=>{const o=e.__vccOpts||e;for(const[r,i]of n)o[r]=i;return o},ao={key:0,class:"condition-item__postfix"};function lo(e,n,o,r,i,l){const u=t.resolveComponent("ElOption"),c=t.resolveComponent("ElOptionGroup"),d=t.resolveComponent("ElSelect"),b=t.resolveComponent("ElFormItem");return t.openBlock(),t.createBlock(b,t.mergeProps({class:`condition-item condition-item--select condition-item--${e.field} condition-item--${!!e.postfix}`},e.formItemProps,{prop:e.formItemProps.prop||e.field}),{default:t.withCtx(()=>[t.createVNode(d,t.mergeProps(e.selectProps,{disabled:e.insetDisabled,"model-value":e.checked,"filter-method":e.filterMethod&&e.customFilterMethod,class:"condition-item__content","onUpdate:modelValue":e.change}),{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.filterSource,v=>(t.openBlock(),t.createElementBlock(t.Fragment,{key:v[e.valueKey]},[v.group&&v.children?(t.openBlock(),t.createBlock(c,{key:0,label:v[e.labelKey]},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(v.children,m=>(t.openBlock(),t.createBlock(u,{key:m[e.valueKey],label:m[e.labelKey],value:m[e.valueKey]},null,8,["label","value"]))),128))]),_:2},1032,["label"])):(t.openBlock(),t.createBlock(u,{key:1,label:v[e.labelKey],value:v[e.valueKey]},null,8,["label","value"]))],64))),128))]),_:1},16,["disabled","model-value","filter-method","onUpdate:modelValue"]),e.postfix?(t.openBlock(),t.createElementBlock("div",ao,[typeof e.postfix=="string"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(e.postfix),1)],64)):(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.getNode(e.postfix,e.checked)),{key:1}))])):t.createCommentVNode("",!0)]),_:1},16,["class","prop"])}const Ve=D(io,[["render",lo]]),_e={...p.ElInput.props,...M,...V,...O,realtime:{type:Boolean,default:!0},waitTime:{type:Number,default:300},clearable:{type:Boolean,default:!0}},co=Object.keys(p.ElInput.props),uo=t.defineComponent({inheritAttrs:!1,name:"HInput",components:{ElFormItem:p.ElFormItem,ElInput:p.ElInput},props:_e,setup(e,n){const o=G(e),r=t.computed(()=>P(e,_)),i=t.computed(()=>P(e,co));let l=0;function u(d){const{realtime:b,waitTime:v}=e;if(l&&clearTimeout(l),b)o.change(d);else{if(o.updateCheckedValue(d),!o.wrapper)return;l=setTimeout(o.wrapper.insetSearch,v)}}function c(d){var b;l&&clearTimeout(l),o.checked.value=d.target.value,o.option.updateWrapperQuery(),(b=o.wrapper)==null||b.search()}return{...o,formItemProps:r,inputProps:i,debounceChange:u,enterHandle:c,getNode:A}}}),so={key:0,class:"condition-item__postfix"};function fo(e,n,o,r,i,l){const u=t.resolveComponent("ElInput"),c=t.resolveComponent("ElFormItem");return t.openBlock(),t.createBlock(c,t.mergeProps({class:`condition-item condition-item--input condition-item--${e.field} condition-item--${!!e.postfix}`},e.formItemProps,{prop:e.formItemProps.prop||e.field}),{default:t.withCtx(()=>[t.createVNode(u,t.mergeProps(e.inputProps,{disabled:e.insetDisabled,"model-value":e.checked,class:"condition-item__content",onInput:e.debounceChange,onKeydown:t.withKeys(e.enterHandle,["enter"])}),null,16,["disabled","model-value","onInput","onKeydown"]),e.postfix?(t.openBlock(),t.createElementBlock("div",so,[typeof e.postfix=="string"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(e.postfix),1)],64)):(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.getNode(e.postfix,e.checked)),{key:1}))])):t.createCommentVNode("",!0)]),_:1},16,["class","prop"])}const De=D(uo,[["render",fo]]),Ne={...p.ElDatePicker.props,...M,...V,...O,valueFormat:{type:String,default:"YYYY-MM-DD"},beginField:{type:String},endField:{type:String}},mo=/range$/;function po(e){return e?mo.test(e):!1}const ho=Object.keys(p.ElDatePicker.props),yo=t.defineComponent({inheritAttrs:!1,name:"HDatepicker",components:{ElFormItem:p.ElFormItem,ElDatePicker:p.ElDatePicker},props:Ne,setup(e,n){const{multiple:o,fields:r,...i}=t.toRefs(e),l=t.computed(()=>e.multiple!==void 0?e.multiple:po(e.type)),u=t.computed(()=>e.fields||(l.value&&e.beginField&&e.endField?[e.beginField,e.endField]:void 0)),c=G(t.reactive({...i,multiple:l,fields:u})),d=t.computed(()=>P(e,_)),b=t.computed(()=>P(e,ho));return{...c,formItemProps:d,datepickerProps:b,isMultiple:l,getNode:A}}}),go={key:0,class:"condition-item__postfix"};function bo(e,n,o,r,i,l){const u=t.resolveComponent("ElDatePicker"),c=t.resolveComponent("ElFormItem");return t.openBlock(),t.createBlock(c,t.mergeProps({class:`condition-item condition-item--datepicker ${e.isMultiple&&"condition-item--datepicker-range"} condition-item--${e.field} condition-item--${!!e.postfix}`},e.formItemProps,{prop:e.formItemProps.prop||e.field}),{default:t.withCtx(()=>[t.createVNode(u,t.mergeProps(e.datepickerProps,{disabled:e.insetDisabled,"model-value":e.checked,class:"condition-item__content","onUpdate:modelValue":e.change}),null,16,["disabled","model-value","onUpdate:modelValue"]),e.postfix?(t.openBlock(),t.createElementBlock("div",go,[typeof e.postfix=="string"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(e.postfix),1)],64)):(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.getNode(e.postfix,e.checked)),{key:1}))])):t.createCommentVNode("",!0)]),_:1},16,["class","prop"])}const Ae=D(yo,[["render",bo]]),Ke={...p.ElCascader.props,...Ze,...V,...O,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0}},vo=Object.keys(p.ElCascader.props),ko=t.defineComponent({inheritAttrs:!1,name:"HCascader",components:{ElFormItem:p.ElFormItem,ElCascader:p.ElCascader},props:Ke,setup(e,n){const o=Je(e),r=t.computed(()=>P(e,_)),i=t.computed(()=>P(e,vo));return{...o,formItemProps:r,cascaderProps:i,getNode:A}}}),Eo={key:0,class:"condition-item__postfix"};function Co(e,n,o,r,i,l){const u=t.resolveComponent("ElCascader"),c=t.resolveComponent("ElFormItem");return t.openBlock(),t.createBlock(c,t.mergeProps({class:`condition-item condition-item--cascader condition-item--${e.field} condition-item--${!!e.postfix}`},e.formItemProps,{prop:e.formItemProps.prop||e.field}),{default:t.withCtx(()=>[t.createVNode(u,t.mergeProps(e.cascaderProps,{disabled:e.insetDisabled,options:e.finalOption,"model-value":e.checked,class:"condition-item__content","onUpdate:modelValue":e.change}),null,16,["disabled","options","model-value","onUpdate:modelValue"]),e.postfix?(t.openBlock(),t.createElementBlock("div",Eo,[typeof e.postfix=="string"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(e.postfix),1)],64)):(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.getNode(e.postfix,e.checked)),{key:1}))])):t.createCommentVNode("",!0)]),_:1},16,["class","prop"])}const Re=D(ko,[["render",Co]]),je={...p.ElRadioGroup.props,...M,...V,...O,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},type:{type:String},cancelable:{type:Boolean,default:void 0}},Po=Object.keys(p.ElRadioGroup.props),So=t.defineComponent({inheritAttrs:!1,name:"HRadio",components:{ElFormItem:p.ElFormItem,ElRadioGroup:p.ElRadioGroup,ElRadioButton:p.ElRadioButton,ElRadio:p.ElRadio},props:je,setup(e,n){const o=G(e),r=t.computed(()=>P(e,_)),i=t.computed(()=>P(e,Po)),l=t.ref(),u=t.computed(()=>e.type==="button"?"ElRadioButton":"ElRadio"),c=t.computed(()=>e.cancelable?"click":null);function d(b,v,m){m(b===v?"":b)}return{...o,formItemProps:r,radioProps:i,radioGroupRef:l,radioType:u,eventName:c,customChange:d,getNode:A}}}),Bo={key:0,class:"condition-item__postfix"};function Io(e,n,o,r,i,l){const u=t.resolveComponent("ElRadioGroup"),c=t.resolveComponent("ElFormItem");return t.openBlock(),t.createBlock(c,t.mergeProps({class:`condition-item condition-item--radio condition-item--${e.field} condition-item--${!!e.postfix}`},e.formItemProps,{prop:e.formItemProps.prop||e.field}),{default:t.withCtx(()=>[t.createVNode(u,t.mergeProps({ref:"radioGroupRef"},e.radioProps,{disabled:e.insetDisabled,"model-value":e.checked,class:"condition-item__content","onUpdate:modelValue":e.change}),{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.finalOption,d=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.radioType),t.mergeProps({key:d[e.valueKey],label:d[e.valueKey]},{[t.toHandlerKey(e.eventName)]:t.withModifiers(b=>e.customChange(d[e.valueKey],e.checked,e.change),["prevent"])}),{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(d[e.labelKey]),1)]),_:2},1040,["label"]))),128))]),_:1},16,["disabled","model-value","onUpdate:modelValue"]),e.postfix?(t.openBlock(),t.createElementBlock("div",Bo,[typeof e.postfix=="string"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(e.postfix),1)],64)):(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.getNode(e.postfix,e.checked)),{key:1}))])):t.createCommentVNode("",!0)]),_:1},16,["class","prop"])}const He=D(So,[["render",Io]]),Ge={...p.ElCheckbox.props,...M,...V,...O,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},type:{type:String},multiple:{type:Boolean,default:!0}},$o=Object.keys(p.ElCheckbox.props),Fo=t.defineComponent({inheritAttrs:!1,name:"HCheckbox",components:{ElFormItem:p.ElFormItem,ElCheckboxGroup:p.ElCheckboxGroup,ElCheckboxButton:p.ElCheckboxButton,ElCheckbox:p.ElCheckbox},props:Ge,setup(e,n){const o=t.ref(),r=t.computed(()=>e.type==="button"?"ElCheckboxButton":"ElCheckbox"),i=G(e),l=t.computed(()=>P(e,_)),u=t.computed(()=>P(e,$o));return{...i,formItemProps:l,checkboxProps:u,checkboxGroupRef:o,checkboxType:r,getNode:A}}}),Oo={key:0,class:"condition-item__postfix"};function wo(e,n,o,r,i,l){const u=t.resolveComponent("ElCheckboxGroup"),c=t.resolveComponent("ElFormItem");return t.openBlock(),t.createBlock(c,t.mergeProps({class:`condition-item condition-item--checkbox condition-item--${e.field} condition-item--${!!e.postfix}`},e.formItemProps,{prop:e.formItemProps.prop||e.field}),{default:t.withCtx(()=>[t.createVNode(u,t.mergeProps(e.checkboxProps,{disabled:e.insetDisabled,"model-value":e.checked,ref:"checkboxGroupRef",class:"condition-item__content","onUpdate:modelValue":e.change}),{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.finalOption,d=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.checkboxType),{key:d[e.valueKey],label:d[e.valueKey]},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(d[e.labelKey]),1)]),_:2},1032,["label"]))),128))]),_:1},16,["disabled","model-value","onUpdate:modelValue"]),e.postfix?(t.openBlock(),t.createElementBlock("div",Oo,[typeof e.postfix=="string"?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(e.postfix),1)],64)):(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.getNode(e.postfix,e.checked)),{key:1}))])):t.createCommentVNode("",!0)]),_:1},16,["class","prop"])}const Me=D(Fo,[["render",wo]]),qe=Object.keys(p.ElForm.props).concat("class","style"),Qe={...p.ElForm.props,...Xe,class:{type:[Object,Array,String]},style:{type:[Object,Array,String]},datum:{type:Object,default:()=>({})},resetToInitialValue:{type:Boolean},immediateSearch:{type:Boolean},renderBtn:{type:Boolean,default:!0},resetTriggerSearch:{type:Boolean},searchText:{type:String,default:"搜索"},resetText:{type:String,default:"重置"}},Ue={search:e=>!0,ready:e=>!0,reset:e=>!0},ve={select:t.markRaw(Ve),input:t.markRaw(De),datepicker:t.markRaw(Ae),cascader:t.markRaw(Re),radio:t.markRaw(He),checkbox:t.markRaw(Me)},J={};function To(e,n){J[e]=t.markRaw(n)}function Vo(e){delete J[e]}function ze(e){return e?J[e]||ve[e]:{...ve,...J}}const _o=t.defineComponent({name:"HWrapper",inheritAttrs:!1,components:{ElForm:p.ElForm,ElButton:p.ElButton},props:Qe,emits:Ue,setup(e,n){const o=t.computed(()=>P(e,qe)),r=t.ref(),i=n.emit.bind(n,"search"),l=n.emit.bind(n,"reset"),u=Ye({...e,search:i,reset:l});function c(){u.reset(),u.search()}return t.onMounted(()=>{e.immediateSearch&&n.emit("ready",u.getQuery())}),{...u,rootProps:o,formRef:r,getComponent:ze,resetAndSearch:c}}});function Do(e,n,o,r,i,l){const u=t.resolveComponent("ElButton"),c=t.resolveComponent("ElForm");return t.openBlock(),t.createBlock(c,t.mergeProps(e.rootProps,{ref:"formRef",model:e.query}),{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.datum,(d,b)=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.getComponent(d.t)),t.mergeProps({key:b},d,{field:d.as||b,resetToInitialValue:e.resetToInitialValue,backfill:e.backfill,query:e.query}),null,16,["field","resetToInitialValue","backfill","query"]))),128)),t.renderSlot(e.$slots,"btn",{search:e.search,reset:e.reset,resetAndSearch:e.resetAndSearch},()=>[e.renderBtn?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createVNode(u,{size:e.size,onClick:e.search},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(e.searchText),1)]),_:1},8,["size","onClick"]),t.createVNode(u,{size:e.size,onClick:n[0]||(n[0]=d=>e.resetTriggerSearch?e.resetAndSearch():e.reset())},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(e.resetText),1)]),_:1},8,["size"])],64)):t.createCommentVNode("",!0)])]),_:3},16,["model"])}const No=D(_o,[["render",Do]]);function Ao(e){return t.reactive(e)}exports.HCascader=Re;exports.HCheckbox=Me;exports.HDatePicker=Ae;exports.HInput=De;exports.HRadio=He;exports.HSelect=Ve;exports.HWrapper=No;exports.cascaderProps=Ke;exports.checkboxProps=Ge;exports.commonProps=V;exports.datepickerProps=Ne;exports.defineCondition=Ao;exports.formItemPropKeys=_;exports.formItemProps=O;exports.formPropKeys=qe;exports.getComponent=ze;exports.inputProps=_e;exports.provideKey=Z;exports.radioProps=je;exports.registerComponent=To;exports.selectProps=Te;exports.unregisterComponent=Vo;exports.wrapperEmits=Ue;exports.wrapperProps=Qe;
//# sourceMappingURL=index.cjs.js.map
