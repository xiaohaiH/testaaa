!function(e,t){"object"==typeof exports&&typeof module<"u"?t(exports,require("vue-demi"),require("element-ui")):"function"==typeof define&&define.amd?define(["exports","vue-demi","element-ui"],t):t((e=typeof globalThis<"u"?globalThis:e||self).HCondition={},e.VueDemi,e.ELEMENT)}(this,(function(e,t,n){"use strict";const r="2.7"===t.version.slice(0,3),o="condition-wrapper";const i={realtime:{type:Boolean,default:void 0},searchAtDatumChanged:{type:Boolean,default:void 0},backfill:{type:Object},toast:{type:Function,default:void 0}};function l(e,t){return Array.isArray(e)?e.filter(Boolean).length?e:t:"number"==typeof e?e:e||t}function a(e,t,n="children"){var r;for(const o of e){if(t(o))return[o];if(null!=(r=o[n])&&r.length){const e=a(o[n],t);if(e.length)return e.unshift(o),e}}return[]}function u(e,...n){return"function"==typeof e?e(...n):"string"==typeof e?e:t.markRaw(e)}function c(e){const n=t.ref();return t.computed({set(e){n.value=e},get:()=>void 0===n.value?void 0!==e.defaultValue?"function"==typeof e.defaultValue?e.defaultValue(e.query,e.backfill):e.defaultValue:void 0:n.value})}function s(e,n){const r=t.ref("boolean"==typeof e.disabled&&e.disabled),o=t.ref("boolean"==typeof e.hide&&e.hide),i=()=>({query:e.query,backfill:e.backfill,option:n}),l=()=>{if("function"==typeof e.hide){o.value!==e.hide(i())&&(o.value=e.hide(i()))}else if("function"==typeof e.disabled){r.value!==e.disabled(i())&&(r.value=e.disabled(i()))}};let a=[t.watch((()=>e.query),l,{immediate:!0,deep:!0}),t.watch((()=>[e.disabled,e.hide]),((e,t)=>{e[0]!==t[0]&&(r.value="boolean"==typeof e[0]&&e[0],e[0]),e[1]!==t[1]&&(o.value="boolean"==typeof e[1]&&e[1],e[1]),l()}))];return t.onBeforeUnmount((()=>(a.forEach((e=>e())),a=[]))),{insetDisabled:r,insetHide:o}}function p(e=!0){const n=t.ref(e);return{flag:n,updateFlag:()=>{n.value=!e,t.nextTick((()=>{n.value=e}))}}}function d(e){return(null==e?void 0:e.toString())??""}function f(e){var n;const r=t.inject(o),i=c(e),a=e.backfill&&(null!=(n=e.fields)&&n.length?e.fields.map((t=>e.backfill[t])).filter(Boolean):e.backfill[e.field]),u=t.ref(a||(void 0!==e.defaultValue?i.value:e.multiple?[]:"").slice()),f=t.ref([]),m=t.computed((()=>f.value.length?f.value:e.options)),v=()=>e.customGetQuery?e.customGetQuery(u.value,l,e):e.multiple&&e.fields?e.fields.reduce(((t,n,r)=>{var o;return t[n]=l(null==(o=u.value)?void 0:o[r],e.emptyValue),t}),{}):{[e.field]:l(u.value,e.emptyValue)},{flag:y,updateFlag:h}=p(),{flag:g,updateFlag:b}=p(),_={reset(){var t;const{multiple:n}=e;h(),b(),u.value=e.resetToInitialValue&&(null==(t=i.value)?void 0:t.slice())||(n?[]:"")},updateWrapperQuery(){h(),r&&Object.entries(v()).forEach((([e,t])=>r.updateQueryValue(e,t)))},get validator(){return e.validator},getQuery:v};null==r||r.register(_);const{insetDisabled:k,insetHide:x}=s(e,_);!a&&e.defaultValue&&_.updateWrapperQuery();const S=[];function E(t){var n;null==(n=e.getOptions)||n.call(e,(e=>{const t=u.value;u.value=void 0,f.value=e||[],u.value=t}),e.query||{},{trigger:t,change:(e,t)=>{t&&(i.value=e),C(e)},search:(e,t)=>{t&&(i.value=e),F(e),null==r||r.search()}})}function F(e){e!==u.value&&(u.value=e,_.updateWrapperQuery())}function C(e){F(e),null==r||r.insetSearch()}return t.onBeforeUnmount((()=>S.forEach((e=>e())))),S.push(t.watch((()=>e.field),((e,t)=>{e!==t&&(null==r||r.removeUnreferencedField(t)),_.updateWrapperQuery()}))),S.push(t.watch((()=>[e.fields||e.field,e.fields?e.fields.map((t=>e.query[t])).filter(Boolean):e.query[e.field]]),(([t,n],[r])=>{const o=e.backfillToValue(n,t,e.query);t.toString()!==r.toString()||d(o)===d(u.value)||y.value&&(u.value=o)}))),S.push(t.watch((()=>{var t;return[e.fields||e.field,e.fields?e.fields.map((t=>{var n;return null==(n=e.backfill)?void 0:n[t]})).filter(Boolean):null==(t=e.backfill)?void 0:t[e.field]]}),(([t,n],[r])=>{const o=e.backfillToValue(n,t,e.backfill);t.toString()!==r.toString()||d(o)===d(u.value)||(b(),F(o))}))),S.push(t.watch((()=>[e.depend,e.dependFields,e.dependFields&&[].concat(e.dependFields).map((t=>{var n;return null==(n=e.query)?void 0:n[t]})).join(",")||""]),(([t,n,r],[o,i,l])=>{g.value&&r!==l&&(E("depend"),t===o&&(null==n?void 0:n.toString())===(null==i?void 0:i.toString())&&(void 0===u.value||""===u.value.toString()||F(e.multiple?[]:"")))}))),S.push(t.watch((()=>e.getOptions),E.bind(null,"initial"),{immediate:!0})),{wrapper:r,option:_,checked:u,getQuery:v,insetDisabled:k,insetHide:x,finalOption:m,updateCheckedValue:F,change:C,reset:_.reset}}const m={field:{type:String,required:!0},query:{type:Object,required:!0},backfill:{type:Object},disabled:{type:[Boolean,Function]},hide:{type:[Boolean,Function]},depend:{type:Boolean},dependFields:{type:[String,Array]},resetToInitialValue:{type:[Boolean]},emptyValue:{type:[String,Number,null,void 0]},validator:{type:[Function]},customGetQuery:{type:Function},defaultValue:{type:[String,Array,Function]}},v={...m,fields:{type:[Array]},backfillToValue:{type:Function,default:e=>e},multiple:{type:Boolean,default:void 0},options:{type:Array,default:()=>[]},getOptions:{type:Function}};function y(e){return(null==e?void 0:e.toString())??""}function h(e){var n;const r=t.inject(o),i=c(e),u=t.ref([]),d=t.ref([]),f=t.computed((()=>d.value.length?d.value:e.options)),m=()=>{var t;return E.value||i.value?e.customGetQuery?e.customGetQuery(u.value,l,e):null!=(t=e.fields)&&t.length?e.fields.reduce(((t,n,r)=>Object.assign(t,{[n]:l(u.value[r],e.emptyValue)})),{}):{[e.field]:l(e.emitPath?[...u.value]:u.value.slice(-1)[0],e.emptyValue)}:{}},{flag:v,updateFlag:h}=p(),{flag:g,updateFlag:b}=p(),_={reset(){var t;return h(),b(),u.value=e.resetToInitialValue&&(null==(t=i.value)?void 0:t.slice())||[],this},get validator(){return e.validator},updateWrapperQuery(){h(),r&&Object.entries(m()).forEach((([e,t])=>r.updateQueryValue(e,t)))},getQuery:m};null==r||r.register(_);const{insetDisabled:k,insetHide:x}=s(e,_),S=[];t.onBeforeUnmount((()=>S.forEach((e=>e()))));const E=t.ref("function"!=typeof e.getOptions||!(null==(n=e.fields)||!n.length));function F(t){var n;null==(n=e.getOptions)||n.call(e,(e=>{d.value=e||[],E.value=!0}),e.query||{},{trigger:t,change:(e,t)=>{t&&(i.value=e),O(e)},search:(e,t)=>{t&&(i.value=e),C(e),null==r||r.search()}})}function C(e){const t=Array.isArray(e)?e:I(e);t.join("")!==u.value.join("")&&(u.value=t,_.updateWrapperQuery())}function O(e){C(e||[]),null==r||r.insetSearch()}function I(t){if(!t&&0!==t)return[];const{valueKey:n,childrenKey:r}=e;return a(f.value,(e=>e[n]===t)).map((e=>e[n]),r).filter(Boolean)}return t.watch(E,(t=>t&&function(){var t;const{backfill:n,field:r,fields:o}=e;if(n)if(o){const e=o.reduce(((e,t)=>(n[t]&&e.push(n[t]),e)),[]);if(e.length)return u.value=e,void _.updateWrapperQuery()}else if(n[r])return u.value=I(n[r]),void _.updateWrapperQuery();null!=(t=i.value)&&t.length&&(u.value="string"==typeof i.value?I(i.value):i.value.slice(),"string"==typeof i.value&&(i.value=u.value.slice()),_.updateWrapperQuery())}()),{immediate:!0}),S.push(t.watch((()=>e.fields||[e.field]),((e,t)=>{e.toString()!==t.toString()&&r&&t.forEach((t=>e.includes(t)||r.removeUnreferencedField(t))),_.updateWrapperQuery()}))),S.push(t.watch((()=>{var t,n;return[(null==(t=e.fields)?void 0:t.toString())||e.field,(null==(n=e.fields)?void 0:n.map((t=>e.query[t])).filter(Boolean))||e.query[e.field]]}),(([e,t],[n,r])=>{e!==n||y(t)===y(r)||v.value&&(u.value="string"==typeof t?I(t):t)}))),S.push(t.watch((()=>{var t,n;return null!=(t=e.fields)&&t.length?e.fields.reduce(((t,n)=>{var r;return null!=(r=e.backfill)&&r[n]&&t.push(e.backfill[n]),t}),[]):null==(n=e.backfill)?void 0:n[e.field]}),((e,t)=>{if(E.value&&y(e)!==y(t))if(b(),Array.isArray(e))C(e);else{if(!e&&0!==e)return void(u.value.length&&(u.value=[]));C(I(e))}}))),S.push(t.watch((()=>[e.depend,e.dependFields,e.dependFields&&[].concat(e.dependFields).map((t=>{var n;return null==(n=e.query)?void 0:n[t]})).join(",")||""]),(([e,t,n],[r,o,i])=>{g.value&&n!==i&&(F("depend"),e===r&&(null==t?void 0:t.toString())===(null==o?void 0:o.toString())&&u.value.length&&C("string"==typeof u.value?"":[]))}))),S.push(t.watch((()=>e.getOptions),F.bind(null,"initial"),{immediate:!0})),{wrapper:r,option:_,checked:u,getQuery:m,finalOption:f,insetDisabled:k,insetHide:x,change:O,reset:_.reset}}const g={...m,fields:{type:[Array]},valueKey:{type:String,required:!0},childrenKey:{type:String},emitPath:{type:[Boolean],default:!1},options:{type:Array,default:()=>[]},getOptions:{type:Function}};const b="object"==typeof global&&global&&global.Object===Object&&global;var _="object"==typeof self&&self&&self.Object===Object&&self;const k=b||_||Function("return this")();const x=k.Symbol;var S=Object.prototype,E=S.hasOwnProperty,F=S.toString,C=x?x.toStringTag:void 0;var O=Object.prototype.toString;var I="[object Null]",P="[object Undefined]",j=x?x.toStringTag:void 0;function w(e){return null==e?void 0===e?P:I:j&&j in Object(e)?function(e){var t=E.call(e,C),n=e[C];try{e[C]=void 0;var r=!0}catch{}var o=F.call(e);return r&&(t?e[C]=n:delete e[C]),o}(e):function(e){return O.call(e)}(e)}function B(e){return null!=e&&"object"==typeof e}var $="[object Symbol]";function T(e){return"symbol"==typeof e||B(e)&&w(e)==$}const R=Array.isArray;var A=1/0,K=x?x.prototype:void 0,V=K?K.toString:void 0;function N(e){if("string"==typeof e)return e;if(R(e))return function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}(e,N)+"";if(T(e))return V?V.call(e):"";var t=e+"";return"0"==t&&1/e==-A?"-0":t}function Q(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var D="[object AsyncFunction]",q="[object Function]",G="[object GeneratorFunction]",H="[object Proxy]";const z=k["__core-js_shared__"];var M,W=(M=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"";var U=Function.prototype.toString;var X=/^\[object .+?Constructor\]$/,L=Function.prototype,J=Object.prototype,Y=L.toString,Z=J.hasOwnProperty,ee=RegExp("^"+Y.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function te(e){if(!Q(e)||function(e){return!!W&&W in e}(e))return!1;var t=function(e){if(!Q(e))return!1;var t=w(e);return t==q||t==G||t==D||t==H}(e)?ee:X;return t.test(function(e){if(null!=e){try{return U.call(e)}catch{}try{return e+""}catch{}}return""}(e))}function ne(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return te(n)?n:void 0}var re=Date.now;function oe(e){return function(){return e}}var ie=function(){try{var e=ne(Object,"defineProperty");return e({},"",{}),e}catch{}}();const le=ie;var ae=le?function(e,t){return le(e,"toString",{configurable:!0,enumerable:!1,value:oe(t),writable:!0})}:function(e){return e},ue=function(e){var t=0,n=0;return function(){var r=re(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ae);const ce=ue;var se=9007199254740991,pe=/^(?:0|[1-9]\d*)$/;function de(e,t){var n=typeof e;return!!(t=t??se)&&("number"==n||"symbol"!=n&&pe.test(e))&&e>-1&&e%1==0&&e<t}function fe(e,t){return e===t||e!=e&&t!=t}var me=Object.prototype.hasOwnProperty;function ve(e,t,n){var r=e[t];(!me.call(e,t)||!fe(r,n)||void 0===n&&!(t in e))&&function(e,t,n){"__proto__"==t&&le?le(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}(e,t,n)}var ye=Math.max;var he=9007199254740991;function ge(e){return B(e)&&"[object Arguments]"==w(e)}var be=Object.prototype,_e=be.hasOwnProperty,ke=be.propertyIsEnumerable,xe=ge(function(){return arguments}())?ge:function(e){return B(e)&&_e.call(e,"callee")&&!ke.call(e,"callee")};const Se=xe;var Ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fe=/^\w*$/;const Ce=ne(Object,"create");var Oe=Object.prototype.hasOwnProperty;var Ie=Object.prototype.hasOwnProperty;function Pe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function je(e,t){for(var n=e.length;n--;)if(fe(e[n][0],t))return n;return-1}Pe.prototype.clear=function(){this.__data__=Ce?Ce(null):{},this.size=0},Pe.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Pe.prototype.get=function(e){var t=this.__data__;if(Ce){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Oe.call(t,e)?t[e]:void 0},Pe.prototype.has=function(e){var t=this.__data__;return Ce?void 0!==t[e]:Ie.call(t,e)},Pe.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ce&&void 0===t?"__lodash_hash_undefined__":t,this};var we=Array.prototype.splice;function Be(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Be.prototype.clear=function(){this.__data__=[],this.size=0},Be.prototype.delete=function(e){var t=this.__data__,n=je(t,e);return!(n<0)&&(n==t.length-1?t.pop():we.call(t,n,1),--this.size,!0)},Be.prototype.get=function(e){var t=this.__data__,n=je(t,e);return n<0?void 0:t[n][1]},Be.prototype.has=function(e){return je(this.__data__,e)>-1},Be.prototype.set=function(e,t){var n=this.__data__,r=je(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const $e=ne(k,"Map");function Te(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Re.prototype.clear=function(){this.size=0,this.__data__={hash:new Pe,map:new($e||Be),string:new Pe}},Re.prototype.delete=function(e){var t=Te(this,e).delete(e);return this.size-=t?1:0,t},Re.prototype.get=function(e){return Te(this,e).get(e)},Re.prototype.has=function(e){return Te(this,e).has(e)},Re.prototype.set=function(e,t){var n=Te(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var Ae="Expected a function";function Ke(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Ae);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var l=e.apply(this,r);return n.cache=i.set(o,l)||i,l};return n.cache=new(Ke.Cache||Re),n}Ke.Cache=Re;var Ve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ne=/\\(\\)?/g,Qe=function(e){var t=Ke(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ve,(function(e,n,r,o){t.push(r?o.replace(Ne,"$1"):n||e)})),t}));const De=Qe;function qe(e,t){return R(e)?e:function(e,t){if(R(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!T(e))||Fe.test(e)||!Ee.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:De(function(e){return null==e?"":N(e)}(e))}var Ge=1/0;function He(e){if("string"==typeof e||T(e))return e;var t=e+"";return"0"==t&&1/e==-Ge?"-0":t}function ze(e,t){for(var n=0,r=(t=qe(t,e)).length;null!=e&&n<r;)e=e[He(t[n++])];return n&&n==r?e:void 0}function Me(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}var We=x?x.isConcatSpreadable:void 0;function Ue(e){return R(e)||Se(e)||!!(We&&e&&e[We])}function Xe(e,t,n,r,o){var i=-1,l=e.length;for(n||(n=Ue),o||(o=[]);++i<l;){var a=e[i];t>0&&n(a)?t>1?Xe(a,t-1,n,r,o):Me(o,a):r||(o[o.length]=a)}return o}function Le(e){return(null==e?0:e.length)?Xe(e,1):[]}function Je(e,t){return null!=e&&t in Object(e)}function Ye(e,t,n){for(var r=-1,o=(t=qe(t,e)).length,i=!1;++r<o;){var l=He(t[r]);if(!(i=null!=e&&n(e,l)))break;e=e[l]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=he}(o)&&de(l,o)&&(R(e)||Se(e))}function Ze(e,t,n,r){if(!Q(e))return e;for(var o=-1,i=(t=qe(t,e)).length,l=i-1,a=e;null!=a&&++o<i;){var u=He(t[o]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=l){var s=a[u];void 0===(c=r?r(s,u,a):void 0)&&(c=Q(s)?s:de(t[o+1])?[]:{})}ve(a,u,c),a=a[u]}return e}function et(e,t){return function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var l=t[r],a=ze(e,l);n(a,l)&&Ze(i,qe(l,e),a)}return i}(e,t,(function(t,n){return function(e,t){return null!=e&&Ye(e,t,Je)}(e,n)}))}var tt=function(e){return ce(function(e,t,n){return t=ye(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=ye(r.length-t,0),l=Array(i);++o<i;)l[o]=r[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=r[o];return a[t]=n(l),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,a)}}(e,void 0,Le),e+"")}((function(e,t){return null==e?{}:et(e,t)}));const nt=tt,rt={postfix:{type:[String,Object,Function]},as:{type:String}},ot={...n.FormItem.props,prop:{type:[String,Array]}},it=Object.keys(ot),lt={...n.Select.props};delete lt.value;const at={...lt,...v,...rt,...ot,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},filterMethod:{type:Function}},ut=Object.keys(n.Select.props),ct=t.defineComponent({inheritAttrs:!1,name:"HSelect",components:{ElFormItem:n.FormItem,ElSelect:n.Select,ElOptionGroup:n.OptionGroup,ElOption:n.Option},props:at,setup(e,n){const r=f(e),o=t.computed((()=>nt(e,it))),i=t.computed((()=>nt(e,ut))),l=t.ref(""),a=t.computed((()=>{const t=l.value;return t?r.finalOption.value.filter(e.filterMethod.bind(null,t)):r.finalOption.value}));return{...r,formItemProps:o,selectProps:i,getNode:u,filterValue:l,customFilterMethod:e=>{l.value=e},filterSource:a}}});function st(e,t,n,r,o,i,l,a){var u,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),l?(u=function(e){!(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)&&typeof __VUE_SSR_CONTEXT__<"u"&&(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},c._ssrRegister=u):o&&(u=a?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),u)if(c.functional){c._injectStyles=u;var s=c.render;c.render=function(e,t){return u.call(t),s(e,t)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,u):[u]}return{exports:e,options:c}}const pt={};var dt=st(ct,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--select condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElSelect",e._g(e._b({staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,"filter-method":e.filterMethod&&e.customFilterMethod,value:e.checked},on:{input:e.change,blur:function(t){return e.customFilterMethod("")},change:function(t){return e.customFilterMethod("")}}},"ElSelect",e.selectProps,!1),e.$listeners),[e._l(e.filterSource,(function(t){return[t.group&&t.children?[n("ElOptionGroup",{key:t[e.valueKey],attrs:{label:t[e.labelKey]}},[e._l(t.children,(function(t){return[n("ElOption",{key:t[e.valueKey],attrs:{label:t[e.labelKey],value:t[e.valueKey]}})]}))],2)]:[n("ElOption",{key:t[e.valueKey],attrs:{label:t[e.labelKey],value:t[e.valueKey]}})]]}))],2),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)}),[],!1,(function(e){for(let e in pt)this[e]=pt[e]}),"05cee438",null,null);const ft=dt.exports,mt={maxlength:{type:[String,Number,Boolean]},minlength:{type:[String,Number,Boolean]},placeholder:{type:[String,Number,Boolean]},rows:{type:[String,Number,Boolean]},name:{type:[String,Number,Boolean]},max:{type:[String,Number,Boolean]},min:{type:[String,Number,Boolean]},step:{type:[String,Number,Boolean]},autofocus:{type:[String,Number,Boolean]}},vt={...n.Input.props,...v,...rt,...ot,...mt,realtime:{type:Boolean,default:!0},waitTime:{type:Number,default:300},clearable:{type:Boolean,default:!0}},yt=Object.keys(n.Input.props).concat(Object.keys(mt)),ht=t.defineComponent({inheritAttrs:!1,name:"HInput",components:{ElFormItem:n.FormItem,ElInput:n.Input},props:vt,setup(e,n){const r=f(e),o=t.computed((()=>nt(e,it))),i=t.computed((()=>nt(e,yt)));let l=0;return{...r,formItemProps:o,inputProps:i,debounceChange:function(t){const{realtime:n,waitTime:o}=e;if(l&&clearTimeout(l),n)r.change(t);else{if(r.updateCheckedValue(t),!r.wrapper)return;l=setTimeout(r.wrapper.insetSearch,o)}},enterHandle:function(e){var t;l&&clearTimeout(l),r.checked.value=e.target.value,r.option.updateWrapperQuery(),null==(t=r.wrapper)||t.search()},getNode:u}}});const gt={};var bt=st(ht,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--input condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElInput",e._g(e._b({staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,value:e.checked},on:{input:e.debounceChange},nativeOn:{keydown:function(t){return"keyCode"in t&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterHandle(t)}}},"ElInput",e.inputProps,!1),e.$listeners)),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)}),[],!1,(function(e){for(let e in gt)this[e]=gt[e]}),"06bedfc6",null,null);const _t=bt.exports;const kt=function e(t){var n;const r={...t.props};return null==(n=t.mixins)||n.forEach((t=>Object.assign(r,e(t)))),r}(n.DatePicker),xt={...kt,...v,...rt,...ot,valueFormat:{type:String,default:"yyyy-MM-dd"},beginField:{type:String},endField:{type:String}},St=/range$/;const Et=Object.keys(kt),Ft=t.defineComponent({inheritAttrs:!1,name:"HDatepicker",components:{ElFormItem:n.FormItem,ElDatePicker:n.DatePicker},props:xt,setup(e,n){const{multiple:r,fields:o,...i}=t.toRefs(e),l=t.computed((()=>void 0!==e.multiple?e.multiple:function(e){return!!e&&St.test(e)}(e.type))),a=t.computed((()=>e.fields||(l.value&&e.beginField&&e.endField?[e.beginField,e.endField]:void 0)));return{...f(t.reactive({...i,multiple:l,fields:a})),formItemProps:t.computed((()=>nt(e,it))),datepickerProps:t.computed((()=>nt(e,Et))),isMultiple:l,getNode:u}}});const Ct={};var Ot=st(Ft,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--datepicker ${e.isMultiple&&"condition-item--datepicker-range"} condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElDatePicker",e._g(e._b({staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,value:e.checked},on:{input:e.change}},"ElDatePicker",e.datepickerProps,!1),e.$listeners)),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)}),[],!1,(function(e){for(let e in Ct)this[e]=Ct[e]}),"6eeeab5a",null,null);const It=Ot.exports,Pt={...n.Cascader.props,...g,...rt,...ot,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0}},jt=Object.keys(n.Cascader.props),wt=t.defineComponent({inheritAttrs:!1,name:"HCascader",components:{ElFormItem:n.FormItem,ElCascader:n.Cascader},props:Pt,setup:(e,n)=>({...h(e),formItemProps:t.computed((()=>nt(e,it))),cascaderProps:t.computed((()=>nt(e,jt))),getNode:u})});const Bt={};var $t=st(wt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--cascader condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElCascader",e._g(e._b({staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,options:e.finalOption,value:e.checked},on:{change:e.change}},"ElCascader",e.cascaderProps,!1),e.$listeners)),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)}),[],!1,(function(e){for(let e in Bt)this[e]=Bt[e]}),"cdb858b6",null,null);const Tt=$t.exports,Rt={...n.RadioGroup.props,...v,...rt,...ot,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},type:{type:String},cancelable:{type:Boolean,default:void 0}},At=Object.keys(n.RadioGroup.props),Kt=t.defineComponent({inheritAttrs:!1,name:"HRadio",components:{ElFormItem:n.FormItem,ElRadioGroup:n.RadioGroup,ElRadioButton:n.RadioButton,ElRadio:n.Radio},props:Rt,setup(e,n){const r=f(e),o=t.computed((()=>nt(e,it))),i=t.computed((()=>nt(e,At))),l=t.ref(),a=t.computed((()=>"button"===e.type?"ElRadioButton":"ElRadio")),c=t.computed((()=>e.cancelable?"click":null));return{...r,formItemProps:o,radioProps:i,radioGroupRef:l,radioType:a,eventName:c,customChange:function(e,t,n){var r;n(e===t?"":e),null==(r=l.value)||r.$children.forEach((e=>e.$el.blur()))},getNode:u}}});const Vt={};var Nt=st(Kt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--radio condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElRadioGroup",e._g(e._b({ref:"radioGroupRef",staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,value:e.checked},on:{input:e.change}},"ElRadioGroup",e.radioProps,!1),e.$listeners),[e._l(e.finalOption,(function(t){return[n(e.radioType,{key:t[e.valueKey],tag:"component",attrs:{label:t[e.valueKey]},nativeOn:e._d({},[e.eventName,function(n){return n.preventDefault(),e.customChange(t[e.valueKey],e.checked,e.change)}])},[e._v(" "+e._s(t[e.labelKey])+" ")])]}))],2),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)}),[],!1,(function(e){for(let e in Vt)this[e]=Vt[e]}),"4ebde3f4",null,null);const Qt=Nt.exports,Dt={...n.Checkbox.props};delete Dt.checked;const qt={...Dt,...v,...rt,...ot,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},type:{type:String},multiple:{type:Boolean,default:!0}},Gt=Object.keys(Dt),Ht=t.defineComponent({inheritAttrs:!1,name:"HCheckbox",components:{ElFormItem:n.FormItem,ElCheckboxGroup:n.CheckboxGroup,ElCheckboxButton:n.CheckboxButton,ElCheckbox:n.Checkbox},props:qt,setup(e,n){const r=t.ref(),o=t.computed((()=>"button"===e.type?"ElCheckboxButton":"ElCheckbox"));return{...f(e),formItemProps:t.computed((()=>nt(e,it))),checkboxProps:t.computed((()=>nt(e,Gt))),checkboxGroupRef:r,checkboxType:o,getNode:u}}});const zt={};var Mt=st(Ht,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--checkbox condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElCheckboxGroup",e._g(e._b({ref:"checkboxGroupRef",staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,value:e.checked},on:{input:e.change}},"ElCheckboxGroup",e.checkboxProps,!1),e.$listeners),[e._l(e.finalOption,(function(t){return[n(e.checkboxType,{key:t[e.valueKey],tag:"component",attrs:{label:t[e.valueKey]}},[e._v(" "+e._s(t[e.labelKey])+" ")])]}))],2),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)}),[],!1,(function(e){for(let e in zt)this[e]=zt[e]}),"16a423d1",null,null);const Wt=Mt.exports,Ut=Object.keys(n.Form.props),Xt={...n.Form.props,...i,datum:{type:Object,default:()=>({})},resetToInitialValue:{type:Boolean},immediateSearch:{type:Boolean},renderBtn:{type:Boolean,default:!0},resetTriggerSearch:{type:Boolean},searchText:{type:String,default:"搜索"},resetText:{type:String,default:"重置"}},Lt={search:e=>!0,ready:e=>!0,reset:e=>!0},Jt={select:t.markRaw(ft),input:t.markRaw(_t),datepicker:t.markRaw(It),cascader:t.markRaw(Tt),radio:t.markRaw(Qt),checkbox:t.markRaw(Wt)},Yt={};function Zt(e){return e?Yt[e]||Jt[e]:{...Jt,...Yt}}const en=t.defineComponent({name:"HWrapper",inheritAttrs:!1,components:{ElForm:n.Form,ElButton:n.Button},props:Xt,emits:Lt,setup(e,n){const i=t.computed((()=>nt(e,Ut))),l=t.ref(),a=n.emit.bind(n,"search"),u=n.emit.bind(n,"reset"),c=function(e){const n=[];t.onBeforeUnmount((()=>n.splice(0)));const i={};let l=!1,a=[];const u={realtime:t.ref(e.realtime),register(o){n.push(o);const u=()=>{l=!0,o.reset(),o.updateWrapperQuery();const r=n.indexOf(o);-1!==r&&n.splice(r,1),e.searchAtDatumChanged&&p(),l=!1,a.forEach((e=>{t.del(c.value,e),delete i[e]})),a=[]},s=t.getCurrentInstance();return s&&t.onBeforeUnmount(u,r?s.proxy:s),u},updateQueryValue(e,n){l&&a.push(e),t.set(c.value,e,n),i[e]=n},insetSearch(){e.realtime&&p()},search:p,removeUnreferencedField(e){let r=0;n.some((t=>(t.getQuery().hasOwnProperty(e)&&(r+=1),r))),r||(t.del(c.value,e),delete i[e])}};t.provide(o,u);const c=t.ref({...e.backfill}),s=()=>({...c.value,...e.backfill,...i});async function p(){var t,n;const r=await d();r?null==(t=e.toast)||t.call(e,r):null==(n=e.search)||n.call(e,s())}async function d(){return(await Promise.all(n.map((e=>{var t;return null==(t=e.validator)?void 0:t.call(e,c.value)})))).find((e=>e&&"string"==typeof e))}return{child:n,wrapperInstance:u,query:c,getQuery:s,search:p,reset:function(){var t;n.forEach((e=>{e.reset(),e.updateWrapperQuery()})),null==(t=e.reset)||t.call(e,s())},validate:d}}({...e,search:a,reset:u});return t.onMounted((()=>{e.immediateSearch&&n.emit("ready",c.getQuery())})),{...c,rootProps:i,formRef:l,getComponent:Zt,resetAndSearch:function(){c.reset(),c.search()}}}});const tn={};var nn=st(en,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElForm",e._g(e._b({ref:"formRef",attrs:{model:e.query}},"ElForm",e.rootProps,!1),e.$listeners),[e._l(e.datum,(function(t,r){return[n(e.getComponent(t.t),e._b({key:r,tag:"component",attrs:{field:t.as||r,resetToInitialValue:e.resetToInitialValue,backfill:e.backfill,query:e.query}},"component",t,!1))]})),e._t("btn",[e.renderBtn?[n("ElButton",{attrs:{size:e.size},on:{click:e.search}},[e._v(e._s(e.searchText))]),n("ElButton",{attrs:{size:e.size},on:{click:function(t){e.resetTriggerSearch?e.resetAndSearch():e.reset()}}},[e._v(" "+e._s(e.resetText)+" ")])]:e._e()],{search:e.search,reset:e.reset,resetAndSearch:e.resetAndSearch})],2)}),[],!1,(function(e){for(let e in tn)this[e]=tn[e]}),null,null,null);const rn=nn.exports;e.HCascader=Tt,e.HCheckbox=Wt,e.HDatePicker=It,e.HInput=_t,e.HRadio=Qt,e.HSelect=ft,e.HWrapper=rn,e.cascaderProps=Pt,e.checkboxProps=qt,e.commonProps=rt,e.datepickerProps=xt,e.defineCondition=function(e){return t.reactive(e)},e.elCheckboxProps=Dt,e.elDatepickerProps=kt,e.elInputInsetField=mt,e.formItemPropKeys=it,e.formItemProps=ot,e.formPropKeys=Ut,e.getComponent=Zt,e.inputProps=vt,e.provideKey=o,e.radioProps=Rt,e.registerComponent=function(e,n){Yt[e]=t.markRaw(n)},e.selectProps=at,e.unregisterComponent=function(e){delete Yt[e]},e.wrapperEmits=Lt,e.wrapperProps=Xt,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=index.umd.min.js.map
