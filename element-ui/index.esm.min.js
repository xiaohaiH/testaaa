import{version as e,onBeforeUnmount as t,ref as n,getCurrentInstance as r,set as o,del as i,provide as a,markRaw as l,computed as u,watch as s,nextTick as c,inject as p,defineComponent as d,toRefs as f,reactive as v,onMounted as y}from"vue-demi";import{FormItem as h,Select as m,OptionGroup as g,Option as b,Input as _,DatePicker as k,Cascader as x,RadioGroup as S,RadioButton as E,Radio as O,Checkbox as F,CheckboxGroup as P,CheckboxButton as C,Form as I,Button as j}from"element-ui";const B="2.7"===e.slice(0,3),$="condition-wrapper";const w={realtime:{type:Boolean,default:void 0},searchAtDatumChanged:{type:Boolean,default:void 0},backfill:{type:Object},toast:{type:Function,default:void 0}};function A(e,t){return Array.isArray(e)?e.filter(Boolean).length?e:t:"number"==typeof e?e:e||t}function T(e,t,n="children"){var r;for(const o of e){if(t(o))return[o];if(null!=(r=o[n])&&r.length){const e=T(o[n],t);if(e.length)return e.unshift(o),e}}return[]}function K(e,...t){return"function"==typeof e?e(...t):"string"==typeof e?e:l(e)}function V(e){const t=n();return u({set(e){t.value=e},get:()=>void 0===t.value?void 0!==e.defaultValue?"function"==typeof e.defaultValue?e.defaultValue(e.query,e.backfill):e.defaultValue:void 0:t.value})}function N(e,r){const o=n("boolean"==typeof e.disabled&&e.disabled),i=n("boolean"==typeof e.hide&&e.hide),a=()=>({query:e.query,backfill:e.backfill,option:r}),l=()=>{if("function"==typeof e.hide){i.value!==e.hide(a())&&(i.value=e.hide(a()))}else if("function"==typeof e.disabled){o.value!==e.disabled(a())&&(o.value=e.disabled(a()))}};let u=[s((()=>e.query),l,{immediate:!0,deep:!0}),s((()=>[e.disabled,e.hide]),((e,t)=>{e[0]!==t[0]&&(o.value="boolean"==typeof e[0]&&e[0],e[0]),e[1]!==t[1]&&(i.value="boolean"==typeof e[1]&&e[1],e[1]),l()}))];return t((()=>(u.forEach((e=>e())),u=[]))),{insetDisabled:o,insetHide:i}}function Q(e=!0){const t=n(e);return{flag:t,updateFlag:()=>{t.value=!e,c((()=>{t.value=e}))}}}function R(e){return(null==e?void 0:e.toString())??""}function D(e){var r;const o=p($),i=V(e),a=e.backfill&&(null!=(r=e.fields)&&r.length?e.fields.map((t=>e.backfill[t])).filter(Boolean):e.backfill[e.field]),l=n(a||(void 0!==e.defaultValue?i.value:e.multiple?[]:"").slice()),c=n([]),d=u((()=>c.value.length?c.value:e.options)),f=()=>e.customGetQuery?e.customGetQuery(l.value,A,e):e.multiple&&e.fields?e.fields.reduce(((t,n,r)=>{var o;return t[n]=A(null==(o=l.value)?void 0:o[r],e.emptyValue),t}),{}):{[e.field]:A(l.value,e.emptyValue)},{flag:v,updateFlag:y}=Q(),{flag:h,updateFlag:m}=Q(),g={reset(){var t;const{multiple:n}=e;y(),m(),l.value=e.resetToInitialValue&&(null==(t=i.value)?void 0:t.slice())||(n?[]:"")},updateWrapperQuery(){y(),o&&Object.entries(f()).forEach((([e,t])=>o.updateQueryValue(e,t)))},get validator(){return e.validator},getQuery:f};null==o||o.register(g);const{insetDisabled:b,insetHide:_}=N(e,g);!a&&e.defaultValue&&g.updateWrapperQuery();const k=[];function x(t){var n;null==(n=e.getOptions)||n.call(e,(e=>{const t=l.value;l.value=void 0,c.value=e||[],l.value=t}),e.query||{},{trigger:t,change:(e,t)=>{t&&(i.value=e),E(e)},search:(e,t)=>{t&&(i.value=e),S(e),null==o||o.search()}})}function S(e){e!==l.value&&(l.value=e,g.updateWrapperQuery())}function E(e){S(e),null==o||o.insetSearch()}return t((()=>k.forEach((e=>e())))),k.push(s((()=>e.field),((e,t)=>{e!==t&&(null==o||o.removeUnreferencedField(t)),g.updateWrapperQuery()}))),k.push(s((()=>[e.fields||e.field,e.fields?e.fields.map((t=>e.query[t])).filter(Boolean):e.query[e.field]]),(([t,n],[r])=>{const o=e.backfillToValue(n,t,e.query);t.toString()!==r.toString()||R(o)===R(l.value)||v.value&&(l.value=o)}))),k.push(s((()=>{var t;return[e.fields||e.field,e.fields?e.fields.map((t=>{var n;return null==(n=e.backfill)?void 0:n[t]})).filter(Boolean):null==(t=e.backfill)?void 0:t[e.field]]}),(([t,n],[r])=>{const o=e.backfillToValue(n,t,e.backfill);t.toString()!==r.toString()||R(o)===R(l.value)||(m(),S(o))}))),k.push(s((()=>[e.depend,e.dependFields,e.dependFields&&[].concat(e.dependFields).map((t=>{var n;return null==(n=e.query)?void 0:n[t]})).join(",")||""]),(([t,n,r],[o,i,a])=>{h.value&&r!==a&&(x("depend"),t===o&&(null==n?void 0:n.toString())===(null==i?void 0:i.toString())&&(void 0===l.value||""===l.value.toString()||S(e.multiple?[]:"")))}))),k.push(s((()=>e.getOptions),x.bind(null,"initial"),{immediate:!0})),{wrapper:o,option:g,checked:l,getQuery:f,insetDisabled:b,insetHide:_,finalOption:d,updateCheckedValue:S,change:E,reset:g.reset}}const q={field:{type:String,required:!0},query:{type:Object,required:!0},backfill:{type:Object},disabled:{type:[Boolean,Function]},hide:{type:[Boolean,Function]},depend:{type:Boolean},dependFields:{type:[String,Array]},resetToInitialValue:{type:[Boolean]},emptyValue:{type:[String,Number,null,void 0]},validator:{type:[Function]},customGetQuery:{type:Function},defaultValue:{type:[String,Array,Function]}},G={...q,fields:{type:[Array]},backfillToValue:{type:Function,default:e=>e},multiple:{type:Boolean,default:void 0},options:{type:Array,default:()=>[]},getOptions:{type:Function}};function H(e){return(null==e?void 0:e.toString())??""}function z(e){var r;const o=p($),i=V(e),a=n([]),l=n([]),c=u((()=>l.value.length?l.value:e.options)),d=()=>{var t;return k.value||i.value?e.customGetQuery?e.customGetQuery(a.value,A,e):null!=(t=e.fields)&&t.length?e.fields.reduce(((t,n,r)=>Object.assign(t,{[n]:A(a.value[r],e.emptyValue)})),{}):{[e.field]:A(e.emitPath?[...a.value]:a.value.slice(-1)[0],e.emptyValue)}:{}},{flag:f,updateFlag:v}=Q(),{flag:y,updateFlag:h}=Q(),m={reset(){var t;return v(),h(),a.value=e.resetToInitialValue&&(null==(t=i.value)?void 0:t.slice())||[],this},get validator(){return e.validator},updateWrapperQuery(){v(),o&&Object.entries(d()).forEach((([e,t])=>o.updateQueryValue(e,t)))},getQuery:d};null==o||o.register(m);const{insetDisabled:g,insetHide:b}=N(e,m),_=[];t((()=>_.forEach((e=>e()))));const k=n("function"!=typeof e.getOptions||!(null==(r=e.fields)||!r.length));function x(t){var n;null==(n=e.getOptions)||n.call(e,(e=>{l.value=e||[],k.value=!0}),e.query||{},{trigger:t,change:(e,t)=>{t&&(i.value=e),E(e)},search:(e,t)=>{t&&(i.value=e),S(e),null==o||o.search()}})}function S(e){const t=Array.isArray(e)?e:O(e);t.join("")!==a.value.join("")&&(a.value=t,m.updateWrapperQuery())}function E(e){S(e||[]),null==o||o.insetSearch()}function O(t){if(!t&&0!==t)return[];const{valueKey:n,childrenKey:r}=e;return T(c.value,(e=>e[n]===t)).map((e=>e[n]),r).filter(Boolean)}return s(k,(t=>t&&function(){var t;const{backfill:n,field:r,fields:o}=e;if(n)if(o){const e=o.reduce(((e,t)=>(n[t]&&e.push(n[t]),e)),[]);if(e.length)return a.value=e,void m.updateWrapperQuery()}else if(n[r])return a.value=O(n[r]),void m.updateWrapperQuery();null!=(t=i.value)&&t.length&&(a.value="string"==typeof i.value?O(i.value):i.value.slice(),"string"==typeof i.value&&(i.value=a.value.slice()),m.updateWrapperQuery())}()),{immediate:!0}),_.push(s((()=>e.fields||[e.field]),((e,t)=>{e.toString()!==t.toString()&&o&&t.forEach((t=>e.includes(t)||o.removeUnreferencedField(t))),m.updateWrapperQuery()}))),_.push(s((()=>{var t,n;return[(null==(t=e.fields)?void 0:t.toString())||e.field,(null==(n=e.fields)?void 0:n.map((t=>e.query[t])).filter(Boolean))||e.query[e.field]]}),(([e,t],[n,r])=>{e!==n||H(t)===H(r)||f.value&&(a.value="string"==typeof t?O(t):t)}))),_.push(s((()=>{var t,n;return null!=(t=e.fields)&&t.length?e.fields.reduce(((t,n)=>{var r;return null!=(r=e.backfill)&&r[n]&&t.push(e.backfill[n]),t}),[]):null==(n=e.backfill)?void 0:n[e.field]}),((e,t)=>{if(k.value&&H(e)!==H(t))if(h(),Array.isArray(e))S(e);else{if(!e&&0!==e)return void(a.value.length&&(a.value=[]));S(O(e))}}))),_.push(s((()=>[e.depend,e.dependFields,e.dependFields&&[].concat(e.dependFields).map((t=>{var n;return null==(n=e.query)?void 0:n[t]})).join(",")||""]),(([e,t,n],[r,o,i])=>{y.value&&n!==i&&(x("depend"),e===r&&(null==t?void 0:t.toString())===(null==o?void 0:o.toString())&&a.value.length&&S("string"==typeof a.value?"":[]))}))),_.push(s((()=>e.getOptions),x.bind(null,"initial"),{immediate:!0})),{wrapper:o,option:m,checked:a,getQuery:d,finalOption:c,insetDisabled:g,insetHide:b,change:E,reset:m.reset}}const W={...q,fields:{type:[Array]},valueKey:{type:String,required:!0},childrenKey:{type:String},emitPath:{type:[Boolean],default:!1},options:{type:Array,default:()=>[]},getOptions:{type:Function}};const M="object"==typeof global&&global&&global.Object===Object&&global;var U="object"==typeof self&&self&&self.Object===Object&&self;const X=M||U||Function("return this")();const J=X.Symbol;var L=Object.prototype,Y=L.hasOwnProperty,Z=L.toString,ee=J?J.toStringTag:void 0;var te=Object.prototype.toString;var ne="[object Null]",re="[object Undefined]",oe=J?J.toStringTag:void 0;function ie(e){return null==e?void 0===e?re:ne:oe&&oe in Object(e)?function(e){var t=Y.call(e,ee),n=e[ee];try{e[ee]=void 0;var r=!0}catch{}var o=Z.call(e);return r&&(t?e[ee]=n:delete e[ee]),o}(e):function(e){return te.call(e)}(e)}function ae(e){return null!=e&&"object"==typeof e}var le="[object Symbol]";function ue(e){return"symbol"==typeof e||ae(e)&&ie(e)==le}const se=Array.isArray;var ce=1/0,pe=J?J.prototype:void 0,de=pe?pe.toString:void 0;function fe(e){if("string"==typeof e)return e;if(se(e))return function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}(e,fe)+"";if(ue(e))return de?de.call(e):"";var t=e+"";return"0"==t&&1/e==-ce?"-0":t}function ve(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var ye="[object AsyncFunction]",he="[object Function]",me="[object GeneratorFunction]",ge="[object Proxy]";const be=X["__core-js_shared__"];var _e,ke=(_e=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||""))?"Symbol(src)_1."+_e:"";var xe=Function.prototype.toString;var Se=/^\[object .+?Constructor\]$/,Ee=Function.prototype,Oe=Object.prototype,Fe=Ee.toString,Pe=Oe.hasOwnProperty,Ce=RegExp("^"+Fe.call(Pe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ie(e){if(!ve(e)||function(e){return!!ke&&ke in e}(e))return!1;var t=function(e){if(!ve(e))return!1;var t=ie(e);return t==he||t==me||t==ye||t==ge}(e)?Ce:Se;return t.test(function(e){if(null!=e){try{return xe.call(e)}catch{}try{return e+""}catch{}}return""}(e))}function je(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ie(n)?n:void 0}var Be=Date.now;function $e(e){return function(){return e}}var we=function(){try{var e=je(Object,"defineProperty");return e({},"",{}),e}catch{}}();const Ae=we;var Te=Ae?function(e,t){return Ae(e,"toString",{configurable:!0,enumerable:!1,value:$e(t),writable:!0})}:function(e){return e};var Ke=function(e){var t=0,n=0;return function(){var r=Be(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Te);const Ve=Ke;var Ne=9007199254740991,Qe=/^(?:0|[1-9]\d*)$/;function Re(e,t){var n=typeof e;return!!(t=t??Ne)&&("number"==n||"symbol"!=n&&Qe.test(e))&&e>-1&&e%1==0&&e<t}function De(e,t){return e===t||e!=e&&t!=t}var qe=Object.prototype.hasOwnProperty;function Ge(e,t,n){var r=e[t];(!qe.call(e,t)||!De(r,n)||void 0===n&&!(t in e))&&function(e,t,n){"__proto__"==t&&Ae?Ae(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}(e,t,n)}var He=Math.max;var ze=9007199254740991;function We(e){return ae(e)&&"[object Arguments]"==ie(e)}var Me=Object.prototype,Ue=Me.hasOwnProperty,Xe=Me.propertyIsEnumerable,Je=We(function(){return arguments}())?We:function(e){return ae(e)&&Ue.call(e,"callee")&&!Xe.call(e,"callee")};const Le=Je;var Ye=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ze=/^\w*$/;const et=je(Object,"create");var tt=Object.prototype.hasOwnProperty;var nt=Object.prototype.hasOwnProperty;function rt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ot(e,t){for(var n=e.length;n--;)if(De(e[n][0],t))return n;return-1}rt.prototype.clear=function(){this.__data__=et?et(null):{},this.size=0},rt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},rt.prototype.get=function(e){var t=this.__data__;if(et){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return tt.call(t,e)?t[e]:void 0},rt.prototype.has=function(e){var t=this.__data__;return et?void 0!==t[e]:nt.call(t,e)},rt.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=et&&void 0===t?"__lodash_hash_undefined__":t,this};var it=Array.prototype.splice;function at(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}at.prototype.clear=function(){this.__data__=[],this.size=0},at.prototype.delete=function(e){var t=this.__data__,n=ot(t,e);return!(n<0)&&(n==t.length-1?t.pop():it.call(t,n,1),--this.size,!0)},at.prototype.get=function(e){var t=this.__data__,n=ot(t,e);return n<0?void 0:t[n][1]},at.prototype.has=function(e){return ot(this.__data__,e)>-1},at.prototype.set=function(e,t){var n=this.__data__,r=ot(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const lt=je(X,"Map");function ut(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function st(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}st.prototype.clear=function(){this.size=0,this.__data__={hash:new rt,map:new(lt||at),string:new rt}},st.prototype.delete=function(e){var t=ut(this,e).delete(e);return this.size-=t?1:0,t},st.prototype.get=function(e){return ut(this,e).get(e)},st.prototype.has=function(e){return ut(this,e).has(e)},st.prototype.set=function(e,t){var n=ut(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var ct="Expected a function";function pt(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(ct);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(pt.Cache||st),n}pt.Cache=st;var dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ft=/\\(\\)?/g,vt=function(e){var t=pt(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(dt,(function(e,n,r,o){t.push(r?o.replace(ft,"$1"):n||e)})),t}));const yt=vt;function ht(e,t){return se(e)?e:function(e,t){if(se(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ue(e))||Ze.test(e)||!Ye.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:yt(function(e){return null==e?"":fe(e)}(e))}var mt=1/0;function gt(e){if("string"==typeof e||ue(e))return e;var t=e+"";return"0"==t&&1/e==-mt?"-0":t}function bt(e,t){for(var n=0,r=(t=ht(t,e)).length;null!=e&&n<r;)e=e[gt(t[n++])];return n&&n==r?e:void 0}function _t(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}var kt=J?J.isConcatSpreadable:void 0;function xt(e){return se(e)||Le(e)||!!(kt&&e&&e[kt])}function St(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=xt),o||(o=[]);++i<a;){var l=e[i];t>0&&n(l)?t>1?St(l,t-1,n,r,o):_t(o,l):r||(o[o.length]=l)}return o}function Et(e){return(null==e?0:e.length)?St(e,1):[]}function Ot(e,t){return null!=e&&t in Object(e)}function Ft(e,t,n){for(var r=-1,o=(t=ht(t,e)).length,i=!1;++r<o;){var a=gt(t[r]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=ze}(o)&&Re(a,o)&&(se(e)||Le(e))}function Pt(e,t,n,r){if(!ve(e))return e;for(var o=-1,i=(t=ht(t,e)).length,a=i-1,l=e;null!=l&&++o<i;){var u=gt(t[o]),s=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=a){var c=l[u];void 0===(s=r?r(c,u,l):void 0)&&(s=ve(c)?c:Re(t[o+1])?[]:{})}Ge(l,u,s),l=l[u]}return e}function Ct(e,t){return function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],l=bt(e,a);n(l,a)&&Pt(i,ht(a,e),l)}return i}(e,t,(function(t,n){return function(e,t){return null!=e&&Ft(e,t,Ot)}(e,n)}))}var It=function(e){return Ve(function(e,t,n){return t=He(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=He(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=r[o];return l[t]=n(a),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,l)}}(e,void 0,Et),e+"")}((function(e,t){return null==e?{}:Ct(e,t)}));const jt=It,Bt={postfix:{type:[String,Object,Function]},as:{type:String}},$t={...h.props,prop:{type:[String,Array]}},wt=Object.keys($t),At={...m.props};delete At.value;const Tt={...At,...G,...Bt,...$t,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},filterMethod:{type:Function}},Kt=Object.keys(m.props),Vt=d({inheritAttrs:!1,name:"HSelect",components:{ElFormItem:h,ElSelect:m,ElOptionGroup:g,ElOption:b},props:Tt,setup(e,t){const r=D(e),o=u((()=>jt(e,wt))),i=u((()=>jt(e,Kt))),a=n(""),l=u((()=>{const t=a.value;return t?r.finalOption.value.filter(e.filterMethod.bind(null,t)):r.finalOption.value}));return{...r,formItemProps:o,selectProps:i,getNode:K,filterValue:a,customFilterMethod:e=>{a.value=e},filterSource:l}}});var Nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--select condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElSelect",e._g(e._b({staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,"filter-method":e.filterMethod&&e.customFilterMethod,value:e.checked},on:{input:e.change,blur:function(t){return e.customFilterMethod("")},change:function(t){return e.customFilterMethod("")}}},"ElSelect",e.selectProps,!1),e.$listeners),[e._l(e.filterSource,(function(t){return[t.group&&t.children?[n("ElOptionGroup",{key:t[e.valueKey],attrs:{label:t[e.labelKey]}},[e._l(t.children,(function(t){return[n("ElOption",{key:t[e.valueKey],attrs:{label:t[e.labelKey],value:t[e.valueKey]}})]}))],2)]:[n("ElOption",{key:t[e.valueKey],attrs:{label:t[e.labelKey],value:t[e.valueKey]}})]]}))],2),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)};function Qt(e,t,n,r,o,i,a,l){var u,s="function"==typeof e?e.options:e;if(t&&(s.render=t,s.staticRenderFns=n,s._compiled=!0),r&&(s.functional=!0),i&&(s._scopeId="data-v-"+i),a?(u=function(e){!(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)&&typeof __VUE_SSR_CONTEXT__<"u"&&(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},s._ssrRegister=u):o&&(u=l?function(){o.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:o),u)if(s.functional){s._injectStyles=u;var c=s.render;s.render=function(e,t){return u.call(t),c(e,t)}}else{var p=s.beforeCreate;s.beforeCreate=p?[].concat(p,u):[u]}return{exports:e,options:s}}const Rt={};var Dt=Qt(Vt,Nt,[],!1,qt,"05cee438",null,null);function qt(e){for(let e in Rt)this[e]=Rt[e]}const Gt=function(){return Dt.exports}(),Ht={maxlength:{type:[String,Number,Boolean]},minlength:{type:[String,Number,Boolean]},placeholder:{type:[String,Number,Boolean]},rows:{type:[String,Number,Boolean]},name:{type:[String,Number,Boolean]},max:{type:[String,Number,Boolean]},min:{type:[String,Number,Boolean]},step:{type:[String,Number,Boolean]},autofocus:{type:[String,Number,Boolean]}},zt={..._.props,...G,...Bt,...$t,...Ht,realtime:{type:Boolean,default:!0},waitTime:{type:Number,default:300},clearable:{type:Boolean,default:!0}},Wt=Object.keys(_.props).concat(Object.keys(Ht)),Mt=d({inheritAttrs:!1,name:"HInput",components:{ElFormItem:h,ElInput:_},props:zt,setup(e,t){const n=D(e),r=u((()=>jt(e,wt))),o=u((()=>jt(e,Wt)));let i=0;return{...n,formItemProps:r,inputProps:o,debounceChange:function(t){const{realtime:r,waitTime:o}=e;if(i&&clearTimeout(i),r)n.change(t);else{if(n.updateCheckedValue(t),!n.wrapper)return;i=setTimeout(n.wrapper.insetSearch,o)}},enterHandle:function(e){var t;i&&clearTimeout(i),n.checked.value=e.target.value,n.option.updateWrapperQuery(),null==(t=n.wrapper)||t.search()},getNode:K}}});var Ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--input condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElInput",e._g(e._b({staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,value:e.checked},on:{input:e.debounceChange},nativeOn:{keydown:function(t){return"keyCode"in t&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterHandle(t)}}},"ElInput",e.inputProps,!1),e.$listeners)),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)};const Xt={};var Jt=Qt(Mt,Ut,[],!1,Lt,"06bedfc6",null,null);function Lt(e){for(let e in Xt)this[e]=Xt[e]}const Yt=function(){return Jt.exports}();const Zt=function e(t){var n;const r={...t.props};return null==(n=t.mixins)||n.forEach((t=>Object.assign(r,e(t)))),r}(k),en={...Zt,...G,...Bt,...$t,valueFormat:{type:String,default:"yyyy-MM-dd"},beginField:{type:String},endField:{type:String}},tn=/range$/;const nn=Object.keys(Zt),rn=d({inheritAttrs:!1,name:"HDatepicker",components:{ElFormItem:h,ElDatePicker:k},props:en,setup(e,t){const{multiple:n,fields:r,...o}=f(e),i=u((()=>void 0!==e.multiple?e.multiple:function(e){return!!e&&tn.test(e)}(e.type))),a=u((()=>e.fields||(i.value&&e.beginField&&e.endField?[e.beginField,e.endField]:void 0)));return{...D(v({...o,multiple:i,fields:a})),formItemProps:u((()=>jt(e,wt))),datepickerProps:u((()=>jt(e,nn))),isMultiple:i,getNode:K}}});var on=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--datepicker ${e.isMultiple&&"condition-item--datepicker-range"} condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElDatePicker",e._g(e._b({staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,value:e.checked},on:{input:e.change}},"ElDatePicker",e.datepickerProps,!1),e.$listeners)),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)};const an={};var ln=Qt(rn,on,[],!1,un,"6eeeab5a",null,null);function un(e){for(let e in an)this[e]=an[e]}const sn=function(){return ln.exports}(),cn={...x.props,...W,...Bt,...$t,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0}},pn=Object.keys(x.props),dn=d({inheritAttrs:!1,name:"HCascader",components:{ElFormItem:h,ElCascader:x},props:cn,setup:(e,t)=>({...z(e),formItemProps:u((()=>jt(e,wt))),cascaderProps:u((()=>jt(e,pn))),getNode:K})});var fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--cascader condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElCascader",e._g(e._b({staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,options:e.finalOption,value:e.checked},on:{change:e.change}},"ElCascader",e.cascaderProps,!1),e.$listeners)),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)};const vn={};var yn=Qt(dn,fn,[],!1,hn,"cdb858b6",null,null);function hn(e){for(let e in vn)this[e]=vn[e]}const mn=function(){return yn.exports}(),gn={...S.props,...G,...Bt,...$t,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},type:{type:String},cancelable:{type:Boolean,default:void 0}},bn=Object.keys(S.props),_n=d({inheritAttrs:!1,name:"HRadio",components:{ElFormItem:h,ElRadioGroup:S,ElRadioButton:E,ElRadio:O},props:gn,setup(e,t){const r=D(e),o=u((()=>jt(e,wt))),i=u((()=>jt(e,bn))),a=n(),l=u((()=>"button"===e.type?"ElRadioButton":"ElRadio")),s=u((()=>e.cancelable?"click":null));return{...r,formItemProps:o,radioProps:i,radioGroupRef:a,radioType:l,eventName:s,customChange:function(e,t,n){var r;n(e===t?"":e),null==(r=a.value)||r.$children.forEach((e=>e.$el.blur()))},getNode:K}}});var kn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--radio condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElRadioGroup",e._g(e._b({ref:"radioGroupRef",staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,value:e.checked},on:{input:e.change}},"ElRadioGroup",e.radioProps,!1),e.$listeners),[e._l(e.finalOption,(function(t){return[n(e.radioType,{key:t[e.valueKey],tag:"component",attrs:{label:t[e.valueKey]},nativeOn:e._d({},[e.eventName,function(n){return n.preventDefault(),e.customChange(t[e.valueKey],e.checked,e.change)}])},[e._v(" "+e._s(t[e.labelKey])+" ")])]}))],2),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)};const xn={};var Sn=Qt(_n,kn,[],!1,En,"4ebde3f4",null,null);function En(e){for(let e in xn)this[e]=xn[e]}const On=function(){return Sn.exports}(),Fn={...F.props};delete Fn.checked;const Pn={...Fn,...G,...Bt,...$t,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},type:{type:String},multiple:{type:Boolean,default:!0}},Cn=Object.keys(Fn),In=d({inheritAttrs:!1,name:"HCheckbox",components:{ElFormItem:h,ElCheckboxGroup:P,ElCheckboxButton:C,ElCheckbox:F},props:Pn,setup(e,t){const r=n(),o=u((()=>"button"===e.type?"ElCheckboxButton":"ElCheckbox"));return{...D(e),formItemProps:u((()=>jt(e,wt))),checkboxProps:u((()=>jt(e,Cn))),checkboxGroupRef:r,checkboxType:o,getNode:K}}});var jn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--checkbox condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElCheckboxGroup",e._g(e._b({ref:"checkboxGroupRef",staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,value:e.checked},on:{input:e.change}},"ElCheckboxGroup",e.checkboxProps,!1),e.$listeners),[e._l(e.finalOption,(function(t){return[n(e.checkboxType,{key:t[e.valueKey],tag:"component",attrs:{label:t[e.valueKey]}},[e._v(" "+e._s(t[e.labelKey])+" ")])]}))],2),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)};const Bn={};var $n=Qt(In,jn,[],!1,wn,"16a423d1",null,null);function wn(e){for(let e in Bn)this[e]=Bn[e]}const An=function(){return $n.exports}(),Tn=Object.keys(I.props),Kn={...I.props,...w,datum:{type:Object,default:()=>({})},resetToInitialValue:{type:Boolean},immediateSearch:{type:Boolean},renderBtn:{type:Boolean,default:!0},resetTriggerSearch:{type:Boolean},searchText:{type:String,default:"搜索"},resetText:{type:String,default:"重置"}},Vn={search:e=>!0,ready:e=>!0,reset:e=>!0},Nn={select:l(Gt),input:l(Yt),datepicker:l(sn),cascader:l(mn),radio:l(On),checkbox:l(An)},Qn={};function Rn(e,t){Qn[e]=l(t)}function Dn(e){delete Qn[e]}function qn(e){return e?Qn[e]||Nn[e]:{...Nn,...Qn}}const Gn=d({name:"HWrapper",inheritAttrs:!1,components:{ElForm:I,ElButton:j},props:Kn,emits:Vn,setup(e,l){const s=u((()=>jt(e,Tn))),c=n(),p=l.emit.bind(l,"search"),d=l.emit.bind(l,"reset"),f=function(e){const l=[];t((()=>l.splice(0)));const u={};let s=!1,c=[];const p={realtime:n(e.realtime),register(n){l.push(n);const o=()=>{s=!0,n.reset(),n.updateWrapperQuery();const t=l.indexOf(n);-1!==t&&l.splice(t,1),e.searchAtDatumChanged&&v(),s=!1,c.forEach((e=>{i(d.value,e),delete u[e]})),c=[]},a=r();return a&&t(o,B?a.proxy:a),o},updateQueryValue(e,t){s&&c.push(e),o(d.value,e,t),u[e]=t},insetSearch(){e.realtime&&v()},search:v,removeUnreferencedField(e){let t=0;l.some((n=>(n.getQuery().hasOwnProperty(e)&&(t+=1),t))),t||(i(d.value,e),delete u[e])}};a($,p);const d=n({...e.backfill}),f=()=>({...d.value,...e.backfill,...u});async function v(){var t,n;const r=await y();r?null==(t=e.toast)||t.call(e,r):null==(n=e.search)||n.call(e,f())}async function y(){return(await Promise.all(l.map((e=>{var t;return null==(t=e.validator)?void 0:t.call(e,d.value)})))).find((e=>e&&"string"==typeof e))}return{child:l,wrapperInstance:p,query:d,getQuery:f,search:v,reset:function(){var t;l.forEach((e=>{e.reset(),e.updateWrapperQuery()})),null==(t=e.reset)||t.call(e,f())},validate:y}}({...e,search:p,reset:d});return y((()=>{e.immediateSearch&&l.emit("ready",f.getQuery())})),{...f,rootProps:s,formRef:c,getComponent:qn,resetAndSearch:function(){f.reset(),f.search()}}}});var Hn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElForm",e._g(e._b({ref:"formRef",attrs:{model:e.query}},"ElForm",e.rootProps,!1),e.$listeners),[e._l(e.datum,(function(t,r){return[n(e.getComponent(t.t),e._b({key:r,tag:"component",attrs:{field:t.as||r,resetToInitialValue:e.resetToInitialValue,backfill:e.backfill,query:e.query}},"component",t,!1))]})),e._t("btn",[e.renderBtn?[n("ElButton",{attrs:{size:e.size},on:{click:e.search}},[e._v(e._s(e.searchText))]),n("ElButton",{attrs:{size:e.size},on:{click:function(t){e.resetTriggerSearch?e.resetAndSearch():e.reset()}}},[e._v(" "+e._s(e.resetText)+" ")])]:e._e()],{search:e.search,reset:e.reset,resetAndSearch:e.resetAndSearch})],2)};const zn={};var Wn=Qt(Gn,Hn,[],!1,Mn,null,null,null);function Mn(e){for(let e in zn)this[e]=zn[e]}const Un=function(){return Wn.exports}();function Xn(e){return v(e)}export{mn as HCascader,An as HCheckbox,sn as HDatePicker,Yt as HInput,On as HRadio,Gt as HSelect,Un as HWrapper,cn as cascaderProps,Pn as checkboxProps,Bt as commonProps,en as datepickerProps,Xn as defineCondition,Fn as elCheckboxProps,Zt as elDatepickerProps,Ht as elInputInsetField,wt as formItemPropKeys,$t as formItemProps,Tn as formPropKeys,qn as getComponent,zt as inputProps,$ as provideKey,gn as radioProps,Rn as registerComponent,Tt as selectProps,Dn as unregisterComponent,Vn as wrapperEmits,Kn as wrapperProps};
//# sourceMappingURL=index.esm.min.js.map
