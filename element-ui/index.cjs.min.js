"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue-demi"),t=require("element-ui"),n="2.7"===e.version.slice(0,3),r="condition-wrapper";const o={realtime:{type:Boolean,default:void 0},searchAtDatumChanged:{type:Boolean,default:void 0},backfill:{type:Object},toast:{type:Function,default:void 0}};function i(e,t){return Array.isArray(e)?e.filter(Boolean).length?e:t:"number"==typeof e?e:e||t}function l(e,t,n="children"){var r;for(const o of e){if(t(o))return[o];if(null!=(r=o[n])&&r.length){const e=l(o[n],t);if(e.length)return e.unshift(o),e}}return[]}function a(t,...n){return"function"==typeof t?t(...n):"string"==typeof t?t:e.markRaw(t)}function u(t){const n=e.ref();return e.computed({set(e){n.value=e},get:()=>void 0===n.value?void 0!==t.defaultValue?"function"==typeof t.defaultValue?t.defaultValue(t.query,t.backfill):t.defaultValue:void 0:n.value})}function c(t,n){const r=e.ref("boolean"==typeof t.disabled&&t.disabled),o=e.ref("boolean"==typeof t.hide&&t.hide),i=()=>({query:t.query,backfill:t.backfill,option:n}),l=()=>{if("function"==typeof t.hide){o.value!==t.hide(i())&&(o.value=t.hide(i()))}else if("function"==typeof t.disabled){r.value!==t.disabled(i())&&(r.value=t.disabled(i()))}};let a=[e.watch((()=>t.query),l,{immediate:!0,deep:!0}),e.watch((()=>[t.disabled,t.hide]),((e,t)=>{e[0]!==t[0]&&(r.value="boolean"==typeof e[0]&&e[0],e[0]),e[1]!==t[1]&&(o.value="boolean"==typeof e[1]&&e[1],e[1]),l()}))];return e.onBeforeUnmount((()=>(a.forEach((e=>e())),a=[]))),{insetDisabled:r,insetHide:o}}function s(t=!0){const n=e.ref(t);return{flag:n,updateFlag:()=>{n.value=!t,e.nextTick((()=>{n.value=t}))}}}function p(e){return(null==e?void 0:e.toString())??""}function d(t){var n;const o=e.inject(r),l=u(t),a=t.backfill&&(null!=(n=t.fields)&&n.length?t.fields.map((e=>t.backfill[e])).filter(Boolean):t.backfill[t.field]),d=e.ref(a||(void 0!==t.defaultValue?l.value:t.multiple?[]:"").slice()),f=e.ref([]),m=e.computed((()=>f.value.length?f.value:t.options)),v=()=>t.customGetQuery?t.customGetQuery(d.value,i,t):t.multiple&&t.fields?t.fields.reduce(((e,n,r)=>{var o;return e[n]=i(null==(o=d.value)?void 0:o[r],t.emptyValue),e}),{}):{[t.field]:i(d.value,t.emptyValue)},{flag:y,updateFlag:h}=s(),{flag:g,updateFlag:b}=s(),_={reset(){var e;const{multiple:n}=t;h(),b(),d.value=t.resetToInitialValue&&(null==(e=l.value)?void 0:e.slice())||(n?[]:"")},updateWrapperQuery(){h(),o&&Object.entries(v()).forEach((([e,t])=>o.updateQueryValue(e,t)))},get validator(){return t.validator},getQuery:v};null==o||o.register(_);const{insetDisabled:k,insetHide:x}=c(t,_);!a&&t.defaultValue&&_.updateWrapperQuery();const S=[];function E(e){var n;null==(n=t.getOptions)||n.call(t,(e=>{const t=d.value;d.value=void 0,f.value=e||[],d.value=t}),t.query||{},{trigger:e,change:(e,t)=>{t&&(l.value=e),C(e)},search:(e,t)=>{t&&(l.value=e),F(e),null==o||o.search()}})}function F(e){e!==d.value&&(d.value=e,_.updateWrapperQuery())}function C(e){F(e),null==o||o.insetSearch()}return e.onBeforeUnmount((()=>S.forEach((e=>e())))),S.push(e.watch((()=>t.field),((e,t)=>{e!==t&&(null==o||o.removeUnreferencedField(t)),_.updateWrapperQuery()}))),S.push(e.watch((()=>[t.fields||t.field,t.fields?t.fields.map((e=>t.query[e])).filter(Boolean):t.query[t.field]]),(([e,n],[r])=>{const o=t.backfillToValue(n,e,t.query);e.toString()!==r.toString()||p(o)===p(d.value)||y.value&&(d.value=o)}))),S.push(e.watch((()=>{var e;return[t.fields||t.field,t.fields?t.fields.map((e=>{var n;return null==(n=t.backfill)?void 0:n[e]})).filter(Boolean):null==(e=t.backfill)?void 0:e[t.field]]}),(([e,n],[r])=>{const o=t.backfillToValue(n,e,t.backfill);e.toString()!==r.toString()||p(o)===p(d.value)||(b(),F(o))}))),S.push(e.watch((()=>[t.depend,t.dependFields,t.dependFields&&[].concat(t.dependFields).map((e=>{var n;return null==(n=t.query)?void 0:n[e]})).join(",")||""]),(([e,n,r],[o,i,l])=>{g.value&&r!==l&&(E("depend"),e===o&&(null==n?void 0:n.toString())===(null==i?void 0:i.toString())&&(void 0===d.value||""===d.value.toString()||F(t.multiple?[]:"")))}))),S.push(e.watch((()=>t.getOptions),E.bind(null,"initial"),{immediate:!0})),{wrapper:o,option:_,checked:d,getQuery:v,insetDisabled:k,insetHide:x,finalOption:m,updateCheckedValue:F,change:C,reset:_.reset}}const f={field:{type:String,required:!0},query:{type:Object,required:!0},backfill:{type:Object},disabled:{type:[Boolean,Function]},hide:{type:[Boolean,Function]},depend:{type:Boolean},dependFields:{type:[String,Array]},resetToInitialValue:{type:[Boolean]},emptyValue:{type:[String,Number,null,void 0]},validator:{type:[Function]},customGetQuery:{type:Function},defaultValue:{type:[String,Array,Function]}},m={...f,fields:{type:[Array]},backfillToValue:{type:Function,default:e=>e},multiple:{type:Boolean,default:void 0},options:{type:Array,default:()=>[]},getOptions:{type:Function}};function v(e){return(null==e?void 0:e.toString())??""}function y(t){var n;const o=e.inject(r),a=u(t),p=e.ref([]),d=e.ref([]),f=e.computed((()=>d.value.length?d.value:t.options)),m=()=>{var e;return E.value||a.value?t.customGetQuery?t.customGetQuery(p.value,i,t):null!=(e=t.fields)&&e.length?t.fields.reduce(((e,n,r)=>Object.assign(e,{[n]:i(p.value[r],t.emptyValue)})),{}):{[t.field]:i(t.emitPath?[...p.value]:p.value.slice(-1)[0],t.emptyValue)}:{}},{flag:y,updateFlag:h}=s(),{flag:g,updateFlag:b}=s(),_={reset(){var e;return h(),b(),p.value=t.resetToInitialValue&&(null==(e=a.value)?void 0:e.slice())||[],this},get validator(){return t.validator},updateWrapperQuery(){h(),o&&Object.entries(m()).forEach((([e,t])=>o.updateQueryValue(e,t)))},getQuery:m};null==o||o.register(_);const{insetDisabled:k,insetHide:x}=c(t,_),S=[];e.onBeforeUnmount((()=>S.forEach((e=>e()))));const E=e.ref("function"!=typeof t.getOptions||!(null==(n=t.fields)||!n.length));function F(e){var n;null==(n=t.getOptions)||n.call(t,(e=>{d.value=e||[],E.value=!0}),t.query||{},{trigger:e,change:(e,t)=>{t&&(a.value=e),O(e)},search:(e,t)=>{t&&(a.value=e),C(e),null==o||o.search()}})}function C(e){const t=Array.isArray(e)?e:I(e);t.join("")!==p.value.join("")&&(p.value=t,_.updateWrapperQuery())}function O(e){C(e||[]),null==o||o.insetSearch()}function I(e){if(!e&&0!==e)return[];const{valueKey:n,childrenKey:r}=t;return l(f.value,(t=>t[n]===e)).map((e=>e[n]),r).filter(Boolean)}return e.watch(E,(e=>e&&function(){var e;const{backfill:n,field:r,fields:o}=t;if(n)if(o){const e=o.reduce(((e,t)=>(n[t]&&e.push(n[t]),e)),[]);if(e.length)return p.value=e,void _.updateWrapperQuery()}else if(n[r])return p.value=I(n[r]),void _.updateWrapperQuery();null!=(e=a.value)&&e.length&&(p.value="string"==typeof a.value?I(a.value):a.value.slice(),"string"==typeof a.value&&(a.value=p.value.slice()),_.updateWrapperQuery())}()),{immediate:!0}),S.push(e.watch((()=>t.fields||[t.field]),((e,t)=>{e.toString()!==t.toString()&&o&&t.forEach((t=>e.includes(t)||o.removeUnreferencedField(t))),_.updateWrapperQuery()}))),S.push(e.watch((()=>{var e,n;return[(null==(e=t.fields)?void 0:e.toString())||t.field,(null==(n=t.fields)?void 0:n.map((e=>t.query[e])).filter(Boolean))||t.query[t.field]]}),(([e,t],[n,r])=>{e!==n||v(t)===v(r)||y.value&&(p.value="string"==typeof t?I(t):t)}))),S.push(e.watch((()=>{var e,n;return null!=(e=t.fields)&&e.length?t.fields.reduce(((e,n)=>{var r;return null!=(r=t.backfill)&&r[n]&&e.push(t.backfill[n]),e}),[]):null==(n=t.backfill)?void 0:n[t.field]}),((e,t)=>{if(E.value&&v(e)!==v(t))if(b(),Array.isArray(e))C(e);else{if(!e&&0!==e)return void(p.value.length&&(p.value=[]));C(I(e))}}))),S.push(e.watch((()=>[t.depend,t.dependFields,t.dependFields&&[].concat(t.dependFields).map((e=>{var n;return null==(n=t.query)?void 0:n[e]})).join(",")||""]),(([e,t,n],[r,o,i])=>{g.value&&n!==i&&(F("depend"),e===r&&(null==t?void 0:t.toString())===(null==o?void 0:o.toString())&&p.value.length&&C("string"==typeof p.value?"":[]))}))),S.push(e.watch((()=>t.getOptions),F.bind(null,"initial"),{immediate:!0})),{wrapper:o,option:_,checked:p,getQuery:m,finalOption:f,insetDisabled:k,insetHide:x,change:O,reset:_.reset}}const h={...f,fields:{type:[Array]},valueKey:{type:String,required:!0},childrenKey:{type:String},emitPath:{type:[Boolean],default:!1},options:{type:Array,default:()=>[]},getOptions:{type:Function}};const g="object"==typeof global&&global&&global.Object===Object&&global;var b="object"==typeof self&&self&&self.Object===Object&&self;const _=g||b||Function("return this")();const k=_.Symbol;var x=Object.prototype,S=x.hasOwnProperty,E=x.toString,F=k?k.toStringTag:void 0;var C=Object.prototype.toString;var O="[object Null]",I="[object Undefined]",P=k?k.toStringTag:void 0;function j(e){return null==e?void 0===e?I:O:P&&P in Object(e)?function(e){var t=S.call(e,F),n=e[F];try{e[F]=void 0;var r=!0}catch{}var o=E.call(e);return r&&(t?e[F]=n:delete e[F]),o}(e):function(e){return C.call(e)}(e)}function w(e){return null!=e&&"object"==typeof e}var B="[object Symbol]";function $(e){return"symbol"==typeof e||w(e)&&j(e)==B}const R=Array.isArray;var A=1/0,T=k?k.prototype:void 0,K=T?T.toString:void 0;function V(e){if("string"==typeof e)return e;if(R(e))return function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}(e,V)+"";if($(e))return K?K.call(e):"";var t=e+"";return"0"==t&&1/e==-A?"-0":t}function N(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Q="[object AsyncFunction]",q="[object Function]",D="[object GeneratorFunction]",G="[object Proxy]";const H=_["__core-js_shared__"];var z,M=(z=/[^.]+$/.exec(H&&H.keys&&H.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"";var W=Function.prototype.toString;var U=/^\[object .+?Constructor\]$/,X=Function.prototype,J=Object.prototype,L=X.toString,Y=J.hasOwnProperty,Z=RegExp("^"+L.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ee(e){if(!N(e)||function(e){return!!M&&M in e}(e))return!1;var t=function(e){if(!N(e))return!1;var t=j(e);return t==q||t==D||t==Q||t==G}(e)?Z:U;return t.test(function(e){if(null!=e){try{return W.call(e)}catch{}try{return e+""}catch{}}return""}(e))}function te(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ee(n)?n:void 0}var ne=Date.now;function re(e){return function(){return e}}var oe=function(){try{var e=te(Object,"defineProperty");return e({},"",{}),e}catch{}}();const ie=oe;var le=ie?function(e,t){return ie(e,"toString",{configurable:!0,enumerable:!1,value:re(t),writable:!0})}:function(e){return e};var ae=function(e){var t=0,n=0;return function(){var r=ne(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(le);const ue=ae;var ce=9007199254740991,se=/^(?:0|[1-9]\d*)$/;function pe(e,t){var n=typeof e;return!!(t=t??ce)&&("number"==n||"symbol"!=n&&se.test(e))&&e>-1&&e%1==0&&e<t}function de(e,t){return e===t||e!=e&&t!=t}var fe=Object.prototype.hasOwnProperty;function me(e,t,n){var r=e[t];(!fe.call(e,t)||!de(r,n)||void 0===n&&!(t in e))&&function(e,t,n){"__proto__"==t&&ie?ie(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}(e,t,n)}var ve=Math.max;var ye=9007199254740991;function he(e){return w(e)&&"[object Arguments]"==j(e)}var ge=Object.prototype,be=ge.hasOwnProperty,_e=ge.propertyIsEnumerable,ke=he(function(){return arguments}())?he:function(e){return w(e)&&be.call(e,"callee")&&!_e.call(e,"callee")};const xe=ke;var Se=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ee=/^\w*$/;const Fe=te(Object,"create");var Ce=Object.prototype.hasOwnProperty;var Oe=Object.prototype.hasOwnProperty;function Ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Pe(e,t){for(var n=e.length;n--;)if(de(e[n][0],t))return n;return-1}Ie.prototype.clear=function(){this.__data__=Fe?Fe(null):{},this.size=0},Ie.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ie.prototype.get=function(e){var t=this.__data__;if(Fe){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Ce.call(t,e)?t[e]:void 0},Ie.prototype.has=function(e){var t=this.__data__;return Fe?void 0!==t[e]:Oe.call(t,e)},Ie.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Fe&&void 0===t?"__lodash_hash_undefined__":t,this};var je=Array.prototype.splice;function we(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}we.prototype.clear=function(){this.__data__=[],this.size=0},we.prototype.delete=function(e){var t=this.__data__,n=Pe(t,e);return!(n<0)&&(n==t.length-1?t.pop():je.call(t,n,1),--this.size,!0)},we.prototype.get=function(e){var t=this.__data__,n=Pe(t,e);return n<0?void 0:t[n][1]},we.prototype.has=function(e){return Pe(this.__data__,e)>-1},we.prototype.set=function(e,t){var n=this.__data__,r=Pe(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};const Be=te(_,"Map");function $e(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Re.prototype.clear=function(){this.size=0,this.__data__={hash:new Ie,map:new(Be||we),string:new Ie}},Re.prototype.delete=function(e){var t=$e(this,e).delete(e);return this.size-=t?1:0,t},Re.prototype.get=function(e){return $e(this,e).get(e)},Re.prototype.has=function(e){return $e(this,e).has(e)},Re.prototype.set=function(e,t){var n=$e(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var Ae="Expected a function";function Te(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Ae);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var l=e.apply(this,r);return n.cache=i.set(o,l)||i,l};return n.cache=new(Te.Cache||Re),n}Te.Cache=Re;var Ke=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ve=/\\(\\)?/g,Ne=function(e){var t=Te(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ke,(function(e,n,r,o){t.push(r?o.replace(Ve,"$1"):n||e)})),t}));const Qe=Ne;function qe(e,t){return R(e)?e:function(e,t){if(R(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!$(e))||Ee.test(e)||!Se.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:Qe(function(e){return null==e?"":V(e)}(e))}var De=1/0;function Ge(e){if("string"==typeof e||$(e))return e;var t=e+"";return"0"==t&&1/e==-De?"-0":t}function He(e,t){for(var n=0,r=(t=qe(t,e)).length;null!=e&&n<r;)e=e[Ge(t[n++])];return n&&n==r?e:void 0}function ze(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}var Me=k?k.isConcatSpreadable:void 0;function We(e){return R(e)||xe(e)||!!(Me&&e&&e[Me])}function Ue(e,t,n,r,o){var i=-1,l=e.length;for(n||(n=We),o||(o=[]);++i<l;){var a=e[i];t>0&&n(a)?t>1?Ue(a,t-1,n,r,o):ze(o,a):r||(o[o.length]=a)}return o}function Xe(e){return(null==e?0:e.length)?Ue(e,1):[]}function Je(e,t){return null!=e&&t in Object(e)}function Le(e,t,n){for(var r=-1,o=(t=qe(t,e)).length,i=!1;++r<o;){var l=Ge(t[r]);if(!(i=null!=e&&n(e,l)))break;e=e[l]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=ye}(o)&&pe(l,o)&&(R(e)||xe(e))}function Ye(e,t,n,r){if(!N(e))return e;for(var o=-1,i=(t=qe(t,e)).length,l=i-1,a=e;null!=a&&++o<i;){var u=Ge(t[o]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=l){var s=a[u];void 0===(c=r?r(s,u,a):void 0)&&(c=N(s)?s:pe(t[o+1])?[]:{})}me(a,u,c),a=a[u]}return e}function Ze(e,t){return function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var l=t[r],a=He(e,l);n(a,l)&&Ye(i,qe(l,e),a)}return i}(e,t,(function(t,n){return function(e,t){return null!=e&&Le(e,t,Je)}(e,n)}))}var et=function(e){return ue(function(e,t,n){return t=ve(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=ve(r.length-t,0),l=Array(i);++o<i;)l[o]=r[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=r[o];return a[t]=n(l),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,a)}}(e,void 0,Xe),e+"")}((function(e,t){return null==e?{}:Ze(e,t)}));const tt=et,nt={postfix:{type:[String,Object,Function]},as:{type:String}},rt={...t.FormItem.props,prop:{type:[String,Array]}},ot=Object.keys(rt),it={...t.Select.props};delete it.value;const lt={...it,...m,...nt,...rt,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},filterMethod:{type:Function}},at=Object.keys(t.Select.props),ut=e.defineComponent({inheritAttrs:!1,name:"HSelect",components:{ElFormItem:t.FormItem,ElSelect:t.Select,ElOptionGroup:t.OptionGroup,ElOption:t.Option},props:lt,setup(t,n){const r=d(t),o=e.computed((()=>tt(t,ot))),i=e.computed((()=>tt(t,at))),l=e.ref(""),u=e.computed((()=>{const e=l.value;return e?r.finalOption.value.filter(t.filterMethod.bind(null,e)):r.finalOption.value}));return{...r,formItemProps:o,selectProps:i,getNode:a,filterValue:l,customFilterMethod:e=>{l.value=e},filterSource:u}}});function ct(e,t,n,r,o,i,l,a){var u,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),l?(u=function(e){!(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)&&typeof __VUE_SSR_CONTEXT__<"u"&&(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},c._ssrRegister=u):o&&(u=a?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),u)if(c.functional){c._injectStyles=u;var s=c.render;c.render=function(e,t){return u.call(t),s(e,t)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,u):[u]}return{exports:e,options:c}}const st={};var pt=ct(ut,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--select condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElSelect",e._g(e._b({staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,"filter-method":e.filterMethod&&e.customFilterMethod,value:e.checked},on:{input:e.change,blur:function(t){return e.customFilterMethod("")},change:function(t){return e.customFilterMethod("")}}},"ElSelect",e.selectProps,!1),e.$listeners),[e._l(e.filterSource,(function(t){return[t.group&&t.children?[n("ElOptionGroup",{key:t[e.valueKey],attrs:{label:t[e.labelKey]}},[e._l(t.children,(function(t){return[n("ElOption",{key:t[e.valueKey],attrs:{label:t[e.labelKey],value:t[e.valueKey]}})]}))],2)]:[n("ElOption",{key:t[e.valueKey],attrs:{label:t[e.labelKey],value:t[e.valueKey]}})]]}))],2),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)}),[],!1,(function(e){for(let e in st)this[e]=st[e]}),"05cee438",null,null);const dt=pt.exports,ft={maxlength:{type:[String,Number,Boolean]},minlength:{type:[String,Number,Boolean]},placeholder:{type:[String,Number,Boolean]},rows:{type:[String,Number,Boolean]},name:{type:[String,Number,Boolean]},max:{type:[String,Number,Boolean]},min:{type:[String,Number,Boolean]},step:{type:[String,Number,Boolean]},autofocus:{type:[String,Number,Boolean]}},mt={...t.Input.props,...m,...nt,...rt,...ft,realtime:{type:Boolean,default:!0},waitTime:{type:Number,default:300},clearable:{type:Boolean,default:!0}},vt=Object.keys(t.Input.props).concat(Object.keys(ft)),yt=e.defineComponent({inheritAttrs:!1,name:"HInput",components:{ElFormItem:t.FormItem,ElInput:t.Input},props:mt,setup(t,n){const r=d(t),o=e.computed((()=>tt(t,ot))),i=e.computed((()=>tt(t,vt)));let l=0;return{...r,formItemProps:o,inputProps:i,debounceChange:function(e){const{realtime:n,waitTime:o}=t;if(l&&clearTimeout(l),n)r.change(e);else{if(r.updateCheckedValue(e),!r.wrapper)return;l=setTimeout(r.wrapper.insetSearch,o)}},enterHandle:function(e){var t;l&&clearTimeout(l),r.checked.value=e.target.value,r.option.updateWrapperQuery(),null==(t=r.wrapper)||t.search()},getNode:a}}});const ht={};var gt=ct(yt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--input condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElInput",e._g(e._b({staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,value:e.checked},on:{input:e.debounceChange},nativeOn:{keydown:function(t){return"keyCode"in t&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterHandle(t)}}},"ElInput",e.inputProps,!1),e.$listeners)),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)}),[],!1,(function(e){for(let e in ht)this[e]=ht[e]}),"06bedfc6",null,null);const bt=gt.exports;const _t=function e(t){var n;const r={...t.props};return null==(n=t.mixins)||n.forEach((t=>Object.assign(r,e(t)))),r}(t.DatePicker),kt={..._t,...m,...nt,...rt,valueFormat:{type:String,default:"yyyy-MM-dd"},beginField:{type:String},endField:{type:String}},xt=/range$/;const St=Object.keys(_t),Et=e.defineComponent({inheritAttrs:!1,name:"HDatepicker",components:{ElFormItem:t.FormItem,ElDatePicker:t.DatePicker},props:kt,setup(t,n){const{multiple:r,fields:o,...i}=e.toRefs(t),l=e.computed((()=>void 0!==t.multiple?t.multiple:function(e){return!!e&&xt.test(e)}(t.type))),u=e.computed((()=>t.fields||(l.value&&t.beginField&&t.endField?[t.beginField,t.endField]:void 0)));return{...d(e.reactive({...i,multiple:l,fields:u})),formItemProps:e.computed((()=>tt(t,ot))),datepickerProps:e.computed((()=>tt(t,St))),isMultiple:l,getNode:a}}});const Ft={};var Ct=ct(Et,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--datepicker ${e.isMultiple&&"condition-item--datepicker-range"} condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElDatePicker",e._g(e._b({staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,value:e.checked},on:{input:e.change}},"ElDatePicker",e.datepickerProps,!1),e.$listeners)),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)}),[],!1,(function(e){for(let e in Ft)this[e]=Ft[e]}),"6eeeab5a",null,null);const Ot=Ct.exports,It={...t.Cascader.props,...h,...nt,...rt,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0}},Pt=Object.keys(t.Cascader.props),jt=e.defineComponent({inheritAttrs:!1,name:"HCascader",components:{ElFormItem:t.FormItem,ElCascader:t.Cascader},props:It,setup:(t,n)=>({...y(t),formItemProps:e.computed((()=>tt(t,ot))),cascaderProps:e.computed((()=>tt(t,Pt))),getNode:a})});const wt={};var Bt=ct(jt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--cascader condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElCascader",e._g(e._b({staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,options:e.finalOption,value:e.checked},on:{change:e.change}},"ElCascader",e.cascaderProps,!1),e.$listeners)),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)}),[],!1,(function(e){for(let e in wt)this[e]=wt[e]}),"cdb858b6",null,null);const $t=Bt.exports,Rt={...t.RadioGroup.props,...m,...nt,...rt,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},type:{type:String},cancelable:{type:Boolean,default:void 0}},At=Object.keys(t.RadioGroup.props),Tt=e.defineComponent({inheritAttrs:!1,name:"HRadio",components:{ElFormItem:t.FormItem,ElRadioGroup:t.RadioGroup,ElRadioButton:t.RadioButton,ElRadio:t.Radio},props:Rt,setup(t,n){const r=d(t),o=e.computed((()=>tt(t,ot))),i=e.computed((()=>tt(t,At))),l=e.ref(),u=e.computed((()=>"button"===t.type?"ElRadioButton":"ElRadio")),c=e.computed((()=>t.cancelable?"click":null));return{...r,formItemProps:o,radioProps:i,radioGroupRef:l,radioType:u,eventName:c,customChange:function(e,t,n){var r;n(e===t?"":e),null==(r=l.value)||r.$children.forEach((e=>e.$el.blur()))},getNode:a}}});const Kt={};var Vt=ct(Tt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--radio condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElRadioGroup",e._g(e._b({ref:"radioGroupRef",staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,value:e.checked},on:{input:e.change}},"ElRadioGroup",e.radioProps,!1),e.$listeners),[e._l(e.finalOption,(function(t){return[n(e.radioType,{key:t[e.valueKey],tag:"component",attrs:{label:t[e.valueKey]},nativeOn:e._d({},[e.eventName,function(n){return n.preventDefault(),e.customChange(t[e.valueKey],e.checked,e.change)}])},[e._v(" "+e._s(t[e.labelKey])+" ")])]}))],2),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)}),[],!1,(function(e){for(let e in Kt)this[e]=Kt[e]}),"4ebde3f4",null,null);const Nt=Vt.exports,Qt={...t.Checkbox.props};delete Qt.checked;const qt={...Qt,...m,...nt,...rt,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},type:{type:String},multiple:{type:Boolean,default:!0}},Dt=Object.keys(Qt),Gt=e.defineComponent({inheritAttrs:!1,name:"HCheckbox",components:{ElFormItem:t.FormItem,ElCheckboxGroup:t.CheckboxGroup,ElCheckboxButton:t.CheckboxButton,ElCheckbox:t.Checkbox},props:qt,setup(t,n){const r=e.ref(),o=e.computed((()=>"button"===t.type?"ElCheckboxButton":"ElCheckbox"));return{...d(t),formItemProps:e.computed((()=>tt(t,ot))),checkboxProps:e.computed((()=>tt(t,Dt))),checkboxGroupRef:r,checkboxType:o,getNode:a}}});const Ht={};var zt=ct(Gt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--checkbox condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElCheckboxGroup",e._g(e._b({ref:"checkboxGroupRef",staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,value:e.checked},on:{input:e.change}},"ElCheckboxGroup",e.checkboxProps,!1),e.$listeners),[e._l(e.finalOption,(function(t){return[n(e.checkboxType,{key:t[e.valueKey],tag:"component",attrs:{label:t[e.valueKey]}},[e._v(" "+e._s(t[e.labelKey])+" ")])]}))],2),e.postfix?n("div",{staticClass:"condition-item__postfix"},["string"==typeof e.postfix?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)}),[],!1,(function(e){for(let e in Ht)this[e]=Ht[e]}),"16a423d1",null,null);const Mt=zt.exports,Wt=Object.keys(t.Form.props),Ut={...t.Form.props,...o,datum:{type:Object,default:()=>({})},resetToInitialValue:{type:Boolean},immediateSearch:{type:Boolean},renderBtn:{type:Boolean,default:!0},resetTriggerSearch:{type:Boolean},searchText:{type:String,default:"搜索"},resetText:{type:String,default:"重置"}},Xt={search:e=>!0,ready:e=>!0,reset:e=>!0},Jt={select:e.markRaw(dt),input:e.markRaw(bt),datepicker:e.markRaw(Ot),cascader:e.markRaw($t),radio:e.markRaw(Nt),checkbox:e.markRaw(Mt)},Lt={};function Yt(e){return e?Lt[e]||Jt[e]:{...Jt,...Lt}}const Zt=e.defineComponent({name:"HWrapper",inheritAttrs:!1,components:{ElForm:t.Form,ElButton:t.Button},props:Ut,emits:Xt,setup(t,o){const i=e.computed((()=>tt(t,Wt))),l=e.ref(),a=o.emit.bind(o,"search"),u=o.emit.bind(o,"reset"),c=function(t){const o=[];e.onBeforeUnmount((()=>o.splice(0)));const i={};let l=!1,a=[];const u={realtime:e.ref(t.realtime),register(r){o.push(r);const u=()=>{l=!0,r.reset(),r.updateWrapperQuery();const n=o.indexOf(r);-1!==n&&o.splice(n,1),t.searchAtDatumChanged&&p(),l=!1,a.forEach((t=>{e.del(c.value,t),delete i[t]})),a=[]},s=e.getCurrentInstance();return s&&e.onBeforeUnmount(u,n?s.proxy:s),u},updateQueryValue(t,n){l&&a.push(t),e.set(c.value,t,n),i[t]=n},insetSearch(){t.realtime&&p()},search:p,removeUnreferencedField(t){let n=0;o.some((e=>(e.getQuery().hasOwnProperty(t)&&(n+=1),n))),n||(e.del(c.value,t),delete i[t])}};e.provide(r,u);const c=e.ref({...t.backfill}),s=()=>({...c.value,...t.backfill,...i});async function p(){var e,n;const r=await d();r?null==(e=t.toast)||e.call(t,r):null==(n=t.search)||n.call(t,s())}async function d(){return(await Promise.all(o.map((e=>{var t;return null==(t=e.validator)?void 0:t.call(e,c.value)})))).find((e=>e&&"string"==typeof e))}return{child:o,wrapperInstance:u,query:c,getQuery:s,search:p,reset:function(){var e;o.forEach((e=>{e.reset(),e.updateWrapperQuery()})),null==(e=t.reset)||e.call(t,s())},validate:d}}({...t,search:a,reset:u});return e.onMounted((()=>{t.immediateSearch&&o.emit("ready",c.getQuery())})),{...c,rootProps:i,formRef:l,getComponent:Yt,resetAndSearch:function(){c.reset(),c.search()}}}});const en={};var tn=ct(Zt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElForm",e._g(e._b({ref:"formRef",attrs:{model:e.query}},"ElForm",e.rootProps,!1),e.$listeners),[e._l(e.datum,(function(t,r){return[n(e.getComponent(t.t),e._b({key:r,tag:"component",attrs:{field:t.as||r,resetToInitialValue:e.resetToInitialValue,backfill:e.backfill,query:e.query}},"component",t,!1))]})),e._t("btn",[e.renderBtn?[n("ElButton",{attrs:{size:e.size},on:{click:e.search}},[e._v(e._s(e.searchText))]),n("ElButton",{attrs:{size:e.size},on:{click:function(t){e.resetTriggerSearch?e.resetAndSearch():e.reset()}}},[e._v(" "+e._s(e.resetText)+" ")])]:e._e()],{search:e.search,reset:e.reset,resetAndSearch:e.resetAndSearch})],2)}),[],!1,(function(e){for(let e in en)this[e]=en[e]}),null,null,null);const nn=tn.exports;exports.HCascader=$t,exports.HCheckbox=Mt,exports.HDatePicker=Ot,exports.HInput=bt,exports.HRadio=Nt,exports.HSelect=dt,exports.HWrapper=nn,exports.cascaderProps=It,exports.checkboxProps=qt,exports.commonProps=nt,exports.datepickerProps=kt,exports.defineCondition=function(t){return e.reactive(t)},exports.elCheckboxProps=Qt,exports.elDatepickerProps=_t,exports.elInputInsetField=ft,exports.formItemPropKeys=ot,exports.formItemProps=rt,exports.formPropKeys=Wt,exports.getComponent=Yt,exports.inputProps=mt,exports.provideKey=r,exports.radioProps=Rt,exports.registerComponent=function(t,n){Lt[t]=e.markRaw(n)},exports.selectProps=lt,exports.unregisterComponent=function(e){delete Lt[e]},exports.wrapperEmits=Xt,exports.wrapperProps=Ut;
//# sourceMappingURL=index.cjs.min.js.map
