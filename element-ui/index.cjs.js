"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const o=require("vue-demi"),h=require("element-ui"),it=o.version.slice(0,3)==="2.7",Y="condition-wrapper";function ot(e){const t=[];o.onBeforeUnmount(()=>t.splice(0));const n={};let r=!1,i=[];const l={realtime:o.ref(e.realtime),register(p){t.push(p);const d=()=>{r=!0,p.reset(),p.updateWrapperQuery();const P=t.indexOf(p);P!==-1&&t.splice(P,1),e.searchAtDatumChanged&&s(),r=!1,i.forEach(x=>{o.del(f.value,x),delete n[x]}),i=[]},b=o.getCurrentInstance();return b&&o.onBeforeUnmount(d,it?b.proxy:b),d},updateQueryValue(p,d){r&&i.push(p),o.set(f.value,p,d),n[p]=d},insetSearch(){e.realtime&&s()},search:s,removeUnreferencedField(p){let d=0;t.some(b=>(b.getQuery().hasOwnProperty(p)&&(d+=1),d)),d||(o.del(f.value,p),delete n[p])}};o.provide(Y,l);const f=o.ref({...e.backfill}),c=()=>({...f.value,...e.backfill,...n});async function s(){var d,b;const p=await S();p?(d=e.toast)==null||d.call(e,p):(b=e.search)==null||b.call(e,c())}function _(){var p;t.forEach(d=>{d.reset(),d.updateWrapperQuery()}),(p=e.reset)==null||p.call(e,c())}async function S(){return(await Promise.all(t.map(d=>{var b;return(b=d.validator)==null?void 0:b.call(d,f.value)}))).find(d=>d&&typeof d=="string")}return{child:t,wrapperInstance:l,query:f,getQuery:c,search:s,reset:_,validate:S}}const at={realtime:{type:Boolean,default:void 0},searchAtDatumChanged:{type:Boolean,default:void 0},backfill:{type:Object},toast:{type:Function,default:void 0}};function A(e,t){return Array.isArray(e)?e.filter(Boolean).length?e:t:typeof e=="number"?e:e||t}function Oe(e,t,n="children"){var r;for(const i of e){if(t(i))return[i];if((r=i[n])!=null&&r.length){const l=Oe(i[n],t);if(l.length)return l.unshift(i),l}}return[]}function j(e,...t){return typeof e=="function"?e(...t):typeof e=="string"?e:o.markRaw(e)}function Fe(e){const t=o.ref();return o.computed({set(r){t.value=r},get(){return t.value===void 0?e.defaultValue!==void 0?typeof e.defaultValue=="function"?e.defaultValue(e.query,e.backfill):e.defaultValue:void 0:t.value}})}function Te(e,t){const n=o.ref(typeof e.disabled=="boolean"?e.disabled:!1),r=o.ref(typeof e.hide=="boolean"?e.hide:!1),i=()=>({query:e.query,backfill:e.backfill,option:t}),l=()=>{if(typeof e.hide=="function"){const c=r.value,s=e.hide(i());c!==s&&(r.value=e.hide(i()))}else if(typeof e.disabled=="function"){const c=n.value,s=e.disabled(i());c!==s&&(n.value=e.disabled(i()))}};let f=[o.watch(()=>e.query,l,{immediate:!0,deep:!0}),o.watch(()=>[e.disabled,e.hide],(c,s)=>{c[0]!==s[0]&&(n.value=typeof c[0]=="boolean"?c[0]:!1,c[0]),c[1]!==s[1]&&(r.value=typeof c[1]=="boolean"?c[1]:!1,c[1]),l()})];return o.onBeforeUnmount(()=>(f.forEach(c=>c()),f=[])),{insetDisabled:n,insetHide:r}}function W(e=!0){const t=o.ref(e);return{flag:t,updateFlag:()=>{t.value=!e,o.nextTick(()=>{t.value=e})}}}function z(e){return(e==null?void 0:e.toString())??""}function H(e){var N;const t=o.inject(Y),n=Fe(e),r=e.backfill&&((N=e.fields)!=null&&N.length?e.fields.map(m=>e.backfill[m]).filter(Boolean):e.backfill[e.field]),i=o.ref(r||(e.defaultValue!==void 0?n.value:e.multiple?[]:"").slice()),l=o.ref([]),f=o.computed(()=>l.value.length?l.value:e.options),c=()=>e.customGetQuery?e.customGetQuery(i.value,A,e):e.multiple&&e.fields?e.fields.reduce((m,g,a)=>{var u;return m[g]=A((u=i.value)==null?void 0:u[a],e.emptyValue),m},{}):{[e.field]:A(i.value,e.emptyValue)},{flag:s,updateFlag:_}=W(),{flag:S,updateFlag:p}=W(),d={reset(){var g;const{multiple:m}=e;_(),p(),i.value=e.resetToInitialValue&&((g=n.value)==null?void 0:g.slice())||(m?[]:"")},updateWrapperQuery(){_(),t&&Object.entries(c()).forEach(([m,g])=>t.updateQueryValue(m,g))},get validator(){return e.validator},getQuery:c};t==null||t.register(d);const{insetDisabled:b,insetHide:P}=Te(e,d);!r&&e.defaultValue&&d.updateWrapperQuery();const x=[];o.onBeforeUnmount(()=>x.forEach(m=>m())),x.push(o.watch(()=>e.field,(m,g)=>{m!==g&&(t==null||t.removeUnreferencedField(g)),d.updateWrapperQuery()})),x.push(o.watch(()=>[e.fields||e.field,e.fields?e.fields.map(m=>e.query[m]).filter(Boolean):e.query[e.field]],([m,g],[a])=>{const u=e.backfillToValue(g,m,e.query);m.toString()!==a.toString()||z(u)===z(i.value)||s.value&&(i.value=u)})),x.push(o.watch(()=>{var m;return[e.fields||e.field,e.fields?e.fields.map(g=>{var a;return(a=e.backfill)==null?void 0:a[g]}).filter(Boolean):(m=e.backfill)==null?void 0:m[e.field]]},([m,g],[a])=>{const u=e.backfillToValue(g,m,e.backfill);m.toString()!==a.toString()||z(u)===z(i.value)||(p(),k(u))})),x.push(o.watch(()=>[e.depend,e.dependFields,e.dependFields&&[].concat(e.dependFields).map(m=>{var g;return(g=e.query)==null?void 0:g[m]}).join(",")||""],([m,g,a],[u,y,v])=>{S.value&&a!==v&&(q("depend"),!(m!==u||(g==null?void 0:g.toString())!==(y==null?void 0:y.toString()))&&(i.value===void 0||i.value.toString()===""||k(e.multiple?[]:"")))})),x.push(o.watch(()=>e.getOptions,q.bind(null,"initial"),{immediate:!0}));function q(m){var g;(g=e.getOptions)==null||g.call(e,a=>{const u=i.value;i.value=void 0,l.value=a||[],i.value=u},e.query||{},{trigger:m,change:(a,u)=>{u&&(n.value=a),I(a)},search:(a,u)=>{u&&(n.value=a),k(a),t==null||t.search()}})}function k(m){m!==i.value&&(i.value=m,d.updateWrapperQuery())}function I(m){k(m),t==null||t.insetSearch()}return{wrapper:t,option:d,checked:i,getQuery:c,insetDisabled:b,insetHide:P,finalOption:f,updateCheckedValue:k,change:I,reset:d.reset}}const we={field:{type:String,required:!0},query:{type:Object,required:!0},backfill:{type:Object},disabled:{type:[Boolean,Function]},hide:{type:[Boolean,Function]},depend:{type:Boolean},dependFields:{type:[String,Array]},resetToInitialValue:{type:[Boolean]},emptyValue:{type:[String,Number,null,void 0]},validator:{type:[Function]},customGetQuery:{type:Function},defaultValue:{type:[String,Array,Function]}},V={...we,fields:{type:[Array]},backfillToValue:{type:Function,default:e=>e},multiple:{type:Boolean,default:void 0},options:{type:Array,default:()=>[]},getOptions:{type:Function}};function U(e){return(e==null?void 0:e.toString())??""}function lt(e){var g;const t=o.inject(Y),n=Fe(e),r=o.ref([]),i=o.ref([]),l=o.computed(()=>i.value.length?i.value:e.options),f=()=>{var a;return!x.value&&!n.value?{}:e.customGetQuery?e.customGetQuery(r.value,A,e):(a=e.fields)!=null&&a.length?e.fields.reduce((u,y,v)=>Object.assign(u,{[y]:A(r.value[v],e.emptyValue)}),{}):{[e.field]:A(e.emitPath?[...r.value]:r.value.slice(-1)[0],e.emptyValue)}},{flag:c,updateFlag:s}=W(),{flag:_,updateFlag:S}=W(),p={reset(){var a;return s(),S(),r.value=e.resetToInitialValue&&((a=n.value)==null?void 0:a.slice())||[],this},get validator(){return e.validator},updateWrapperQuery(){s(),t&&Object.entries(f()).forEach(([a,u])=>t.updateQueryValue(a,u))},getQuery:f};t==null||t.register(p);const{insetDisabled:d,insetHide:b}=Te(e,p),P=[];o.onBeforeUnmount(()=>P.forEach(a=>a()));const x=o.ref(typeof e.getOptions!="function"||!!((g=e.fields)!=null&&g.length));o.watch(x,a=>a&&q(),{immediate:!0});function q(){var v;const{backfill:a,field:u,fields:y}=e;if(a){if(y){const C=y.reduce((Q,me)=>(a[me]&&Q.push(a[me]),Q),[]);if(C.length){r.value=C,p.updateWrapperQuery();return}}else if(a[u]){r.value=m(a[u]),p.updateWrapperQuery();return}}(v=n.value)!=null&&v.length&&(r.value=typeof n.value=="string"?m(n.value):n.value.slice(),typeof n.value=="string"&&(n.value=r.value.slice()),p.updateWrapperQuery())}P.push(o.watch(()=>e.fields||[e.field],(a,u)=>{a.toString()!==u.toString()&&t&&u.forEach(y=>a.includes(y)||t.removeUnreferencedField(y)),p.updateWrapperQuery()})),P.push(o.watch(()=>{var a,u;return[((a=e.fields)==null?void 0:a.toString())||e.field,((u=e.fields)==null?void 0:u.map(y=>e.query[y]).filter(Boolean))||e.query[e.field]]},([a,u],[y,v])=>{a!==y||U(u)===U(v)||c.value&&(r.value=typeof u=="string"?m(u):u)})),P.push(o.watch(()=>{var a,u;return(a=e.fields)!=null&&a.length?e.fields.reduce((y,v)=>{var C;return(C=e.backfill)!=null&&C[v]&&y.push(e.backfill[v]),y},[]):(u=e.backfill)==null?void 0:u[e.field]},(a,u)=>{if(x.value&&U(a)!==U(u))if(S(),Array.isArray(a))I(a);else{if(!a&&a!==0){r.value.length&&(r.value=[]);return}I(m(a))}})),P.push(o.watch(()=>[e.depend,e.dependFields,e.dependFields&&[].concat(e.dependFields).map(a=>{var u;return(u=e.query)==null?void 0:u[a]}).join(",")||""],([a,u,y],[v,C,Q])=>{_.value&&y!==Q&&(k("depend"),!(a!==v||(u==null?void 0:u.toString())!==(C==null?void 0:C.toString()))&&r.value.length&&I(typeof r.value=="string"?"":[]))})),P.push(o.watch(()=>e.getOptions,k.bind(null,"initial"),{immediate:!0}));function k(a){var u;(u=e.getOptions)==null||u.call(e,y=>{i.value=y||[],x.value=!0},e.query||{},{trigger:a,change:(y,v)=>{v&&(n.value=y),N(y)},search:(y,v)=>{v&&(n.value=y),I(y),t==null||t.search()}})}function I(a){const u=Array.isArray(a)?a:m(a);u.join("")!==r.value.join("")&&(r.value=u,p.updateWrapperQuery())}function N(a){I(a||[]),t==null||t.insetSearch()}function m(a){if(!a&&a!==0)return[];const{valueKey:u,childrenKey:y}=e;return Oe(l.value,v=>v[u]===a).map(v=>v[u],y).filter(Boolean)}return{wrapper:t,option:p,checked:r,getQuery:f,finalOption:l,insetDisabled:d,insetHide:b,change:N,reset:p.reset}}const ct={...we,fields:{type:[Array]},valueKey:{type:String,required:!0},childrenKey:{type:String},emitPath:{type:[Boolean],default:!1},options:{type:Array,default:()=>[]},getOptions:{type:Function}};var ut=typeof global=="object"&&global&&global.Object===Object&&global;const st=ut;var ft=typeof self=="object"&&self&&self.Object===Object&&self,dt=st||ft||Function("return this")();const ie=dt;var mt=ie.Symbol;const E=mt;var Be=Object.prototype,pt=Be.hasOwnProperty,ht=Be.toString,D=E?E.toStringTag:void 0;function _t(e){var t=pt.call(e,D),n=e[D];try{e[D]=void 0;var r=!0}catch{}var i=ht.call(e);return r&&(t?e[D]=n:delete e[D]),i}var yt=Object.prototype,gt=yt.toString;function vt(e){return gt.call(e)}var bt="[object Null]",St="[object Undefined]",pe=E?E.toStringTag:void 0;function oe(e){return e==null?e===void 0?St:bt:pe&&pe in Object(e)?_t(e):vt(e)}function ae(e){return e!=null&&typeof e=="object"}var Pt="[object Symbol]";function le(e){return typeof e=="symbol"||ae(e)&&oe(e)==Pt}function xt(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var $t=Array.isArray;const G=$t;var Ct=1/0,he=E?E.prototype:void 0,_e=he?he.toString:void 0;function Re(e){if(typeof e=="string")return e;if(G(e))return xt(e,Re)+"";if(le(e))return _e?_e.call(e):"";var t=e+"";return t=="0"&&1/e==-Ct?"-0":t}function L(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function kt(e){return e}var It="[object AsyncFunction]",Et="[object Function]",Ot="[object GeneratorFunction]",Ft="[object Proxy]";function Tt(e){if(!L(e))return!1;var t=oe(e);return t==Et||t==Ot||t==It||t==Ft}var wt=ie["__core-js_shared__"];const re=wt;var ye=function(){var e=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Bt(e){return!!ye&&ye in e}var Rt=Function.prototype,At=Rt.toString;function jt(e){if(e!=null){try{return At.call(e)}catch{}try{return e+""}catch{}}return""}var Kt=/[\\^$.*+?()[\]{}|]/g,Nt=/^\[object .+?Constructor\]$/,Dt=Function.prototype,Mt=Object.prototype,Ht=Dt.toString,Vt=Mt.hasOwnProperty,Gt=RegExp("^"+Ht.call(Vt).replace(Kt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qt(e){if(!L(e)||Bt(e))return!1;var t=Tt(e)?Gt:Nt;return t.test(jt(e))}function Qt(e,t){return e==null?void 0:e[t]}function ce(e,t){var n=Qt(e,t);return qt(n)?n:void 0}function zt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Ut=800,Wt=16,Lt=Date.now;function Xt(e){var t=0,n=0;return function(){var r=Lt(),i=Wt-(r-n);if(n=r,i>0){if(++t>=Ut)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function Jt(e){return function(){return e}}var Yt=function(){try{var e=ce(Object,"defineProperty");return e({},"",{}),e}catch{}}();const X=Yt;var Zt=X?function(e,t){return X(e,"toString",{configurable:!0,enumerable:!1,value:Jt(t),writable:!0})}:kt;const en=Zt;var tn=Xt(en);const nn=tn;var rn=9007199254740991,on=/^(?:0|[1-9]\d*)$/;function Ae(e,t){var n=typeof e;return t=t??rn,!!t&&(n=="number"||n!="symbol"&&on.test(e))&&e>-1&&e%1==0&&e<t}function an(e,t,n){t=="__proto__"&&X?X(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function je(e,t){return e===t||e!==e&&t!==t}var ln=Object.prototype,cn=ln.hasOwnProperty;function un(e,t,n){var r=e[t];(!(cn.call(e,t)&&je(r,n))||n===void 0&&!(t in e))&&an(e,t,n)}var ge=Math.max;function sn(e,t,n){return t=ge(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,l=ge(r.length-t,0),f=Array(l);++i<l;)f[i]=r[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=r[i];return c[t]=n(f),zt(e,this,c)}}var fn=9007199254740991;function dn(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=fn}var mn="[object Arguments]";function ve(e){return ae(e)&&oe(e)==mn}var Ke=Object.prototype,pn=Ke.hasOwnProperty,hn=Ke.propertyIsEnumerable,_n=ve(function(){return arguments}())?ve:function(e){return ae(e)&&pn.call(e,"callee")&&!hn.call(e,"callee")};const Ne=_n;var yn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gn=/^\w*$/;function vn(e,t){if(G(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||le(e)?!0:gn.test(e)||!yn.test(e)||t!=null&&e in Object(t)}var bn=ce(Object,"create");const M=bn;function Sn(){this.__data__=M?M(null):{},this.size=0}function Pn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var xn="__lodash_hash_undefined__",$n=Object.prototype,Cn=$n.hasOwnProperty;function kn(e){var t=this.__data__;if(M){var n=t[e];return n===xn?void 0:n}return Cn.call(t,e)?t[e]:void 0}var In=Object.prototype,En=In.hasOwnProperty;function On(e){var t=this.__data__;return M?t[e]!==void 0:En.call(t,e)}var Fn="__lodash_hash_undefined__";function Tn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=M&&t===void 0?Fn:t,this}function F(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}F.prototype.clear=Sn;F.prototype.delete=Pn;F.prototype.get=kn;F.prototype.has=On;F.prototype.set=Tn;function wn(){this.__data__=[],this.size=0}function Z(e,t){for(var n=e.length;n--;)if(je(e[n][0],t))return n;return-1}var Bn=Array.prototype,Rn=Bn.splice;function An(e){var t=this.__data__,n=Z(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Rn.call(t,n,1),--this.size,!0}function jn(e){var t=this.__data__,n=Z(t,e);return n<0?void 0:t[n][1]}function Kn(e){return Z(this.__data__,e)>-1}function Nn(e,t){var n=this.__data__,r=Z(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function K(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}K.prototype.clear=wn;K.prototype.delete=An;K.prototype.get=jn;K.prototype.has=Kn;K.prototype.set=Nn;var Dn=ce(ie,"Map");const Mn=Dn;function Hn(){this.size=0,this.__data__={hash:new F,map:new(Mn||K),string:new F}}function Vn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ee(e,t){var n=e.__data__;return Vn(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Gn(e){var t=ee(this,e).delete(e);return this.size-=t?1:0,t}function qn(e){return ee(this,e).get(e)}function Qn(e){return ee(this,e).has(e)}function zn(e,t){var n=ee(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function T(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}T.prototype.clear=Hn;T.prototype.delete=Gn;T.prototype.get=qn;T.prototype.has=Qn;T.prototype.set=zn;var Un="Expected a function";function ue(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Un);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],l=n.cache;if(l.has(i))return l.get(i);var f=e.apply(this,r);return n.cache=l.set(i,f)||l,f};return n.cache=new(ue.Cache||T),n}ue.Cache=T;var Wn=500;function Ln(e){var t=ue(e,function(r){return n.size===Wn&&n.clear(),r}),n=t.cache;return t}var Xn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jn=/\\(\\)?/g,Yn=Ln(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Xn,function(n,r,i,l){t.push(i?l.replace(Jn,"$1"):r||n)}),t});const Zn=Yn;function er(e){return e==null?"":Re(e)}function te(e,t){return G(e)?e:vn(e,t)?[e]:Zn(er(e))}var tr=1/0;function se(e){if(typeof e=="string"||le(e))return e;var t=e+"";return t=="0"&&1/e==-tr?"-0":t}function nr(e,t){t=te(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[se(t[n++])];return n&&n==r?e:void 0}function rr(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var be=E?E.isConcatSpreadable:void 0;function ir(e){return G(e)||Ne(e)||!!(be&&e&&e[be])}function De(e,t,n,r,i){var l=-1,f=e.length;for(n||(n=ir),i||(i=[]);++l<f;){var c=e[l];t>0&&n(c)?t>1?De(c,t-1,n,r,i):rr(i,c):r||(i[i.length]=c)}return i}function or(e){var t=e==null?0:e.length;return t?De(e,1):[]}function ar(e){return nn(sn(e,void 0,or),e+"")}function lr(e,t){return e!=null&&t in Object(e)}function cr(e,t,n){t=te(t,e);for(var r=-1,i=t.length,l=!1;++r<i;){var f=se(t[r]);if(!(l=e!=null&&n(e,f)))break;e=e[f]}return l||++r!=i?l:(i=e==null?0:e.length,!!i&&dn(i)&&Ae(f,i)&&(G(e)||Ne(e)))}function ur(e,t){return e!=null&&cr(e,t,lr)}function sr(e,t,n,r){if(!L(e))return e;t=te(t,e);for(var i=-1,l=t.length,f=l-1,c=e;c!=null&&++i<l;){var s=se(t[i]),_=n;if(s==="__proto__"||s==="constructor"||s==="prototype")return e;if(i!=f){var S=c[s];_=r?r(S,s,c):void 0,_===void 0&&(_=L(S)?S:Ae(t[i+1])?[]:{})}un(c,s,_),c=c[s]}return e}function fr(e,t,n){for(var r=-1,i=t.length,l={};++r<i;){var f=t[r],c=nr(e,f);n(c,f)&&sr(l,te(f,e),c)}return l}function dr(e,t){return fr(e,t,function(n,r){return ur(e,r)})}var mr=ar(function(e,t){return e==null?{}:dr(e,t)});const $=mr,w={postfix:{type:[String,Object,Function]},as:{type:String}},O={...h.FormItem.props,prop:{type:[String,Array]}},B=Object.keys(O),Me={...h.Select.props};delete Me.value;const He={...Me,...V,...w,...O,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},filterMethod:{type:Function}},pr=Object.keys(h.Select.props),hr=o.defineComponent({inheritAttrs:!1,name:"HSelect",components:{ElFormItem:h.FormItem,ElSelect:h.Select,ElOptionGroup:h.OptionGroup,ElOption:h.Option},props:He,setup(e,t){const n=H(e),r=o.computed(()=>$(e,B)),i=o.computed(()=>$(e,pr)),l=o.ref(""),f=s=>{l.value=s},c=o.computed(()=>{const s=l.value;return s?n.finalOption.value.filter(e.filterMethod.bind(null,s)):n.finalOption.value});return{...n,formItemProps:r,selectProps:i,getNode:j,filterValue:l,customFilterMethod:f,filterSource:c}}});var _r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--select condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElSelect",e._g(e._b({staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,"filter-method":e.filterMethod&&e.customFilterMethod,value:e.checked},on:{input:e.change,blur:function(r){return e.customFilterMethod("")},change:function(r){return e.customFilterMethod("")}}},"ElSelect",e.selectProps,!1),e.$listeners),[e._l(e.filterSource,function(r){return[r.group&&r.children?[n("ElOptionGroup",{key:r[e.valueKey],attrs:{label:r[e.labelKey]}},[e._l(r.children,function(i){return[n("ElOption",{key:i[e.valueKey],attrs:{label:i[e.labelKey],value:i[e.valueKey]}})]})],2)]:[n("ElOption",{key:r[e.valueKey],attrs:{label:r[e.labelKey],value:r[e.valueKey]}})]]})],2),e.postfix?n("div",{staticClass:"condition-item__postfix"},[typeof e.postfix=="string"?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)},yr=[];function R(e,t,n,r,i,l,f,c){var s=typeof e=="function"?e.options:e;t&&(s.render=t,s.staticRenderFns=n,s._compiled=!0),r&&(s.functional=!0),l&&(s._scopeId="data-v-"+l);var _;if(f?(_=function(d){d=d||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!d&&typeof __VUE_SSR_CONTEXT__<"u"&&(d=__VUE_SSR_CONTEXT__),i&&i.call(this,d),d&&d._registeredComponents&&d._registeredComponents.add(f)},s._ssrRegister=_):i&&(_=c?function(){i.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:i),_)if(s.functional){s._injectStyles=_;var S=s.render;s.render=function(b,P){return _.call(P),S(b,P)}}else{var p=s.beforeCreate;s.beforeCreate=p?[].concat(p,_):[_]}return{exports:e,options:s}}const Se={};var gr=R(hr,_r,yr,!1,vr,"05cee438",null,null);function vr(e){for(let t in Se)this[t]=Se[t]}const Ve=function(){return gr.exports}(),fe={maxlength:{type:[String,Number,Boolean]},minlength:{type:[String,Number,Boolean]},placeholder:{type:[String,Number,Boolean]},rows:{type:[String,Number,Boolean]},name:{type:[String,Number,Boolean]},max:{type:[String,Number,Boolean]},min:{type:[String,Number,Boolean]},step:{type:[String,Number,Boolean]},autofocus:{type:[String,Number,Boolean]}},Ge={...h.Input.props,...V,...w,...O,...fe,realtime:{type:Boolean,default:!0},waitTime:{type:Number,default:300},clearable:{type:Boolean,default:!0}},br=Object.keys(h.Input.props).concat(Object.keys(fe)),Sr=o.defineComponent({inheritAttrs:!1,name:"HInput",components:{ElFormItem:h.FormItem,ElInput:h.Input},props:Ge,setup(e,t){const n=H(e),r=o.computed(()=>$(e,B)),i=o.computed(()=>$(e,br));let l=0;function f(s){const{realtime:_,waitTime:S}=e;if(l&&clearTimeout(l),_)n.change(s);else{if(n.updateCheckedValue(s),!n.wrapper)return;l=setTimeout(n.wrapper.insetSearch,S)}}function c(s){var _;l&&clearTimeout(l),n.checked.value=s.target.value,n.option.updateWrapperQuery(),(_=n.wrapper)==null||_.search()}return{...n,formItemProps:r,inputProps:i,debounceChange:f,enterHandle:c,getNode:j}}});var Pr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--input condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElInput",e._g(e._b({staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,value:e.checked},on:{input:e.debounceChange},nativeOn:{keydown:function(r){return"keyCode"in r&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.enterHandle(r)}}},"ElInput",e.inputProps,!1),e.$listeners)),e.postfix?n("div",{staticClass:"condition-item__postfix"},[typeof e.postfix=="string"?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)},xr=[];const Pe={};var $r=R(Sr,Pr,xr,!1,Cr,"06bedfc6",null,null);function Cr(e){for(let t in Pe)this[t]=Pe[t]}const qe=function(){return $r.exports}();function Qe(e){var n;const t={...e.props};return(n=e.mixins)==null||n.forEach(r=>Object.assign(t,Qe(r))),t}const de=Qe(h.DatePicker),ze={...de,...V,...w,...O,valueFormat:{type:String,default:"yyyy-MM-dd"},beginField:{type:String},endField:{type:String}},kr=/range$/;function Ir(e){return e?kr.test(e):!1}const Er=Object.keys(de),Or=o.defineComponent({inheritAttrs:!1,name:"HDatepicker",components:{ElFormItem:h.FormItem,ElDatePicker:h.DatePicker},props:ze,setup(e,t){const{multiple:n,fields:r,...i}=o.toRefs(e),l=o.computed(()=>e.multiple!==void 0?e.multiple:Ir(e.type)),f=o.computed(()=>e.fields||(l.value&&e.beginField&&e.endField?[e.beginField,e.endField]:void 0)),c=H(o.reactive({...i,multiple:l,fields:f})),s=o.computed(()=>$(e,B)),_=o.computed(()=>$(e,Er));return{...c,formItemProps:s,datepickerProps:_,isMultiple:l,getNode:j}}});var Fr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--datepicker ${e.isMultiple&&"condition-item--datepicker-range"} condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElDatePicker",e._g(e._b({staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,value:e.checked},on:{input:e.change}},"ElDatePicker",e.datepickerProps,!1),e.$listeners)),e.postfix?n("div",{staticClass:"condition-item__postfix"},[typeof e.postfix=="string"?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)},Tr=[];const xe={};var wr=R(Or,Fr,Tr,!1,Br,"6eeeab5a",null,null);function Br(e){for(let t in xe)this[t]=xe[t]}const Ue=function(){return wr.exports}(),We={...h.Cascader.props,...ct,...w,...O,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0}},Rr=Object.keys(h.Cascader.props),Ar=o.defineComponent({inheritAttrs:!1,name:"HCascader",components:{ElFormItem:h.FormItem,ElCascader:h.Cascader},props:We,setup(e,t){const n=lt(e),r=o.computed(()=>$(e,B)),i=o.computed(()=>$(e,Rr));return{...n,formItemProps:r,cascaderProps:i,getNode:j}}});var jr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--cascader condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElCascader",e._g(e._b({staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,options:e.finalOption,value:e.checked},on:{change:e.change}},"ElCascader",e.cascaderProps,!1),e.$listeners)),e.postfix?n("div",{staticClass:"condition-item__postfix"},[typeof e.postfix=="string"?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)},Kr=[];const $e={};var Nr=R(Ar,jr,Kr,!1,Dr,"cdb858b6",null,null);function Dr(e){for(let t in $e)this[t]=$e[t]}const Le=function(){return Nr.exports}(),Xe={...h.RadioGroup.props,...V,...w,...O,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},type:{type:String},cancelable:{type:Boolean,default:void 0}},Mr=Object.keys(h.RadioGroup.props),Hr=o.defineComponent({inheritAttrs:!1,name:"HRadio",components:{ElFormItem:h.FormItem,ElRadioGroup:h.RadioGroup,ElRadioButton:h.RadioButton,ElRadio:h.Radio},props:Xe,setup(e,t){const n=H(e),r=o.computed(()=>$(e,B)),i=o.computed(()=>$(e,Mr)),l=o.ref(),f=o.computed(()=>e.type==="button"?"ElRadioButton":"ElRadio"),c=o.computed(()=>e.cancelable?"click":null);function s(_,S,p){var d;p(_===S?"":_),(d=l.value)==null||d.$children.forEach(b=>b.$el.blur())}return{...n,formItemProps:r,radioProps:i,radioGroupRef:l,radioType:f,eventName:c,customChange:s,getNode:j}}});var Vr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--radio condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElRadioGroup",e._g(e._b({ref:"radioGroupRef",staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,value:e.checked},on:{input:e.change}},"ElRadioGroup",e.radioProps,!1),e.$listeners),[e._l(e.finalOption,function(r){return[n(e.radioType,{key:r[e.valueKey],tag:"component",attrs:{label:r[e.valueKey]},nativeOn:e._d({},[e.eventName,function(i){return i.preventDefault(),e.customChange(r[e.valueKey],e.checked,e.change)}])},[e._v(" "+e._s(r[e.labelKey])+" ")])]})],2),e.postfix?n("div",{staticClass:"condition-item__postfix"},[typeof e.postfix=="string"?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)},Gr=[];const Ce={};var qr=R(Hr,Vr,Gr,!1,Qr,"4ebde3f4",null,null);function Qr(e){for(let t in Ce)this[t]=Ce[t]}const Je=function(){return qr.exports}(),ne={...h.Checkbox.props};delete ne.checked;const Ye={...ne,...V,...w,...O,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},type:{type:String},multiple:{type:Boolean,default:!0}},zr=Object.keys(ne),Ur=o.defineComponent({inheritAttrs:!1,name:"HCheckbox",components:{ElFormItem:h.FormItem,ElCheckboxGroup:h.CheckboxGroup,ElCheckboxButton:h.CheckboxButton,ElCheckbox:h.Checkbox},props:Ye,setup(e,t){const n=o.ref(),r=o.computed(()=>e.type==="button"?"ElCheckboxButton":"ElCheckbox"),i=H(e),l=o.computed(()=>$(e,B)),f=o.computed(()=>$(e,zr));return{...i,formItemProps:l,checkboxProps:f,checkboxGroupRef:n,checkboxType:r,getNode:j}}});var Wr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElFormItem",e._b({class:`condition-item condition-item--checkbox condition-item--${e.field} condition-item--${!!e.postfix}`,attrs:{prop:e.formItemProps.prop||e.field}},"ElFormItem",e.formItemProps,!1),[n("ElCheckboxGroup",e._g(e._b({ref:"checkboxGroupRef",staticClass:"condition-item__content",attrs:{disabled:e.insetDisabled,value:e.checked},on:{input:e.change}},"ElCheckboxGroup",e.checkboxProps,!1),e.$listeners),[e._l(e.finalOption,function(r){return[n(e.checkboxType,{key:r[e.valueKey],tag:"component",attrs:{label:r[e.valueKey]}},[e._v(" "+e._s(r[e.labelKey])+" ")])]})],2),e.postfix?n("div",{staticClass:"condition-item__postfix"},[typeof e.postfix=="string"?[e._v(e._s(e.postfix))]:[n(e.getNode(e.postfix,e.checked),{tag:"component"})]],2):e._e()],1)},Lr=[];const ke={};var Xr=R(Ur,Wr,Lr,!1,Jr,"16a423d1",null,null);function Jr(e){for(let t in ke)this[t]=ke[t]}const Ze=function(){return Xr.exports}(),et=Object.keys(h.Form.props),tt={...h.Form.props,...at,datum:{type:Object,default:()=>({})},resetToInitialValue:{type:Boolean},immediateSearch:{type:Boolean},renderBtn:{type:Boolean,default:!0},resetTriggerSearch:{type:Boolean},searchText:{type:String,default:"搜索"},resetText:{type:String,default:"重置"}},nt={search:e=>!0,ready:e=>!0,reset:e=>!0},Ie={select:o.markRaw(Ve),input:o.markRaw(qe),datepicker:o.markRaw(Ue),cascader:o.markRaw(Le),radio:o.markRaw(Je),checkbox:o.markRaw(Ze)},J={};function Yr(e,t){J[e]=o.markRaw(t)}function Zr(e){delete J[e]}function rt(e){return e?J[e]||Ie[e]:{...Ie,...J}}const ei=o.defineComponent({name:"HWrapper",inheritAttrs:!1,components:{ElForm:h.Form,ElButton:h.Button},props:tt,emits:nt,setup(e,t){const n=o.computed(()=>$(e,et)),r=o.ref(),i=t.emit.bind(t,"search"),l=t.emit.bind(t,"reset"),f=ot({...e,search:i,reset:l});function c(){f.reset(),f.search()}return o.onMounted(()=>{e.immediateSearch&&t.emit("ready",f.getQuery())}),{...f,rootProps:n,formRef:r,getComponent:rt,resetAndSearch:c}}});var ti=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElForm",e._g(e._b({ref:"formRef",attrs:{model:e.query}},"ElForm",e.rootProps,!1),e.$listeners),[e._l(e.datum,function(r,i){return[n(e.getComponent(r.t),e._b({key:i,tag:"component",attrs:{field:r.as||i,resetToInitialValue:e.resetToInitialValue,backfill:e.backfill,query:e.query}},"component",r,!1))]}),e._t("btn",[e.renderBtn?[n("ElButton",{attrs:{size:e.size},on:{click:e.search}},[e._v(e._s(e.searchText))]),n("ElButton",{attrs:{size:e.size},on:{click:function(r){e.resetTriggerSearch?e.resetAndSearch():e.reset()}}},[e._v(" "+e._s(e.resetText)+" ")])]:e._e()],{search:e.search,reset:e.reset,resetAndSearch:e.resetAndSearch})],2)},ni=[];const Ee={};var ri=R(ei,ti,ni,!1,ii,null,null,null);function ii(e){for(let t in Ee)this[t]=Ee[t]}const oi=function(){return ri.exports}();function ai(e){return o.reactive(e)}exports.HCascader=Le;exports.HCheckbox=Ze;exports.HDatePicker=Ue;exports.HInput=qe;exports.HRadio=Je;exports.HSelect=Ve;exports.HWrapper=oi;exports.cascaderProps=We;exports.checkboxProps=Ye;exports.commonProps=w;exports.datepickerProps=ze;exports.defineCondition=ai;exports.elCheckboxProps=ne;exports.elDatepickerProps=de;exports.elInputInsetField=fe;exports.formItemPropKeys=B;exports.formItemProps=O;exports.formPropKeys=et;exports.getComponent=rt;exports.inputProps=Ge;exports.provideKey=Y;exports.radioProps=Xe;exports.registerComponent=Yr;exports.selectProps=He;exports.unregisterComponent=Zr;exports.wrapperEmits=nt;exports.wrapperProps=tt;
//# sourceMappingURL=index.cjs.js.map
