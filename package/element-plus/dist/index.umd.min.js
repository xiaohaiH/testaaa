!function(e,t){"object"==typeof exports&&typeof module<"u"?t(exports,require("vue"),require("element-plus")):"function"==typeof define&&define.amd?define(["exports","vue","element-plus"],t):t((e=typeof globalThis<"u"?globalThis:e||self).HCondition={},e.Vue,e.ElementPlus)}(this,(function(e,t,o){"use strict";function n(e,t){Array.isArray(e)?e.splice(t,1):delete e[t]}const r="2.7"===t.version.slice(0,3),l="condition-wrapper";function a(e){const o=[];t.onBeforeUnmount((()=>o.splice(0)));const a={};let i=!1,c=[];const u={realtime:t.ref(e.realtime),register(l){o.push(l);const u=()=>{i=!0,l.reset(),l.updateWrapperQuery();const t=o.indexOf(l);-1!==t&&o.splice(t,1),e.searchAtDatumChanged&&d(),i=!1,c.forEach((e=>{n(p.value,e),delete a[e]})),c=[]},s=t.getCurrentInstance();return s&&t.onBeforeUnmount(u,r?s.proxy:s),u},updateQueryValue(e,t){i&&c.push(e),function(e,t,o){Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,o)):e[t]=o}(p.value,e,t),a[e]=t},insetSearch(){e.realtime&&d()},search:d,removeUnreferencedField(e){let t=0;o.some((o=>(o.getQuery().hasOwnProperty(e)&&(t+=1),t))),t||(n(p.value,e),delete a[e])}};t.provide(l,u);const p=t.ref({...e.backfill}),s=()=>({...p.value,...e.backfill,...a});async function d(){var t,o;const n=await f();n?null==(t=e.toast)||t.call(e,n):null==(o=e.search)||o.call(e,s())}async function f(){return(await Promise.all(o.map((e=>{var t;return null==(t=e.validator)?void 0:t.call(e,p.value)})))).find((e=>e&&"string"==typeof e))}return{child:o,wrapperInstance:u,query:p,getQuery:s,search:d,reset:function(){var t;o.forEach((e=>{e.reset(),e.updateWrapperQuery()})),null==(t=e.reset)||t.call(e,s())},validate:f}}const i={realtime:{type:Boolean,default:void 0},searchAtDatumChanged:{type:Boolean,default:void 0},backfill:{type:Object},toast:{type:Function,default:void 0}};function c(e,t){return Array.isArray(e)?e.filter(Boolean).length?e:t:"number"==typeof e?e:e||t}function u(e,t,o="children"){var n;for(const r of e){if(t(r))return[r];if(null!=(n=r[o])&&n.length){const e=u(r[o],t);if(e.length)return e.unshift(r),e}}return[]}function p(e,...o){return"function"==typeof e?e(...o):"string"==typeof e?e:t.markRaw(e)}function s(e){const o=t.ref();return t.computed({set(e){o.value=e},get:()=>void 0===o.value?void 0!==e.defaultValue?"function"==typeof e.defaultValue?e.defaultValue(e.query,e.backfill):e.defaultValue:void 0:o.value})}function d(e,o){const n=t.ref("boolean"==typeof e.disabled&&e.disabled),r=t.ref("boolean"==typeof e.hide&&e.hide),l=()=>({query:e.query,backfill:e.backfill,option:o}),a=()=>{if("function"==typeof e.hide){r.value!==e.hide(l())&&(r.value=e.hide(l()))}else if("function"==typeof e.disabled){n.value!==e.disabled(l())&&(n.value=e.disabled(l()))}};let i=[t.watch((()=>e.query),a,{immediate:!0,deep:!0}),t.watch((()=>[e.disabled,e.hide]),((e,t)=>{e[0]!==t[0]&&(n.value="boolean"==typeof e[0]&&e[0],e[0]),e[1]!==t[1]&&(r.value="boolean"==typeof e[1]&&e[1],e[1]),a()}))];return t.onBeforeUnmount((()=>(i.forEach((e=>e())),i=[]))),{insetDisabled:n,insetHide:r}}function f(e=!0){const o=t.ref(e);return{flag:o,updateFlag:()=>{o.value=!e,t.nextTick((()=>{o.value=e}))}}}function m(e){return(null==e?void 0:e.toString())??""}function y(e){var o;const n=t.inject(l),r=s(e),a=e.backfill&&(null!=(o=e.fields)&&o.length?e.fields.map((t=>e.backfill[t])).filter(Boolean):e.backfill[e.field]),i=t.ref(a||(void 0!==e.defaultValue?r.value:e.multiple?[]:"").slice()),u=t.ref([]),p=t.computed((()=>u.value.length?u.value:e.options)),y=()=>e.customGetQuery?e.customGetQuery(i.value,c,e):e.multiple&&e.fields?e.fields.reduce(((t,o,n)=>{var r;return t[o]=c(null==(r=i.value)?void 0:r[n],e.emptyValue),t}),{}):{[e.field]:c(i.value,e.emptyValue)},{flag:v,updateFlag:h}=f(),{flag:g,updateFlag:b}=f(),k={reset(){var t;const{multiple:o}=e;h(),b(),i.value=e.resetToInitialValue&&(null==(t=r.value)?void 0:t.slice())||(o?[]:"")},updateWrapperQuery(){h(),n&&Object.entries(y()).forEach((([e,t])=>n.updateQueryValue(e,t)))},get validator(){return e.validator},getQuery:y};null==n||n.register(k);const{insetDisabled:_,insetHide:B}=d(e,k);!a&&e.defaultValue&&k.updateWrapperQuery();const E=[];function x(t){var o;null==(o=e.getOptions)||o.call(e,(e=>{const t=i.value;i.value=void 0,u.value=e||[],i.value=t}),e.query||{},{trigger:t,change:(e,t)=>{t&&(r.value=e),S(e)},search:(e,t)=>{t&&(r.value=e),C(e),null==n||n.search()}})}function C(e){e!==i.value&&(i.value=e,k.updateWrapperQuery())}function S(e){C(e),null==n||n.insetSearch()}return t.onBeforeUnmount((()=>E.forEach((e=>e())))),E.push(t.watch((()=>e.field),((e,t)=>{e!==t&&(null==n||n.removeUnreferencedField(t)),k.updateWrapperQuery()}))),E.push(t.watch((()=>[e.fields||e.field,e.fields?e.fields.map((t=>e.query[t])).filter(Boolean):e.query[e.field]]),(([t,o],[n])=>{const r=e.backfillToValue(o,t,e.query);t.toString()!==n.toString()||m(r)===m(i.value)||v.value&&(i.value=r)}))),E.push(t.watch((()=>{var t;return[e.fields||e.field,e.fields?e.fields.map((t=>{var o;return null==(o=e.backfill)?void 0:o[t]})).filter(Boolean):null==(t=e.backfill)?void 0:t[e.field]]}),(([t,o],[n])=>{const r=e.backfillToValue(o,t,e.backfill);t.toString()!==n.toString()||m(r)===m(i.value)||(b(),C(r))}))),E.push(t.watch((()=>[e.depend,e.dependFields,e.dependFields&&[].concat(e.dependFields).map((t=>{var o;return null==(o=e.query)?void 0:o[t]})).join(",")||""]),(([t,o,n],[r,l,a])=>{g.value&&n!==a&&(x("depend"),t===r&&(null==o?void 0:o.toString())===(null==l?void 0:l.toString())&&(void 0===i.value||""===i.value.toString()||C(e.multiple?[]:"")))}))),E.push(t.watch((()=>e.getOptions),x.bind(null,"initial"),{immediate:!0})),{wrapper:n,option:k,checked:i,getQuery:y,insetDisabled:_,insetHide:B,finalOption:p,updateCheckedValue:C,change:S,reset:k.reset}}const v={field:{type:String,required:!0},query:{type:Object,required:!0},backfill:{type:Object},disabled:{type:[Boolean,Function]},hide:{type:[Boolean,Function]},depend:{type:Boolean},dependFields:{type:[String,Array]},resetToInitialValue:{type:[Boolean]},emptyValue:{type:[String,Number,null,void 0]},validator:{type:[Function]},customGetQuery:{type:Function},defaultValue:{type:[String,Array,Function]}},h={...v,fields:{type:[Array]},backfillToValue:{type:Function,default:e=>e},multiple:{type:Boolean,default:void 0},options:{type:Array,default:()=>[]},getOptions:{type:Function}};function g(e){return(null==e?void 0:e.toString())??""}function b(e){var o;const n=t.inject(l),r=s(e),a=t.ref([]),i=t.ref([]),p=t.computed((()=>i.value.length?i.value:e.options)),m=()=>{var t;return x.value||r.value?e.customGetQuery?e.customGetQuery(a.value,c,e):null!=(t=e.fields)&&t.length?e.fields.reduce(((t,o,n)=>Object.assign(t,{[o]:c(a.value[n],e.emptyValue)})),{}):{[e.field]:c(e.emitPath?[...a.value]:a.value.slice(-1)[0],e.emptyValue)}:{}},{flag:y,updateFlag:v}=f(),{flag:h,updateFlag:b}=f(),k={reset(){var t;return v(),b(),a.value=e.resetToInitialValue&&(null==(t=r.value)?void 0:t.slice())||[],this},get validator(){return e.validator},updateWrapperQuery(){v(),n&&Object.entries(m()).forEach((([e,t])=>n.updateQueryValue(e,t)))},getQuery:m};null==n||n.register(k);const{insetDisabled:_,insetHide:B}=d(e,k),E=[];t.onBeforeUnmount((()=>E.forEach((e=>e()))));const x=t.ref("function"!=typeof e.getOptions||!(null==(o=e.fields)||!o.length));function C(t){var o;null==(o=e.getOptions)||o.call(e,(e=>{i.value=e||[],x.value=!0}),e.query||{},{trigger:t,change:(e,t)=>{t&&(r.value=e),P(e)},search:(e,t)=>{t&&(r.value=e),S(e),null==n||n.search()}})}function S(e){const t=Array.isArray(e)?e:F(e);t.join("")!==a.value.join("")&&(a.value=t,k.updateWrapperQuery())}function P(e){S(e||[]),null==n||n.insetSearch()}function F(t){if(!t&&0!==t)return[];const{valueKey:o,childrenKey:n}=e;return u(p.value,(e=>e[o]===t)).map((e=>e[o]),n).filter(Boolean)}return t.watch(x,(t=>t&&function(){var t;const{backfill:o,field:n,fields:l}=e;if(o)if(l){const e=l.reduce(((e,t)=>(o[t]&&e.push(o[t]),e)),[]);if(e.length)return a.value=e,void k.updateWrapperQuery()}else if(o[n])return a.value=F(o[n]),void k.updateWrapperQuery();null!=(t=r.value)&&t.length&&(a.value="string"==typeof r.value?F(r.value):r.value.slice(),"string"==typeof r.value&&(r.value=a.value.slice()),k.updateWrapperQuery())}()),{immediate:!0}),E.push(t.watch((()=>e.fields||[e.field]),((e,t)=>{e.toString()!==t.toString()&&n&&t.forEach((t=>e.includes(t)||n.removeUnreferencedField(t))),k.updateWrapperQuery()}))),E.push(t.watch((()=>{var t,o;return[(null==(t=e.fields)?void 0:t.toString())||e.field,(null==(o=e.fields)?void 0:o.map((t=>e.query[t])).filter(Boolean))||e.query[e.field]]}),(([e,t],[o,n])=>{e!==o||g(t)===g(n)||y.value&&(a.value="string"==typeof t?F(t):t)}))),E.push(t.watch((()=>{var t,o;return null!=(t=e.fields)&&t.length?e.fields.reduce(((t,o)=>{var n;return null!=(n=e.backfill)&&n[o]&&t.push(e.backfill[o]),t}),[]):null==(o=e.backfill)?void 0:o[e.field]}),((e,t)=>{if(x.value&&g(e)!==g(t))if(b(),Array.isArray(e))S(e);else{if(!e&&0!==e)return void(a.value.length&&(a.value=[]));S(F(e))}}))),E.push(t.watch((()=>[e.depend,e.dependFields,e.dependFields&&[].concat(e.dependFields).map((t=>{var o;return null==(o=e.query)?void 0:o[t]})).join(",")||""]),(([e,t,o],[n,r,l])=>{h.value&&o!==l&&(C("depend"),e===n&&(null==t?void 0:t.toString())===(null==r?void 0:r.toString())&&a.value.length&&S("string"==typeof a.value?"":[]))}))),E.push(t.watch((()=>e.getOptions),C.bind(null,"initial"),{immediate:!0})),{wrapper:n,option:k,checked:a,getQuery:m,finalOption:p,insetDisabled:_,insetHide:B,change:P,reset:k.reset}}const k={...v,fields:{type:[Array]},valueKey:{type:String,required:!0},childrenKey:{type:String},emitPath:{type:[Boolean],default:!1},options:{type:Array,default:()=>[]},getOptions:{type:Function}};const _="object"==typeof global&&global&&global.Object===Object&&global;var B="object"==typeof self&&self&&self.Object===Object&&self;const E=_||B||Function("return this")();const x=E.Symbol;var C=Object.prototype,S=C.hasOwnProperty,P=C.toString,F=x?x.toStringTag:void 0;var w=Object.prototype.toString;var O="[object Null]",V="[object Undefined]",I=x?x.toStringTag:void 0;function j(e){return null==e?void 0===e?V:O:I&&I in Object(e)?function(e){var t=S.call(e,F),o=e[F];try{e[F]=void 0;var n=!0}catch{}var r=P.call(e);return n&&(t?e[F]=o:delete e[F]),r}(e):function(e){return w.call(e)}(e)}function T(e){return null!=e&&"object"==typeof e}var D="[object Symbol]";function N(e){return"symbol"==typeof e||T(e)&&j(e)==D}const A=Array.isArray;var K=1/0,R=x?x.prototype:void 0,Q=R?R.toString:void 0;function $(e){if("string"==typeof e)return e;if(A(e))return function(e,t){for(var o=-1,n=null==e?0:e.length,r=Array(n);++o<n;)r[o]=t(e[o],o,e);return r}(e,$)+"";if(N(e))return Q?Q.call(e):"";var t=e+"";return"0"==t&&1/e==-K?"-0":t}function q(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var H="[object AsyncFunction]",G="[object Function]",U="[object GeneratorFunction]",z="[object Proxy]";const M=E["__core-js_shared__"];var W,L=(W=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"";var Y=Function.prototype.toString;var J=/^\[object .+?Constructor\]$/,X=Function.prototype,Z=Object.prototype,ee=X.toString,te=Z.hasOwnProperty,oe=RegExp("^"+ee.call(te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ne(e){if(!q(e)||function(e){return!!L&&L in e}(e))return!1;var t=function(e){if(!q(e))return!1;var t=j(e);return t==G||t==U||t==H||t==z}(e)?oe:J;return t.test(function(e){if(null!=e){try{return Y.call(e)}catch{}try{return e+""}catch{}}return""}(e))}function re(e,t){var o=function(e,t){return null==e?void 0:e[t]}(e,t);return ne(o)?o:void 0}var le=Date.now;function ae(e){return function(){return e}}var ie=function(){try{var e=re(Object,"defineProperty");return e({},"",{}),e}catch{}}();const ce=ie;var ue=ce?function(e,t){return ce(e,"toString",{configurable:!0,enumerable:!1,value:ae(t),writable:!0})}:function(e){return e},pe=function(e){var t=0,o=0;return function(){var n=le(),r=16-(n-o);if(o=n,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ue);const se=pe;var de=9007199254740991,fe=/^(?:0|[1-9]\d*)$/;function me(e,t){var o=typeof e;return!!(t=t??de)&&("number"==o||"symbol"!=o&&fe.test(e))&&e>-1&&e%1==0&&e<t}function ye(e,t){return e===t||e!=e&&t!=t}var ve=Object.prototype.hasOwnProperty;function he(e,t,o){var n=e[t];(!ve.call(e,t)||!ye(n,o)||void 0===o&&!(t in e))&&function(e,t,o){"__proto__"==t&&ce?ce(e,t,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[t]=o}(e,t,o)}var ge=Math.max;var be=9007199254740991;function ke(e){return T(e)&&"[object Arguments]"==j(e)}var _e=Object.prototype,Be=_e.hasOwnProperty,Ee=_e.propertyIsEnumerable,xe=ke(function(){return arguments}())?ke:function(e){return T(e)&&Be.call(e,"callee")&&!Ee.call(e,"callee")};const Ce=xe;var Se=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pe=/^\w*$/;const Fe=re(Object,"create");var we=Object.prototype.hasOwnProperty;var Oe=Object.prototype.hasOwnProperty;function Ve(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}function Ie(e,t){for(var o=e.length;o--;)if(ye(e[o][0],t))return o;return-1}Ve.prototype.clear=function(){this.__data__=Fe?Fe(null):{},this.size=0},Ve.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ve.prototype.get=function(e){var t=this.__data__;if(Fe){var o=t[e];return"__lodash_hash_undefined__"===o?void 0:o}return we.call(t,e)?t[e]:void 0},Ve.prototype.has=function(e){var t=this.__data__;return Fe?void 0!==t[e]:Oe.call(t,e)},Ve.prototype.set=function(e,t){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=Fe&&void 0===t?"__lodash_hash_undefined__":t,this};var je=Array.prototype.splice;function Te(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}Te.prototype.clear=function(){this.__data__=[],this.size=0},Te.prototype.delete=function(e){var t=this.__data__,o=Ie(t,e);return!(o<0)&&(o==t.length-1?t.pop():je.call(t,o,1),--this.size,!0)},Te.prototype.get=function(e){var t=this.__data__,o=Ie(t,e);return o<0?void 0:t[o][1]},Te.prototype.has=function(e){return Ie(this.__data__,e)>-1},Te.prototype.set=function(e,t){var o=this.__data__,n=Ie(o,e);return n<0?(++this.size,o.push([e,t])):o[n][1]=t,this};const De=re(E,"Map");function Ne(e,t){var o=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?o["string"==typeof t?"string":"hash"]:o.map}function Ae(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}Ae.prototype.clear=function(){this.size=0,this.__data__={hash:new Ve,map:new(De||Te),string:new Ve}},Ae.prototype.delete=function(e){var t=Ne(this,e).delete(e);return this.size-=t?1:0,t},Ae.prototype.get=function(e){return Ne(this,e).get(e)},Ae.prototype.has=function(e){return Ne(this,e).has(e)},Ae.prototype.set=function(e,t){var o=Ne(this,e),n=o.size;return o.set(e,t),this.size+=o.size==n?0:1,this};var Ke="Expected a function";function Re(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Ke);var o=function(){var n=arguments,r=t?t.apply(this,n):n[0],l=o.cache;if(l.has(r))return l.get(r);var a=e.apply(this,n);return o.cache=l.set(r,a)||l,a};return o.cache=new(Re.Cache||Ae),o}Re.Cache=Ae;var Qe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$e=/\\(\\)?/g,qe=function(e){var t=Re(e,(function(e){return 500===o.size&&o.clear(),e})),o=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Qe,(function(e,o,n,r){t.push(n?r.replace($e,"$1"):o||e)})),t}));const He=qe;function Ge(e,t){return A(e)?e:function(e,t){if(A(e))return!1;var o=typeof e;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=e&&!N(e))||Pe.test(e)||!Se.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:He(function(e){return null==e?"":$(e)}(e))}var Ue=1/0;function ze(e){if("string"==typeof e||N(e))return e;var t=e+"";return"0"==t&&1/e==-Ue?"-0":t}function Me(e,t){for(var o=0,n=(t=Ge(t,e)).length;null!=e&&o<n;)e=e[ze(t[o++])];return o&&o==n?e:void 0}function We(e,t){for(var o=-1,n=t.length,r=e.length;++o<n;)e[r+o]=t[o];return e}var Le=x?x.isConcatSpreadable:void 0;function Ye(e){return A(e)||Ce(e)||!!(Le&&e&&e[Le])}function Je(e,t,o,n,r){var l=-1,a=e.length;for(o||(o=Ye),r||(r=[]);++l<a;){var i=e[l];t>0&&o(i)?t>1?Je(i,t-1,o,n,r):We(r,i):n||(r[r.length]=i)}return r}function Xe(e){return(null==e?0:e.length)?Je(e,1):[]}function Ze(e,t){return null!=e&&t in Object(e)}function et(e,t,o){for(var n=-1,r=(t=Ge(t,e)).length,l=!1;++n<r;){var a=ze(t[n]);if(!(l=null!=e&&o(e,a)))break;e=e[a]}return l||++n!=r?l:!!(r=null==e?0:e.length)&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=be}(r)&&me(a,r)&&(A(e)||Ce(e))}function tt(e,t,o,n){if(!q(e))return e;for(var r=-1,l=(t=Ge(t,e)).length,a=l-1,i=e;null!=i&&++r<l;){var c=ze(t[r]),u=o;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(r!=a){var p=i[c];void 0===(u=n?n(p,c,i):void 0)&&(u=q(p)?p:me(t[r+1])?[]:{})}he(i,c,u),i=i[c]}return e}function ot(e,t){return function(e,t,o){for(var n=-1,r=t.length,l={};++n<r;){var a=t[n],i=Me(e,a);o(i,a)&&tt(l,Ge(a,e),i)}return l}(e,t,(function(t,o){return function(e,t){return null!=e&&et(e,t,Ze)}(e,o)}))}var nt=function(e){return se(function(e,t,o){return t=ge(void 0===t?e.length-1:t,0),function(){for(var n=arguments,r=-1,l=ge(n.length-t,0),a=Array(l);++r<l;)a[r]=n[t+r];r=-1;for(var i=Array(t+1);++r<t;)i[r]=n[r];return i[t]=o(a),function(e,t,o){switch(o.length){case 0:return e.call(t);case 1:return e.call(t,o[0]);case 2:return e.call(t,o[0],o[1]);case 3:return e.call(t,o[0],o[1],o[2])}return e.apply(t,o)}(e,this,i)}}(e,void 0,Xe),e+"")}((function(e,t){return null==e?{}:ot(e,t)}));const rt=nt,lt={postfix:{type:[String,Object,Function]},as:{type:String}},at={...o.ElFormItem.props,prop:{type:[String,Array]}},it=Object.keys(at),ct={...o.ElSelect.props,...h,...lt,...at,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},filterMethod:{type:Function}},ut=Object.keys(o.ElSelect.props),pt=t.defineComponent({inheritAttrs:!1,name:"HSelect",components:{ElFormItem:o.ElFormItem,ElSelect:o.ElSelect,ElOptionGroup:o.ElOptionGroup,ElOption:o.ElOption},props:ct,setup(e,o){const n=y(e),r=t.computed((()=>rt(e,it))),l=t.computed((()=>rt(e,ut))),a=t.ref(""),i=t.computed((()=>{const t=a.value;return t?n.finalOption.value.filter(e.filterMethod.bind(null,t)):n.finalOption.value}));return{...n,formItemProps:r,selectProps:l,getNode:p,filterValue:a,customFilterMethod:e=>{a.value=e},filterSource:i}}}),st=(e,t)=>{const o=e.__vccOpts||e;for(const[e,n]of t)o[e]=n;return o},dt={key:0,class:"condition-item__postfix"};const ft=st(pt,[["render",function(e,o,n,r,l,a){const i=t.resolveComponent("ElOption"),c=t.resolveComponent("ElOptionGroup"),u=t.resolveComponent("ElSelect"),p=t.resolveComponent("ElFormItem");return t.openBlock(),t.createBlock(p,t.mergeProps({class:`condition-item condition-item--select condition-item--${e.field} condition-item--${!!e.postfix}`},e.formItemProps,{prop:e.formItemProps.prop||e.field}),{default:t.withCtx((()=>[t.createVNode(u,t.mergeProps(e.selectProps,{disabled:e.insetDisabled,"model-value":e.checked,"filter-method":e.filterMethod&&e.customFilterMethod,class:"condition-item__content","onUpdate:modelValue":e.change}),{default:t.withCtx((()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.filterSource,(o=>(t.openBlock(),t.createElementBlock(t.Fragment,{key:o[e.valueKey]},[o.group&&o.children?(t.openBlock(),t.createBlock(c,{key:0,label:o[e.labelKey]},{default:t.withCtx((()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(o.children,(o=>(t.openBlock(),t.createBlock(i,{key:o[e.valueKey],label:o[e.labelKey],value:o[e.valueKey]},null,8,["label","value"])))),128))])),_:2},1032,["label"])):(t.openBlock(),t.createBlock(i,{key:1,label:o[e.labelKey],value:o[e.valueKey]},null,8,["label","value"]))],64)))),128))])),_:1},16,["disabled","model-value","filter-method","onUpdate:modelValue"]),e.postfix?(t.openBlock(),t.createElementBlock("div",dt,["string"==typeof e.postfix?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(e.postfix),1)],64)):(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.getNode(e.postfix,e.checked)),{key:1}))])):t.createCommentVNode("",!0)])),_:1},16,["class","prop"])}]]),mt={...o.ElInput.props,...h,...lt,...at,realtime:{type:Boolean,default:!0},waitTime:{type:Number,default:300},clearable:{type:Boolean,default:!0}},yt=Object.keys(o.ElInput.props),vt=t.defineComponent({inheritAttrs:!1,name:"HInput",components:{ElFormItem:o.ElFormItem,ElInput:o.ElInput},props:mt,setup(e,o){const n=y(e),r=t.computed((()=>rt(e,it))),l=t.computed((()=>rt(e,yt)));let a=0;return{...n,formItemProps:r,inputProps:l,debounceChange:function(t){const{realtime:o,waitTime:r}=e;if(a&&clearTimeout(a),o)n.change(t);else{if(n.updateCheckedValue(t),!n.wrapper)return;a=setTimeout(n.wrapper.insetSearch,r)}},enterHandle:function(e){var t;a&&clearTimeout(a),n.checked.value=e.target.value,n.option.updateWrapperQuery(),null==(t=n.wrapper)||t.search()},getNode:p}}}),ht={key:0,class:"condition-item__postfix"};const gt=st(vt,[["render",function(e,o,n,r,l,a){const i=t.resolveComponent("ElInput"),c=t.resolveComponent("ElFormItem");return t.openBlock(),t.createBlock(c,t.mergeProps({class:`condition-item condition-item--input condition-item--${e.field} condition-item--${!!e.postfix}`},e.formItemProps,{prop:e.formItemProps.prop||e.field}),{default:t.withCtx((()=>[t.createVNode(i,t.mergeProps(e.inputProps,{disabled:e.insetDisabled,"model-value":e.checked,class:"condition-item__content",onInput:e.debounceChange,onKeydown:t.withKeys(e.enterHandle,["enter"])}),null,16,["disabled","model-value","onInput","onKeydown"]),e.postfix?(t.openBlock(),t.createElementBlock("div",ht,["string"==typeof e.postfix?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(e.postfix),1)],64)):(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.getNode(e.postfix,e.checked)),{key:1}))])):t.createCommentVNode("",!0)])),_:1},16,["class","prop"])}]]),bt={...o.ElDatePicker.props,...h,...lt,...at,valueFormat:{type:String,default:"YYYY-MM-DD"},beginField:{type:String},endField:{type:String}},kt=/range$/;const _t=Object.keys(o.ElDatePicker.props),Bt=t.defineComponent({inheritAttrs:!1,name:"HDatepicker",components:{ElFormItem:o.ElFormItem,ElDatePicker:o.ElDatePicker},props:bt,setup(e,o){const{multiple:n,fields:r,...l}=t.toRefs(e),a=t.computed((()=>void 0!==e.multiple?e.multiple:function(e){return!!e&&kt.test(e)}(e.type))),i=t.computed((()=>e.fields||(a.value&&e.beginField&&e.endField?[e.beginField,e.endField]:void 0)));return{...y(t.reactive({...l,multiple:a,fields:i})),formItemProps:t.computed((()=>rt(e,it))),datepickerProps:t.computed((()=>rt(e,_t))),isMultiple:a,getNode:p}}}),Et={key:0,class:"condition-item__postfix"};const xt=st(Bt,[["render",function(e,o,n,r,l,a){const i=t.resolveComponent("ElDatePicker"),c=t.resolveComponent("ElFormItem");return t.openBlock(),t.createBlock(c,t.mergeProps({class:`condition-item condition-item--datepicker ${e.isMultiple&&"condition-item--datepicker-range"} condition-item--${e.field} condition-item--${!!e.postfix}`},e.formItemProps,{prop:e.formItemProps.prop||e.field}),{default:t.withCtx((()=>[t.createVNode(i,t.mergeProps(e.datepickerProps,{disabled:e.insetDisabled,"model-value":e.checked,class:"condition-item__content","onUpdate:modelValue":e.change}),null,16,["disabled","model-value","onUpdate:modelValue"]),e.postfix?(t.openBlock(),t.createElementBlock("div",Et,["string"==typeof e.postfix?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(e.postfix),1)],64)):(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.getNode(e.postfix,e.checked)),{key:1}))])):t.createCommentVNode("",!0)])),_:1},16,["class","prop"])}]]),Ct={...o.ElCascader.props,...k,...lt,...at,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0}},St=Object.keys(o.ElCascader.props),Pt=t.defineComponent({inheritAttrs:!1,name:"HCascader",components:{ElFormItem:o.ElFormItem,ElCascader:o.ElCascader},props:Ct,setup:(e,o)=>({...b(e),formItemProps:t.computed((()=>rt(e,it))),cascaderProps:t.computed((()=>rt(e,St))),getNode:p})}),Ft={key:0,class:"condition-item__postfix"};const wt=st(Pt,[["render",function(e,o,n,r,l,a){const i=t.resolveComponent("ElCascader"),c=t.resolveComponent("ElFormItem");return t.openBlock(),t.createBlock(c,t.mergeProps({class:`condition-item condition-item--cascader condition-item--${e.field} condition-item--${!!e.postfix}`},e.formItemProps,{prop:e.formItemProps.prop||e.field}),{default:t.withCtx((()=>[t.createVNode(i,t.mergeProps(e.cascaderProps,{disabled:e.insetDisabled,options:e.finalOption,"model-value":e.checked,class:"condition-item__content","onUpdate:modelValue":e.change}),null,16,["disabled","options","model-value","onUpdate:modelValue"]),e.postfix?(t.openBlock(),t.createElementBlock("div",Ft,["string"==typeof e.postfix?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(e.postfix),1)],64)):(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.getNode(e.postfix,e.checked)),{key:1}))])):t.createCommentVNode("",!0)])),_:1},16,["class","prop"])}]]),Ot={...o.ElRadioGroup.props,...h,...lt,...at,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},type:{type:String},cancelable:{type:Boolean,default:void 0}},Vt=Object.keys(o.ElRadioGroup.props),It=t.defineComponent({inheritAttrs:!1,name:"HRadio",components:{ElFormItem:o.ElFormItem,ElRadioGroup:o.ElRadioGroup,ElRadioButton:o.ElRadioButton,ElRadio:o.ElRadio},props:Ot,setup:(e,o)=>({...y(e),formItemProps:t.computed((()=>rt(e,it))),radioProps:t.computed((()=>rt(e,Vt))),radioGroupRef:t.ref(),radioType:t.computed((()=>"button"===e.type?"ElRadioButton":"ElRadio")),eventName:t.computed((()=>e.cancelable?"click":null)),customChange:function(e,t,o){o(e===t?"":e)},getNode:p})}),jt={key:0,class:"condition-item__postfix"};const Tt=st(It,[["render",function(e,o,n,r,l,a){const i=t.resolveComponent("ElRadioGroup"),c=t.resolveComponent("ElFormItem");return t.openBlock(),t.createBlock(c,t.mergeProps({class:`condition-item condition-item--radio condition-item--${e.field} condition-item--${!!e.postfix}`},e.formItemProps,{prop:e.formItemProps.prop||e.field}),{default:t.withCtx((()=>[t.createVNode(i,t.mergeProps({ref:"radioGroupRef"},e.radioProps,{disabled:e.insetDisabled,"model-value":e.checked,class:"condition-item__content","onUpdate:modelValue":e.change}),{default:t.withCtx((()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.finalOption,(o=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.radioType),t.mergeProps({key:o[e.valueKey],label:o[e.valueKey]},{[t.toHandlerKey(e.eventName)]:t.withModifiers((t=>e.customChange(o[e.valueKey],e.checked,e.change)),["prevent"])}),{default:t.withCtx((()=>[t.createTextVNode(t.toDisplayString(o[e.labelKey]),1)])),_:2},1040,["label"])))),128))])),_:1},16,["disabled","model-value","onUpdate:modelValue"]),e.postfix?(t.openBlock(),t.createElementBlock("div",jt,["string"==typeof e.postfix?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(e.postfix),1)],64)):(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.getNode(e.postfix,e.checked)),{key:1}))])):t.createCommentVNode("",!0)])),_:1},16,["class","prop"])}]]),Dt={...o.ElCheckbox.props,...h,...lt,...at,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},type:{type:String},multiple:{type:Boolean,default:!0}},Nt=Object.keys(o.ElCheckbox.props),At=t.defineComponent({inheritAttrs:!1,name:"HCheckbox",components:{ElFormItem:o.ElFormItem,ElCheckboxGroup:o.ElCheckboxGroup,ElCheckboxButton:o.ElCheckboxButton,ElCheckbox:o.ElCheckbox},props:Dt,setup(e,o){const n=t.ref(),r=t.computed((()=>"button"===e.type?"ElCheckboxButton":"ElCheckbox"));return{...y(e),formItemProps:t.computed((()=>rt(e,it))),checkboxProps:t.computed((()=>rt(e,Nt))),checkboxGroupRef:n,checkboxType:r,getNode:p}}}),Kt={key:0,class:"condition-item__postfix"};const Rt=st(At,[["render",function(e,o,n,r,l,a){const i=t.resolveComponent("ElCheckboxGroup"),c=t.resolveComponent("ElFormItem");return t.openBlock(),t.createBlock(c,t.mergeProps({class:`condition-item condition-item--checkbox condition-item--${e.field} condition-item--${!!e.postfix}`},e.formItemProps,{prop:e.formItemProps.prop||e.field}),{default:t.withCtx((()=>[t.createVNode(i,t.mergeProps(e.checkboxProps,{disabled:e.insetDisabled,"model-value":e.checked,ref:"checkboxGroupRef",class:"condition-item__content","onUpdate:modelValue":e.change}),{default:t.withCtx((()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.finalOption,(o=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.checkboxType),{key:o[e.valueKey],label:o[e.valueKey]},{default:t.withCtx((()=>[t.createTextVNode(t.toDisplayString(o[e.labelKey]),1)])),_:2},1032,["label"])))),128))])),_:1},16,["disabled","model-value","onUpdate:modelValue"]),e.postfix?(t.openBlock(),t.createElementBlock("div",Kt,["string"==typeof e.postfix?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(e.postfix),1)],64)):(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.getNode(e.postfix,e.checked)),{key:1}))])):t.createCommentVNode("",!0)])),_:1},16,["class","prop"])}]]),Qt=Object.keys(o.ElForm.props).concat("class","style"),$t={...o.ElForm.props,...i,class:{type:[Object,Array,String]},style:{type:[Object,Array,String]},datum:{type:Object,default:()=>({})},resetToInitialValue:{type:Boolean},immediateSearch:{type:Boolean},renderBtn:{type:Boolean,default:!0},resetTriggerSearch:{type:Boolean},searchText:{type:String,default:"搜索"},resetText:{type:String,default:"重置"}},qt={search:e=>!0,ready:e=>!0,reset:e=>!0},Ht={select:t.markRaw(ft),input:t.markRaw(gt),datepicker:t.markRaw(xt),cascader:t.markRaw(wt),radio:t.markRaw(Tt),checkbox:t.markRaw(Rt)},Gt={};function Ut(e){return e?Gt[e]||Ht[e]:{...Ht,...Gt}}const zt=t.defineComponent({name:"HWrapper",inheritAttrs:!1,components:{ElForm:o.ElForm,ElButton:o.ElButton},props:$t,emits:qt,setup(e,o){const n=t.computed((()=>rt(e,Qt))),r=t.ref(),l=o.emit.bind(o,"search"),i=o.emit.bind(o,"reset"),c=a({...e,search:l,reset:i});return t.onMounted((()=>{e.immediateSearch&&o.emit("ready",c.getQuery())})),{...c,rootProps:n,formRef:r,getComponent:Ut,resetAndSearch:function(){c.reset(),c.search()}}}});const Mt=st(zt,[["render",function(e,o,n,r,l,a){const i=t.resolveComponent("ElButton"),c=t.resolveComponent("ElForm");return t.openBlock(),t.createBlock(c,t.mergeProps(e.rootProps,{ref:"formRef",model:e.query}),{default:t.withCtx((()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.datum,((o,n)=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.getComponent(o.t)),t.mergeProps({key:n},o,{field:o.as||n,resetToInitialValue:e.resetToInitialValue,backfill:e.backfill,query:e.query}),null,16,["field","resetToInitialValue","backfill","query"])))),128)),t.renderSlot(e.$slots,"btn",{search:e.search,reset:e.reset,resetAndSearch:e.resetAndSearch},(()=>[e.renderBtn?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createVNode(i,{size:e.size,onClick:e.search},{default:t.withCtx((()=>[t.createTextVNode(t.toDisplayString(e.searchText),1)])),_:1},8,["size","onClick"]),t.createVNode(i,{size:e.size,onClick:o[0]||(o[0]=t=>e.resetTriggerSearch?e.resetAndSearch():e.reset())},{default:t.withCtx((()=>[t.createTextVNode(t.toDisplayString(e.resetText),1)])),_:1},8,["size"])],64)):t.createCommentVNode("",!0)]))])),_:3},16,["model"])}]]);e.HCascader=wt,e.HCheckbox=Rt,e.HDatePicker=xt,e.HInput=gt,e.HRadio=Tt,e.HSelect=ft,e.HWrapper=Mt,e.cascaderProps=Ct,e.checkboxProps=Dt,e.commonProps=lt,e.datepickerProps=bt,e.defineCondition=function(e){return t.reactive(e)},e.formItemPropKeys=it,e.formItemProps=at,e.formPropKeys=Qt,e.getComponent=Ut,e.inputProps=mt,e.provideKey=l,e.radioProps=Ot,e.registerComponent=function(e,o){Gt[e]=t.markRaw(o)},e.selectProps=ct,e.unregisterComponent=function(e){delete Gt[e]},e.wrapperEmits=qt,e.wrapperProps=$t,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
//# sourceMappingURL=index.umd.min.js.map
