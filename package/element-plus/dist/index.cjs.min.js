"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),t=require("element-plus");function o(e,t){Array.isArray(e)?e.splice(t,1):delete e[t]}const r="2.7"===e.version.slice(0,3),n="condition-wrapper";function l(t){const l=[];e.onBeforeUnmount((()=>l.splice(0)));const a={};let i=!1,c=[];const u={realtime:e.ref(t.realtime),register(n){l.push(n);const u=()=>{i=!0,n.reset(),n.updateWrapperQuery();const e=l.indexOf(n);-1!==e&&l.splice(e,1),t.searchAtDatumChanged&&d(),i=!1,c.forEach((e=>{o(p.value,e),delete a[e]})),c=[]},s=e.getCurrentInstance();return s&&e.onBeforeUnmount(u,r?s.proxy:s),u},updateQueryValue(e,t){i&&c.push(e),function(e,t,o){Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,o)):e[t]=o}(p.value,e,t),a[e]=t},insetSearch(){t.realtime&&d()},search:d,removeUnreferencedField(e){let t=0;l.some((o=>(o.getQuery().hasOwnProperty(e)&&(t+=1),t))),t||(o(p.value,e),delete a[e])}};e.provide(n,u);const p=e.ref({...t.backfill}),s=()=>({...p.value,...t.backfill,...a});async function d(){var e,o;const r=await f();r?null==(e=t.toast)||e.call(t,r):null==(o=t.search)||o.call(t,s())}async function f(){return(await Promise.all(l.map((e=>{var t;return null==(t=e.validator)?void 0:t.call(e,p.value)})))).find((e=>e&&"string"==typeof e))}return{child:l,wrapperInstance:u,query:p,getQuery:s,search:d,reset:function(){var e;l.forEach((e=>{e.reset(),e.updateWrapperQuery()})),null==(e=t.reset)||e.call(t,s())},validate:f}}const a={realtime:{type:Boolean,default:void 0},searchAtDatumChanged:{type:Boolean,default:void 0},backfill:{type:Object},toast:{type:Function,default:void 0}};function i(e,t){return Array.isArray(e)?e.filter(Boolean).length?e:t:"number"==typeof e?e:e||t}function c(e,t,o="children"){var r;for(const n of e){if(t(n))return[n];if(null!=(r=n[o])&&r.length){const e=c(n[o],t);if(e.length)return e.unshift(n),e}}return[]}function u(t,...o){return"function"==typeof t?t(...o):"string"==typeof t?t:e.markRaw(t)}function p(t){const o=e.ref();return e.computed({set(e){o.value=e},get:()=>void 0===o.value?void 0!==t.defaultValue?"function"==typeof t.defaultValue?t.defaultValue(t.query,t.backfill):t.defaultValue:void 0:o.value})}function s(t,o){const r=e.ref("boolean"==typeof t.disabled&&t.disabled),n=e.ref("boolean"==typeof t.hide&&t.hide),l=()=>({query:t.query,backfill:t.backfill,option:o}),a=()=>{if("function"==typeof t.hide){n.value!==t.hide(l())&&(n.value=t.hide(l()))}else if("function"==typeof t.disabled){r.value!==t.disabled(l())&&(r.value=t.disabled(l()))}};let i=[e.watch((()=>t.query),a,{immediate:!0,deep:!0}),e.watch((()=>[t.disabled,t.hide]),((e,t)=>{e[0]!==t[0]&&(r.value="boolean"==typeof e[0]&&e[0],e[0]),e[1]!==t[1]&&(n.value="boolean"==typeof e[1]&&e[1],e[1]),a()}))];return e.onBeforeUnmount((()=>(i.forEach((e=>e())),i=[]))),{insetDisabled:r,insetHide:n}}function d(t=!0){const o=e.ref(t);return{flag:o,updateFlag:()=>{o.value=!t,e.nextTick((()=>{o.value=t}))}}}function f(e){return(null==e?void 0:e.toString())??""}function m(t){var o;const r=e.inject(n),l=p(t),a=t.backfill&&(null!=(o=t.fields)&&o.length?t.fields.map((e=>t.backfill[e])).filter(Boolean):t.backfill[t.field]),c=e.ref(a||(void 0!==t.defaultValue?l.value:t.multiple?[]:"").slice()),u=e.ref([]),m=e.computed((()=>u.value.length?u.value:t.options)),y=()=>t.customGetQuery?t.customGetQuery(c.value,i,t):t.multiple&&t.fields?t.fields.reduce(((e,o,r)=>{var n;return e[o]=i(null==(n=c.value)?void 0:n[r],t.emptyValue),e}),{}):{[t.field]:i(c.value,t.emptyValue)},{flag:v,updateFlag:h}=d(),{flag:g,updateFlag:k}=d(),b={reset(){var e;const{multiple:o}=t;h(),k(),c.value=t.resetToInitialValue&&(null==(e=l.value)?void 0:e.slice())||(o?[]:"")},updateWrapperQuery(){h(),r&&Object.entries(y()).forEach((([e,t])=>r.updateQueryValue(e,t)))},get validator(){return t.validator},getQuery:y};null==r||r.register(b);const{insetDisabled:x,insetHide:_}=s(t,b);!a&&t.defaultValue&&b.updateWrapperQuery();const B=[];function E(e){var o;null==(o=t.getOptions)||o.call(t,(e=>{const t=c.value;c.value=void 0,u.value=e||[],c.value=t}),t.query||{},{trigger:e,change:(e,t)=>{t&&(l.value=e),S(e)},search:(e,t)=>{t&&(l.value=e),C(e),null==r||r.search()}})}function C(e){e!==c.value&&(c.value=e,b.updateWrapperQuery())}function S(e){C(e),null==r||r.insetSearch()}return e.onBeforeUnmount((()=>B.forEach((e=>e())))),B.push(e.watch((()=>t.field),((e,t)=>{e!==t&&(null==r||r.removeUnreferencedField(t)),b.updateWrapperQuery()}))),B.push(e.watch((()=>[t.fields||t.field,t.fields?t.fields.map((e=>t.query[e])).filter(Boolean):t.query[t.field]]),(([e,o],[r])=>{const n=t.backfillToValue(o,e,t.query);e.toString()!==r.toString()||f(n)===f(c.value)||v.value&&(c.value=n)}))),B.push(e.watch((()=>{var e;return[t.fields||t.field,t.fields?t.fields.map((e=>{var o;return null==(o=t.backfill)?void 0:o[e]})).filter(Boolean):null==(e=t.backfill)?void 0:e[t.field]]}),(([e,o],[r])=>{const n=t.backfillToValue(o,e,t.backfill);e.toString()!==r.toString()||f(n)===f(c.value)||(k(),C(n))}))),B.push(e.watch((()=>[t.depend,t.dependFields,t.dependFields&&[].concat(t.dependFields).map((e=>{var o;return null==(o=t.query)?void 0:o[e]})).join(",")||""]),(([e,o,r],[n,l,a])=>{g.value&&r!==a&&(E("depend"),e===n&&(null==o?void 0:o.toString())===(null==l?void 0:l.toString())&&(void 0===c.value||""===c.value.toString()||C(t.multiple?[]:"")))}))),B.push(e.watch((()=>t.getOptions),E.bind(null,"initial"),{immediate:!0})),{wrapper:r,option:b,checked:c,getQuery:y,insetDisabled:x,insetHide:_,finalOption:m,updateCheckedValue:C,change:S,reset:b.reset}}const y={field:{type:String,required:!0},query:{type:Object,required:!0},backfill:{type:Object},disabled:{type:[Boolean,Function]},hide:{type:[Boolean,Function]},depend:{type:Boolean},dependFields:{type:[String,Array]},resetToInitialValue:{type:[Boolean]},emptyValue:{type:[String,Number,null,void 0]},validator:{type:[Function]},customGetQuery:{type:Function},defaultValue:{type:[String,Array,Function]}},v={...y,fields:{type:[Array]},backfillToValue:{type:Function,default:e=>e},multiple:{type:Boolean,default:void 0},options:{type:Array,default:()=>[]},getOptions:{type:Function}};function h(e){return(null==e?void 0:e.toString())??""}function g(t){var o;const r=e.inject(n),l=p(t),a=e.ref([]),u=e.ref([]),f=e.computed((()=>u.value.length?u.value:t.options)),m=()=>{var e;return E.value||l.value?t.customGetQuery?t.customGetQuery(a.value,i,t):null!=(e=t.fields)&&e.length?t.fields.reduce(((e,o,r)=>Object.assign(e,{[o]:i(a.value[r],t.emptyValue)})),{}):{[t.field]:i(t.emitPath?[...a.value]:a.value.slice(-1)[0],t.emptyValue)}:{}},{flag:y,updateFlag:v}=d(),{flag:g,updateFlag:k}=d(),b={reset(){var e;return v(),k(),a.value=t.resetToInitialValue&&(null==(e=l.value)?void 0:e.slice())||[],this},get validator(){return t.validator},updateWrapperQuery(){v(),r&&Object.entries(m()).forEach((([e,t])=>r.updateQueryValue(e,t)))},getQuery:m};null==r||r.register(b);const{insetDisabled:x,insetHide:_}=s(t,b),B=[];e.onBeforeUnmount((()=>B.forEach((e=>e()))));const E=e.ref("function"!=typeof t.getOptions||!(null==(o=t.fields)||!o.length));function C(e){var o;null==(o=t.getOptions)||o.call(t,(e=>{u.value=e||[],E.value=!0}),t.query||{},{trigger:e,change:(e,t)=>{t&&(l.value=e),P(e)},search:(e,t)=>{t&&(l.value=e),S(e),null==r||r.search()}})}function S(e){const t=Array.isArray(e)?e:F(e);t.join("")!==a.value.join("")&&(a.value=t,b.updateWrapperQuery())}function P(e){S(e||[]),null==r||r.insetSearch()}function F(e){if(!e&&0!==e)return[];const{valueKey:o,childrenKey:r}=t;return c(f.value,(t=>t[o]===e)).map((e=>e[o]),r).filter(Boolean)}return e.watch(E,(e=>e&&function(){var e;const{backfill:o,field:r,fields:n}=t;if(o)if(n){const e=n.reduce(((e,t)=>(o[t]&&e.push(o[t]),e)),[]);if(e.length)return a.value=e,void b.updateWrapperQuery()}else if(o[r])return a.value=F(o[r]),void b.updateWrapperQuery();null!=(e=l.value)&&e.length&&(a.value="string"==typeof l.value?F(l.value):l.value.slice(),"string"==typeof l.value&&(l.value=a.value.slice()),b.updateWrapperQuery())}()),{immediate:!0}),B.push(e.watch((()=>t.fields||[t.field]),((e,t)=>{e.toString()!==t.toString()&&r&&t.forEach((t=>e.includes(t)||r.removeUnreferencedField(t))),b.updateWrapperQuery()}))),B.push(e.watch((()=>{var e,o;return[(null==(e=t.fields)?void 0:e.toString())||t.field,(null==(o=t.fields)?void 0:o.map((e=>t.query[e])).filter(Boolean))||t.query[t.field]]}),(([e,t],[o,r])=>{e!==o||h(t)===h(r)||y.value&&(a.value="string"==typeof t?F(t):t)}))),B.push(e.watch((()=>{var e,o;return null!=(e=t.fields)&&e.length?t.fields.reduce(((e,o)=>{var r;return null!=(r=t.backfill)&&r[o]&&e.push(t.backfill[o]),e}),[]):null==(o=t.backfill)?void 0:o[t.field]}),((e,t)=>{if(E.value&&h(e)!==h(t))if(k(),Array.isArray(e))S(e);else{if(!e&&0!==e)return void(a.value.length&&(a.value=[]));S(F(e))}}))),B.push(e.watch((()=>[t.depend,t.dependFields,t.dependFields&&[].concat(t.dependFields).map((e=>{var o;return null==(o=t.query)?void 0:o[e]})).join(",")||""]),(([e,t,o],[r,n,l])=>{g.value&&o!==l&&(C("depend"),e===r&&(null==t?void 0:t.toString())===(null==n?void 0:n.toString())&&a.value.length&&S("string"==typeof a.value?"":[]))}))),B.push(e.watch((()=>t.getOptions),C.bind(null,"initial"),{immediate:!0})),{wrapper:r,option:b,checked:a,getQuery:m,finalOption:f,insetDisabled:x,insetHide:_,change:P,reset:b.reset}}const k={...y,fields:{type:[Array]},valueKey:{type:String,required:!0},childrenKey:{type:String},emitPath:{type:[Boolean],default:!1},options:{type:Array,default:()=>[]},getOptions:{type:Function}};const b="object"==typeof global&&global&&global.Object===Object&&global;var x="object"==typeof self&&self&&self.Object===Object&&self;const _=b||x||Function("return this")();const B=_.Symbol;var E=Object.prototype,C=E.hasOwnProperty,S=E.toString,P=B?B.toStringTag:void 0;var F=Object.prototype.toString;var w="[object Null]",O="[object Undefined]",V=B?B.toStringTag:void 0;function I(e){return null==e?void 0===e?O:w:V&&V in Object(e)?function(e){var t=C.call(e,P),o=e[P];try{e[P]=void 0;var r=!0}catch{}var n=S.call(e);return r&&(t?e[P]=o:delete e[P]),n}(e):function(e){return F.call(e)}(e)}function j(e){return null!=e&&"object"==typeof e}var D="[object Symbol]";function N(e){return"symbol"==typeof e||j(e)&&I(e)==D}const A=Array.isArray;var T=1/0,K=B?B.prototype:void 0,R=K?K.toString:void 0;function Q(e){if("string"==typeof e)return e;if(A(e))return function(e,t){for(var o=-1,r=null==e?0:e.length,n=Array(r);++o<r;)n[o]=t(e[o],o,e);return n}(e,Q)+"";if(N(e))return R?R.call(e):"";var t=e+"";return"0"==t&&1/e==-T?"-0":t}function $(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var q="[object AsyncFunction]",H="[object Function]",G="[object GeneratorFunction]",U="[object Proxy]";const z=_["__core-js_shared__"];var M,W=(M=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"";var L=Function.prototype.toString;var Y=/^\[object .+?Constructor\]$/,J=Function.prototype,X=Object.prototype,Z=J.toString,ee=X.hasOwnProperty,te=RegExp("^"+Z.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function oe(e){if(!$(e)||function(e){return!!W&&W in e}(e))return!1;var t=function(e){if(!$(e))return!1;var t=I(e);return t==H||t==G||t==q||t==U}(e)?te:Y;return t.test(function(e){if(null!=e){try{return L.call(e)}catch{}try{return e+""}catch{}}return""}(e))}function re(e,t){var o=function(e,t){return null==e?void 0:e[t]}(e,t);return oe(o)?o:void 0}var ne=Date.now;function le(e){return function(){return e}}var ae=function(){try{var e=re(Object,"defineProperty");return e({},"",{}),e}catch{}}();const ie=ae;var ce=ie?function(e,t){return ie(e,"toString",{configurable:!0,enumerable:!1,value:le(t),writable:!0})}:function(e){return e};var ue=function(e){var t=0,o=0;return function(){var r=ne(),n=16-(r-o);if(o=r,n>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ce);const pe=ue;var se=9007199254740991,de=/^(?:0|[1-9]\d*)$/;function fe(e,t){var o=typeof e;return!!(t=t??se)&&("number"==o||"symbol"!=o&&de.test(e))&&e>-1&&e%1==0&&e<t}function me(e,t){return e===t||e!=e&&t!=t}var ye=Object.prototype.hasOwnProperty;function ve(e,t,o){var r=e[t];(!ye.call(e,t)||!me(r,o)||void 0===o&&!(t in e))&&function(e,t,o){"__proto__"==t&&ie?ie(e,t,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[t]=o}(e,t,o)}var he=Math.max;var ge=9007199254740991;function ke(e){return j(e)&&"[object Arguments]"==I(e)}var be=Object.prototype,xe=be.hasOwnProperty,_e=be.propertyIsEnumerable,Be=ke(function(){return arguments}())?ke:function(e){return j(e)&&xe.call(e,"callee")&&!_e.call(e,"callee")};const Ee=Be;var Ce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Se=/^\w*$/;const Pe=re(Object,"create");var Fe=Object.prototype.hasOwnProperty;var we=Object.prototype.hasOwnProperty;function Oe(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}function Ve(e,t){for(var o=e.length;o--;)if(me(e[o][0],t))return o;return-1}Oe.prototype.clear=function(){this.__data__=Pe?Pe(null):{},this.size=0},Oe.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Oe.prototype.get=function(e){var t=this.__data__;if(Pe){var o=t[e];return"__lodash_hash_undefined__"===o?void 0:o}return Fe.call(t,e)?t[e]:void 0},Oe.prototype.has=function(e){var t=this.__data__;return Pe?void 0!==t[e]:we.call(t,e)},Oe.prototype.set=function(e,t){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=Pe&&void 0===t?"__lodash_hash_undefined__":t,this};var Ie=Array.prototype.splice;function je(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}je.prototype.clear=function(){this.__data__=[],this.size=0},je.prototype.delete=function(e){var t=this.__data__,o=Ve(t,e);return!(o<0)&&(o==t.length-1?t.pop():Ie.call(t,o,1),--this.size,!0)},je.prototype.get=function(e){var t=this.__data__,o=Ve(t,e);return o<0?void 0:t[o][1]},je.prototype.has=function(e){return Ve(this.__data__,e)>-1},je.prototype.set=function(e,t){var o=this.__data__,r=Ve(o,e);return r<0?(++this.size,o.push([e,t])):o[r][1]=t,this};const De=re(_,"Map");function Ne(e,t){var o=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?o["string"==typeof t?"string":"hash"]:o.map}function Ae(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}Ae.prototype.clear=function(){this.size=0,this.__data__={hash:new Oe,map:new(De||je),string:new Oe}},Ae.prototype.delete=function(e){var t=Ne(this,e).delete(e);return this.size-=t?1:0,t},Ae.prototype.get=function(e){return Ne(this,e).get(e)},Ae.prototype.has=function(e){return Ne(this,e).has(e)},Ae.prototype.set=function(e,t){var o=Ne(this,e),r=o.size;return o.set(e,t),this.size+=o.size==r?0:1,this};var Te="Expected a function";function Ke(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Te);var o=function(){var r=arguments,n=t?t.apply(this,r):r[0],l=o.cache;if(l.has(n))return l.get(n);var a=e.apply(this,r);return o.cache=l.set(n,a)||l,a};return o.cache=new(Ke.Cache||Ae),o}Ke.Cache=Ae;var Re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qe=/\\(\\)?/g,$e=function(e){var t=Ke(e,(function(e){return 500===o.size&&o.clear(),e})),o=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Re,(function(e,o,r,n){t.push(r?n.replace(Qe,"$1"):o||e)})),t}));const qe=$e;function He(e,t){return A(e)?e:function(e,t){if(A(e))return!1;var o=typeof e;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=e&&!N(e))||Se.test(e)||!Ce.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:qe(function(e){return null==e?"":Q(e)}(e))}var Ge=1/0;function Ue(e){if("string"==typeof e||N(e))return e;var t=e+"";return"0"==t&&1/e==-Ge?"-0":t}function ze(e,t){for(var o=0,r=(t=He(t,e)).length;null!=e&&o<r;)e=e[Ue(t[o++])];return o&&o==r?e:void 0}function Me(e,t){for(var o=-1,r=t.length,n=e.length;++o<r;)e[n+o]=t[o];return e}var We=B?B.isConcatSpreadable:void 0;function Le(e){return A(e)||Ee(e)||!!(We&&e&&e[We])}function Ye(e,t,o,r,n){var l=-1,a=e.length;for(o||(o=Le),n||(n=[]);++l<a;){var i=e[l];t>0&&o(i)?t>1?Ye(i,t-1,o,r,n):Me(n,i):r||(n[n.length]=i)}return n}function Je(e){return(null==e?0:e.length)?Ye(e,1):[]}function Xe(e,t){return null!=e&&t in Object(e)}function Ze(e,t,o){for(var r=-1,n=(t=He(t,e)).length,l=!1;++r<n;){var a=Ue(t[r]);if(!(l=null!=e&&o(e,a)))break;e=e[a]}return l||++r!=n?l:!!(n=null==e?0:e.length)&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=ge}(n)&&fe(a,n)&&(A(e)||Ee(e))}function et(e,t,o,r){if(!$(e))return e;for(var n=-1,l=(t=He(t,e)).length,a=l-1,i=e;null!=i&&++n<l;){var c=Ue(t[n]),u=o;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(n!=a){var p=i[c];void 0===(u=r?r(p,c,i):void 0)&&(u=$(p)?p:fe(t[n+1])?[]:{})}ve(i,c,u),i=i[c]}return e}function tt(e,t){return function(e,t,o){for(var r=-1,n=t.length,l={};++r<n;){var a=t[r],i=ze(e,a);o(i,a)&&et(l,He(a,e),i)}return l}(e,t,(function(t,o){return function(e,t){return null!=e&&Ze(e,t,Xe)}(e,o)}))}var ot=function(e){return pe(function(e,t,o){return t=he(void 0===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,l=he(r.length-t,0),a=Array(l);++n<l;)a[n]=r[t+n];n=-1;for(var i=Array(t+1);++n<t;)i[n]=r[n];return i[t]=o(a),function(e,t,o){switch(o.length){case 0:return e.call(t);case 1:return e.call(t,o[0]);case 2:return e.call(t,o[0],o[1]);case 3:return e.call(t,o[0],o[1],o[2])}return e.apply(t,o)}(e,this,i)}}(e,void 0,Je),e+"")}((function(e,t){return null==e?{}:tt(e,t)}));const rt=ot,nt={postfix:{type:[String,Object,Function]},as:{type:String}},lt={...t.ElFormItem.props,prop:{type:[String,Array]}},at=Object.keys(lt),it={...t.ElSelect.props,...v,...nt,...lt,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},filterMethod:{type:Function}},ct=Object.keys(t.ElSelect.props),ut=e.defineComponent({inheritAttrs:!1,name:"HSelect",components:{ElFormItem:t.ElFormItem,ElSelect:t.ElSelect,ElOptionGroup:t.ElOptionGroup,ElOption:t.ElOption},props:it,setup(t,o){const r=m(t),n=e.computed((()=>rt(t,at))),l=e.computed((()=>rt(t,ct))),a=e.ref(""),i=e.computed((()=>{const e=a.value;return e?r.finalOption.value.filter(t.filterMethod.bind(null,e)):r.finalOption.value}));return{...r,formItemProps:n,selectProps:l,getNode:u,filterValue:a,customFilterMethod:e=>{a.value=e},filterSource:i}}}),pt=(e,t)=>{const o=e.__vccOpts||e;for(const[e,r]of t)o[e]=r;return o},st={key:0,class:"condition-item__postfix"};const dt=pt(ut,[["render",function(t,o,r,n,l,a){const i=e.resolveComponent("ElOption"),c=e.resolveComponent("ElOptionGroup"),u=e.resolveComponent("ElSelect"),p=e.resolveComponent("ElFormItem");return e.openBlock(),e.createBlock(p,e.mergeProps({class:`condition-item condition-item--select condition-item--${t.field} condition-item--${!!t.postfix}`},t.formItemProps,{prop:t.formItemProps.prop||t.field}),{default:e.withCtx((()=>[e.createVNode(u,e.mergeProps(t.selectProps,{disabled:t.insetDisabled,"model-value":t.checked,"filter-method":t.filterMethod&&t.customFilterMethod,class:"condition-item__content","onUpdate:modelValue":t.change}),{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.filterSource,(o=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:o[t.valueKey]},[o.group&&o.children?(e.openBlock(),e.createBlock(c,{key:0,label:o[t.labelKey]},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.children,(o=>(e.openBlock(),e.createBlock(i,{key:o[t.valueKey],label:o[t.labelKey],value:o[t.valueKey]},null,8,["label","value"])))),128))])),_:2},1032,["label"])):(e.openBlock(),e.createBlock(i,{key:1,label:o[t.labelKey],value:o[t.valueKey]},null,8,["label","value"]))],64)))),128))])),_:1},16,["disabled","model-value","filter-method","onUpdate:modelValue"]),t.postfix?(e.openBlock(),e.createElementBlock("div",st,["string"==typeof t.postfix?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(t.postfix),1)],64)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.getNode(t.postfix,t.checked)),{key:1}))])):e.createCommentVNode("",!0)])),_:1},16,["class","prop"])}]]),ft={...t.ElInput.props,...v,...nt,...lt,realtime:{type:Boolean,default:!0},waitTime:{type:Number,default:300},clearable:{type:Boolean,default:!0}},mt=Object.keys(t.ElInput.props),yt=e.defineComponent({inheritAttrs:!1,name:"HInput",components:{ElFormItem:t.ElFormItem,ElInput:t.ElInput},props:ft,setup(t,o){const r=m(t),n=e.computed((()=>rt(t,at))),l=e.computed((()=>rt(t,mt)));let a=0;return{...r,formItemProps:n,inputProps:l,debounceChange:function(e){const{realtime:o,waitTime:n}=t;if(a&&clearTimeout(a),o)r.change(e);else{if(r.updateCheckedValue(e),!r.wrapper)return;a=setTimeout(r.wrapper.insetSearch,n)}},enterHandle:function(e){var t;a&&clearTimeout(a),r.checked.value=e.target.value,r.option.updateWrapperQuery(),null==(t=r.wrapper)||t.search()},getNode:u}}}),vt={key:0,class:"condition-item__postfix"};const ht=pt(yt,[["render",function(t,o,r,n,l,a){const i=e.resolveComponent("ElInput"),c=e.resolveComponent("ElFormItem");return e.openBlock(),e.createBlock(c,e.mergeProps({class:`condition-item condition-item--input condition-item--${t.field} condition-item--${!!t.postfix}`},t.formItemProps,{prop:t.formItemProps.prop||t.field}),{default:e.withCtx((()=>[e.createVNode(i,e.mergeProps(t.inputProps,{disabled:t.insetDisabled,"model-value":t.checked,class:"condition-item__content",onInput:t.debounceChange,onKeydown:e.withKeys(t.enterHandle,["enter"])}),null,16,["disabled","model-value","onInput","onKeydown"]),t.postfix?(e.openBlock(),e.createElementBlock("div",vt,["string"==typeof t.postfix?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(t.postfix),1)],64)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.getNode(t.postfix,t.checked)),{key:1}))])):e.createCommentVNode("",!0)])),_:1},16,["class","prop"])}]]),gt={...t.ElDatePicker.props,...v,...nt,...lt,valueFormat:{type:String,default:"YYYY-MM-DD"},beginField:{type:String},endField:{type:String}},kt=/range$/;const bt=Object.keys(t.ElDatePicker.props),xt=e.defineComponent({inheritAttrs:!1,name:"HDatepicker",components:{ElFormItem:t.ElFormItem,ElDatePicker:t.ElDatePicker},props:gt,setup(t,o){const{multiple:r,fields:n,...l}=e.toRefs(t),a=e.computed((()=>void 0!==t.multiple?t.multiple:function(e){return!!e&&kt.test(e)}(t.type))),i=e.computed((()=>t.fields||(a.value&&t.beginField&&t.endField?[t.beginField,t.endField]:void 0)));return{...m(e.reactive({...l,multiple:a,fields:i})),formItemProps:e.computed((()=>rt(t,at))),datepickerProps:e.computed((()=>rt(t,bt))),isMultiple:a,getNode:u}}}),_t={key:0,class:"condition-item__postfix"};const Bt=pt(xt,[["render",function(t,o,r,n,l,a){const i=e.resolveComponent("ElDatePicker"),c=e.resolveComponent("ElFormItem");return e.openBlock(),e.createBlock(c,e.mergeProps({class:`condition-item condition-item--datepicker ${t.isMultiple&&"condition-item--datepicker-range"} condition-item--${t.field} condition-item--${!!t.postfix}`},t.formItemProps,{prop:t.formItemProps.prop||t.field}),{default:e.withCtx((()=>[e.createVNode(i,e.mergeProps(t.datepickerProps,{disabled:t.insetDisabled,"model-value":t.checked,class:"condition-item__content","onUpdate:modelValue":t.change}),null,16,["disabled","model-value","onUpdate:modelValue"]),t.postfix?(e.openBlock(),e.createElementBlock("div",_t,["string"==typeof t.postfix?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(t.postfix),1)],64)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.getNode(t.postfix,t.checked)),{key:1}))])):e.createCommentVNode("",!0)])),_:1},16,["class","prop"])}]]),Et={...t.ElCascader.props,...k,...nt,...lt,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},filterable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0}},Ct=Object.keys(t.ElCascader.props),St=e.defineComponent({inheritAttrs:!1,name:"HCascader",components:{ElFormItem:t.ElFormItem,ElCascader:t.ElCascader},props:Et,setup:(t,o)=>({...g(t),formItemProps:e.computed((()=>rt(t,at))),cascaderProps:e.computed((()=>rt(t,Ct))),getNode:u})}),Pt={key:0,class:"condition-item__postfix"};const Ft=pt(St,[["render",function(t,o,r,n,l,a){const i=e.resolveComponent("ElCascader"),c=e.resolveComponent("ElFormItem");return e.openBlock(),e.createBlock(c,e.mergeProps({class:`condition-item condition-item--cascader condition-item--${t.field} condition-item--${!!t.postfix}`},t.formItemProps,{prop:t.formItemProps.prop||t.field}),{default:e.withCtx((()=>[e.createVNode(i,e.mergeProps(t.cascaderProps,{disabled:t.insetDisabled,options:t.finalOption,"model-value":t.checked,class:"condition-item__content","onUpdate:modelValue":t.change}),null,16,["disabled","options","model-value","onUpdate:modelValue"]),t.postfix?(e.openBlock(),e.createElementBlock("div",Pt,["string"==typeof t.postfix?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(t.postfix),1)],64)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.getNode(t.postfix,t.checked)),{key:1}))])):e.createCommentVNode("",!0)])),_:1},16,["class","prop"])}]]),wt={...t.ElRadioGroup.props,...v,...nt,...lt,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},type:{type:String},cancelable:{type:Boolean,default:void 0}},Ot=Object.keys(t.ElRadioGroup.props),Vt=e.defineComponent({inheritAttrs:!1,name:"HRadio",components:{ElFormItem:t.ElFormItem,ElRadioGroup:t.ElRadioGroup,ElRadioButton:t.ElRadioButton,ElRadio:t.ElRadio},props:wt,setup:(t,o)=>({...m(t),formItemProps:e.computed((()=>rt(t,at))),radioProps:e.computed((()=>rt(t,Ot))),radioGroupRef:e.ref(),radioType:e.computed((()=>"button"===t.type?"ElRadioButton":"ElRadio")),eventName:e.computed((()=>t.cancelable?"click":null)),customChange:function(e,t,o){o(e===t?"":e)},getNode:u})}),It={key:0,class:"condition-item__postfix"};const jt=pt(Vt,[["render",function(t,o,r,n,l,a){const i=e.resolveComponent("ElRadioGroup"),c=e.resolveComponent("ElFormItem");return e.openBlock(),e.createBlock(c,e.mergeProps({class:`condition-item condition-item--radio condition-item--${t.field} condition-item--${!!t.postfix}`},t.formItemProps,{prop:t.formItemProps.prop||t.field}),{default:e.withCtx((()=>[e.createVNode(i,e.mergeProps({ref:"radioGroupRef"},t.radioProps,{disabled:t.insetDisabled,"model-value":t.checked,class:"condition-item__content","onUpdate:modelValue":t.change}),{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.finalOption,(o=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.radioType),e.mergeProps({key:o[t.valueKey],label:o[t.valueKey]},{[e.toHandlerKey(t.eventName)]:e.withModifiers((e=>t.customChange(o[t.valueKey],t.checked,t.change)),["prevent"])}),{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(o[t.labelKey]),1)])),_:2},1040,["label"])))),128))])),_:1},16,["disabled","model-value","onUpdate:modelValue"]),t.postfix?(e.openBlock(),e.createElementBlock("div",It,["string"==typeof t.postfix?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(t.postfix),1)],64)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.getNode(t.postfix,t.checked)),{key:1}))])):e.createCommentVNode("",!0)])),_:1},16,["class","prop"])}]]),Dt={...t.ElCheckbox.props,...v,...nt,...lt,labelKey:{type:String,default:"label"},valueKey:{type:String,default:"value"},type:{type:String},multiple:{type:Boolean,default:!0}},Nt=Object.keys(t.ElCheckbox.props),At=e.defineComponent({inheritAttrs:!1,name:"HCheckbox",components:{ElFormItem:t.ElFormItem,ElCheckboxGroup:t.ElCheckboxGroup,ElCheckboxButton:t.ElCheckboxButton,ElCheckbox:t.ElCheckbox},props:Dt,setup(t,o){const r=e.ref(),n=e.computed((()=>"button"===t.type?"ElCheckboxButton":"ElCheckbox"));return{...m(t),formItemProps:e.computed((()=>rt(t,at))),checkboxProps:e.computed((()=>rt(t,Nt))),checkboxGroupRef:r,checkboxType:n,getNode:u}}}),Tt={key:0,class:"condition-item__postfix"};const Kt=pt(At,[["render",function(t,o,r,n,l,a){const i=e.resolveComponent("ElCheckboxGroup"),c=e.resolveComponent("ElFormItem");return e.openBlock(),e.createBlock(c,e.mergeProps({class:`condition-item condition-item--checkbox condition-item--${t.field} condition-item--${!!t.postfix}`},t.formItemProps,{prop:t.formItemProps.prop||t.field}),{default:e.withCtx((()=>[e.createVNode(i,e.mergeProps(t.checkboxProps,{disabled:t.insetDisabled,"model-value":t.checked,ref:"checkboxGroupRef",class:"condition-item__content","onUpdate:modelValue":t.change}),{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.finalOption,(o=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.checkboxType),{key:o[t.valueKey],label:o[t.valueKey]},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(o[t.labelKey]),1)])),_:2},1032,["label"])))),128))])),_:1},16,["disabled","model-value","onUpdate:modelValue"]),t.postfix?(e.openBlock(),e.createElementBlock("div",Tt,["string"==typeof t.postfix?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(t.postfix),1)],64)):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.getNode(t.postfix,t.checked)),{key:1}))])):e.createCommentVNode("",!0)])),_:1},16,["class","prop"])}]]),Rt=Object.keys(t.ElForm.props).concat("class","style"),Qt={...t.ElForm.props,...a,class:{type:[Object,Array,String]},style:{type:[Object,Array,String]},datum:{type:Object,default:()=>({})},resetToInitialValue:{type:Boolean},immediateSearch:{type:Boolean},renderBtn:{type:Boolean,default:!0},resetTriggerSearch:{type:Boolean},searchText:{type:String,default:"搜索"},resetText:{type:String,default:"重置"}},$t={search:e=>!0,ready:e=>!0,reset:e=>!0},qt={select:e.markRaw(dt),input:e.markRaw(ht),datepicker:e.markRaw(Bt),cascader:e.markRaw(Ft),radio:e.markRaw(jt),checkbox:e.markRaw(Kt)},Ht={};function Gt(e){return e?Ht[e]||qt[e]:{...qt,...Ht}}const Ut=e.defineComponent({name:"HWrapper",inheritAttrs:!1,components:{ElForm:t.ElForm,ElButton:t.ElButton},props:Qt,emits:$t,setup(t,o){const r=e.computed((()=>rt(t,Rt))),n=e.ref(),a=o.emit.bind(o,"search"),i=o.emit.bind(o,"reset"),c=l({...t,search:a,reset:i});return e.onMounted((()=>{t.immediateSearch&&o.emit("ready",c.getQuery())})),{...c,rootProps:r,formRef:n,getComponent:Gt,resetAndSearch:function(){c.reset(),c.search()}}}});const zt=pt(Ut,[["render",function(t,o,r,n,l,a){const i=e.resolveComponent("ElButton"),c=e.resolveComponent("ElForm");return e.openBlock(),e.createBlock(c,e.mergeProps(t.rootProps,{ref:"formRef",model:t.query}),{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.datum,((o,r)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.getComponent(o.t)),e.mergeProps({key:r},o,{field:o.as||r,resetToInitialValue:t.resetToInitialValue,backfill:t.backfill,query:t.query}),null,16,["field","resetToInitialValue","backfill","query"])))),128)),e.renderSlot(t.$slots,"btn",{search:t.search,reset:t.reset,resetAndSearch:t.resetAndSearch},(()=>[t.renderBtn?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(i,{size:t.size,onClick:t.search},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.searchText),1)])),_:1},8,["size","onClick"]),e.createVNode(i,{size:t.size,onClick:o[0]||(o[0]=e=>t.resetTriggerSearch?t.resetAndSearch():t.reset())},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.resetText),1)])),_:1},8,["size"])],64)):e.createCommentVNode("",!0)]))])),_:3},16,["model"])}]]);exports.HCascader=Ft,exports.HCheckbox=Kt,exports.HDatePicker=Bt,exports.HInput=ht,exports.HRadio=jt,exports.HSelect=dt,exports.HWrapper=zt,exports.cascaderProps=Et,exports.checkboxProps=Dt,exports.commonProps=nt,exports.datepickerProps=gt,exports.defineCondition=function(t){return e.reactive(t)},exports.formItemPropKeys=at,exports.formItemProps=lt,exports.formPropKeys=Rt,exports.getComponent=Gt,exports.inputProps=ft,exports.provideKey=n,exports.radioProps=wt,exports.registerComponent=function(t,o){Ht[t]=e.markRaw(o)},exports.selectProps=it,exports.unregisterComponent=function(e){delete Ht[e]},exports.wrapperEmits=$t,exports.wrapperProps=Qt;
//# sourceMappingURL=index.cjs.min.js.map
